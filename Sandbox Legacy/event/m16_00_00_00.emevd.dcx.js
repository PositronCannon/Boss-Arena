// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    
    RegisterBonfire(16000002, 16001952, 0, 0, 0, 5);
    RegisterBonfire(16000003, 16001953, 0, 0, 0, 5);
    RegisterBonfire(16000004, 16001954, 0, 0, 0, 5);
    RegisterBonfire(16000005, 16001960, 0, 0, 0, 5);
    RegisterBonfire(16000007, 16001964, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 16000800, 16000000, 16000950, 16001950, 1101004800);
    InitializeCommonEvent(1, 9005810, 16000850, 16000001, 16000951, 16001951, 1090519040);
    InitializeCommonEvent(2, 9005810, 16000860, 16000006, 16000962, 16001962, 1090519040);
    InitializeEvent(0, 16002810, 0);
    InitializeEvent(0, 16002800, 0);
    InitializeEvent(0, 16002811, 0);
    InitializeEvent(0, 16002812, 0);
    InitializeEvent(0, 16002822, 0);
    InitializeEvent(0, 16002824, 0);
    InitializeEvent(0, 16002826, 0);
    InitializeEvent(0, 16002830, 0);
    InitializeEvent(0, 16002832, 0);
    InitializeEvent(0, 16002836, 0);
    InitializeEvent(0, 16002838, 0);
    InitializeEvent(0, 16002840, 0);
    InitializeEvent(0, 16002842, 16000800);
    InitializeEvent(1, 16002842, 16000801);
    InitializeEvent(0, 16002849, 0);
    InitializeEvent(0, 16002855, 0);
    InitializeEvent(0, 16002850, 0);
    InitializeEvent(0, 16002899, 0);
    InitializeEvent(0, 16002865, 0);
    InitializeEvent(0, 16002860, 0);
    InitializeEvent(0, 16002889, 0);
    InitializeEvent(0, 16002695, 0);
    InitializeEvent(0, 16002690, 16002696, 16001690, 16001692);
    InitializeEvent(0, 16002691, 16001690, 16001692, 16002690);
    InitializeEvent(0, 16002620, 16000622, 16001622);
    InitializeEvent(1, 16002620, 16000624, 16001624);
    InitializeEvent(0, 16002625, 0);
    InitializeEvent(0, 16002500, 0);
    InitializeEvent(0, 16002650, 0);
    InitializeCommonEvent(0, 90005515, 16008544, 16001544);
    InitializeCommonEvent(0, 90005515, 16008546, 16001546);
    InitializeCommonEvent(0, 90005515, 16008548, 16001548);
    InitializeCommonEvent(0, 90005515, 16008542, 16001542);
    InitializeCommonEvent(0, 90005515, 16008552, 16001552);
    InitializeCommonEvent(0, 90005515, 16008556, 16001556);
    InitializeCommonEvent(0, 90005515, 16008554, 16001554);
    InitializeCommonEvent(0, 90005510, 16000552, 16001552, 16003552, 1277018, 208134, 0);
    InitializeCommonEvent(0, 90005510, 16000564, 16001564, 16003564, 1277018, 208134, 0);
    InitializeCommonEvent(0, 90005510, 16000560, 16001560, 16003560, 1277018, 208134, 0);
    InitializeCommonEvent(0, 90005510, 16000562, 16001562, 16003562, 1277018, 208134, 0);
    InitializeEvent(0, 16002580, 0);
    InitializeEvent(0, 16002510, 0);
    InitializeCommonEvent(0, 90005501, 16000510, 16001510, 0, 16001510, 16001511, 16001512, 16000511);
    InitializeCommonEvent(0, 90005501, 16000520, 16001520, 0, 16001520, 16001521, 16001522, 16000521);
    InitializeCommonEvent(0, 90005504, 16000525, 16001525, 0, 16001525, 16000526);
    InitializeCommonEvent(0, 90005504, 16000530, 16001530, 1, 16001530, 16000531);
    InitializeEvent(0, 16002640, 0);
    InitializeEvent(0, 16002570, 16001570, 16, 16002570, 0, 16002574, 16002572, 16002573);
    InitializeEvent(0, 16002579, 0);
    InitializeEvent(0, 16002689, 0);
    InitializeEvent(0, 16002670, 0);
    InitializeCommonEvent(0, 900005610, 16001670, 100, 800, 0);
    InitializeCommonEvent(0, 900005610, 16001671, 100, 800, 0);
    InitializeCommonEvent(0, 90005502, 16000514, 16001512, 16002511);
    InitializeEvent(0, 16002590, 0);
    InitializeCommonEvent(0, 90005694, 16001651, 16001650, 201, 0, 200400, 1061158912, 0, 1065353216);
    InitializeEvent(0, 16002505, 0);
    InitializeCommonEvent(0, 90005620, 16000575, 16001575, 16001576, 0, 16002575, 16002576, 16002577);
    InitializeCommonEvent(0, 90005621, 16000575, 16001578);
    InitializeCommonEvent(0, 90005620, 16000565, 16001565, 16001566, 16001567, 16002565, 16002566, 16002567);
    InitializeCommonEvent(0, 90005621, 16000565, 16001568);
    InitializeCommonEvent(0, 90005790, 0, 16000180, 16002181, 16002182, 16000180, 23, 16002180, 16002181, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005791, 16000180, 16002181, 16002182, 16000180);
    InitializeCommonEvent(0, 90005792, 16000180, 16002181, 16002182, 16000180, 16000940, 0);
    InitializeEvent(0, 16002185, 16000180, 16002181, 16002182, 16000180, 16002180, 16002182);
    InitializeCommonEvent(0, 90005702, 16000701, 3103, 3100, 3104);
    InitializeEvent(0, 16003700, 16000700, 16002700, 16000740);
    InitializeEvent(0, 16003701, 16000701, 16000760, 16001709);
    InitializeEvent(0, 16003702, 400073);
    InitializeEvent(0, 16003703, 16001701, 16001706, 16001700);
    InitializeEvent(0, 16003704, 7602, 7603, 7604);
    InitializeEvent(0, 16003707, 16000700, 16009270);
    InitializeEvent(0, 16003705, 16000741, 16000701);
    InitializeEvent(0, 16003706, 16000741, 16000701);
    InitializeEvent(0, 16003708, 0);
    InitializeEvent(0, 16003709, 0);
    InitializeCommonEvent(0, 90005750, 16001702, 4350, 100730, 400073, 400073, 16009208, 6101);
    InitializeCommonEvent(0, 90005750, 16001703, 4350, 100740, 400074, 400074, 16009216, 6101);
    InitializeCommonEvent(0, 90005750, 16001704, 4350, 100750, 400075, 400075, 16009217, 6101);
    InitializeCommonEvent(0, 90005750, 16001708, 4350, 100725, 400070, 400072, 16009270, 6101);
    InitializeCommonEvent(0, 90005750, 16001709, 4350, 100710, 400071, 400071, 16009266, 6101);
    InitializeCommonEvent(0, 90005750, 16001702, 4350, 100760, 400076, 400076, 16009267, 6101);
    InitializeCommonEvent(0, 90005750, 16001703, 4350, 100770, 400077, 400077, 16009268, 6101);
    InitializeCommonEvent(0, 90005750, 16001704, 4350, 100780, 400078, 400078, 16009269, 6101);
    InitializeCommonEvent(0, 90005775, 80110000, 400290, -1082130432);
    InitializeCommonEvent(0, 90005775, 80392000, 400180, -1082130432);
    InitializeCommonEvent(0, 90005775, 81423900, 400073, -1082130432);
    InitializeCommonEvent(0, 90005775, 83395300, 400074, -1082130432);
    InitializeCommonEvent(0, 90005775, 85505600, 400075, -1082130432);
    InitializeEvent(0, 16003710, 16000710);
    InitializeEvent(0, 16003712, 0);
    InitializeCommonEvent(0, 90005702, 16000722, 3423, 3420, 3424);
    InitializeEvent(0, 16003720, 16000720, 16000721);
    InitializeEvent(0, 16003722, 16000722, 16000723);
    InitializeEvent(0, 16003721, 16009208);
    InitializeEvent(0, 16003723, 16000722, 16000723);
    InitializeEvent(0, 16003724, 0);
    InitializeEvent(0, 16003725, 0);
    InitializeEvent(0, 16003726, 0);
    InitializeEvent(0, 16003727, 0);
    InitializeCommonEvent(0, 90005750, 16001720, 4350, 100910, 400091, 400091, 16009337, 0);
    InitializeCommonEvent(0, 90005750, 16001721, 4350, 100911, 400091, 400091, 16009338, 0);
    InitializeEvent(0, 16003730, 16000730);
    InitializeEvent(0, 16003731, 16009417, 16002731, 16009400);
    InitializeEvent(0, 16003740, 16000750, 16001705, 16002710);
    InitializeEvent(0, 16003742, 16000751, 16001711, 16001705);
    InitializeEvent(0, 16003741, 16009450);
    InitializeEvent(0, 16003743, 0);
    InitializeCommonEvent(0, 90005750, 16001712, 4350, 102910, 400291, 400291, 16009463, 0);
    InitializeEvent(0, 16003750, 16000801, 16000800, 9122, 16002805, 1128464384);
    InitializeEvent(0, 16003760, 16000770);
    InitializeEvent(0, 16003761, 16000770);
    InitializeEvent(0, 16003762, 16001707, 4110, 2, 60802, 60802, 9122, 0);
    InitializeEvent(0, 16003763, 0);
    InitializeEvent(0, 16003764, 0);
    InitializeEvent(0, 16003765, 0);
});

$Event(16002690, Restart, function(X0_4, X4_4, X8_4) {
    DisableNetworkSync();
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(16000800));
    EnableAsset(X4_4);
    ForceAnimationPlayback(X4_4, 0, false, false, false);
    WaitFor(EventFlag(16002695));
    if (!EventFlag(X0_4)) {
        DisableAsset(X4_4);
        DeleteAssetfollowingSFX(X8_4, true);
        EndEvent();
    }
    CreateAssetfollowingSFX(X8_4, 90, 6102);
    ForceAnimationPlayback(X4_4, 0, false, false, false);
    EnableObjAct(X4_4, 99340);
    SetEventFlagID(16007690, OFF);
});

$Event(16002691, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(EventFlag(16000800) || !PlayerIsInOwnWorld());
    WaitFor(ActionButtonInArea(9532, X4_4) && EventFlag(16002696));
    DeleteAssetfollowingSFX(X4_4, true);
    IssueShortWarpRequest(10000, TargetEntityType.Area, X8_4, -1);
    ForceAnimationPlayback(10000, 60530, false, false, false);
    ForceAnimationPlayback(X0_4, 1, false, false, false);
    WaitFixedTimeSeconds(2.8);
    DisableAsset(X0_4);
    WaitFixedTimeSeconds(0.1);
    AwardItemLot(16000690);
});

$Event(16002695, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(16000800));
    WaitFor(PlayerIsInOwnWorld() && InArea(10000, 16002165));
    if (!(PlayerHasItemIncludingBBox(ItemType.Weapon, 17030000)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030001)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030002)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030003)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030004)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030005)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030006)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030007)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030008)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030009)
        || PlayerHasItemIncludingBBox(ItemType.Weapon, 17030010))) {
        SetEventFlagID(16002696, ON);
    }
});

$Event(16002800, Restart, function() {
    EndIf(EventFlag(16000800));
    WaitFor(CharacterHPValue(16000800) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(16008000, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(16000800));
    HandleBossDefeatAndDisplayBanner(16000800, TextBannerType.DemigodFelled);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, -11100);
});

$Event(16002810, Restart, function() {
    if (EventFlag(16000800)) {
        DisableCharacter(16005800);
        DisableCharacterCollision(16005800);
        ForceCharacterDeath(16005800, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(16005800);
    DisableCharacter(16000800);
    DisableCharacterCollision(16000800);
    DisableCharacterFadeOnEnable(16000800);
    WaitFor(
        (PlayerIsInOwnWorld() && EntityInRadiusOfEntity(10000, 16000801, 40, 1))
            || HasDamageType(16000800, 10000, DamageType.Unspecified)
            || CharacterHasStateInfo(16000800, 436)
            || CharacterHasStateInfo(16000800, 2)
            || CharacterHasStateInfo(16000800, 5)
            || CharacterHasStateInfo(16000800, 6)
            || CharacterHasStateInfo(16000800, 260));
    SetNetworkconnectedEventFlagID(16000801, ON);
    Goto(L2);
L1:
    WaitFor(EventFlag(16002805) && InArea(10000, 16002800));
L2:
    SetSpEffect(10000, 1908);
    EnableCharacterAI(16000801);
    SetNetworkUpdateRate(16000801, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 16000801, 0, 904710000);
    SetEventFlagID(16002803, ON);
    EnableLockOnPoint(16000801, 220);
    DisableLockOnPoint(16000801, 221);
    SetEventFlagID(16002801, ON);
    ForceAnimationPlayback(16000801, 20002, false, false, false);
});

$Event(16002811, Restart, function() {
    EndIf(EventFlag(16000800));
    WaitFor(
        PlayerIsInOwnWorld() && HPRatio(16000801) <= 0.01 && !CharacterHasSpEffect(16000801, 11955));
    WaitFixedTimeSeconds(0.1);
    if (CharacterHasSpEffect(16000801, 11955)) {
        RestartEvent();
    }
    ForceAnimationPlayback(16000801, 20001, false, false, false);
    WaitFor(PlayerIsInOwnWorld() && !CharacterDead(10000) && CharacterHasSpEffect(16000801, 11920));
    ForceAnimationPlayback(16000801, 30001, true, false, false);
    ClearSpEffect(16000801, 11943);
    ClearSpEffect(16000801, 11948);
    EndIf(HPRatio(10000) == 0 || CharacterDead(10000));
    if (PlayerIsInOwnWorld()) {
        PlayCutsceneToPlayerAndWarp(16000020, CutscenePlayMode.Skippable, 16002830, 16, 10000, 16, false);
    } else {
        PlayCutsceneToPlayer(16000020, CutscenePlayMode.Skippable, 10000);
    }
    WaitFixedTimeRealFrames(1);
    if (PlayerIsInOwnWorld()) {
        SetCameraAngle(-4, 0);
    }
    SetEventFlagID(16002802, ON);
    SetSpEffect(16000800, 11901);
    DisableCharacter(16000801);
    DisableCharacterCollision(16000801);
    EnableCharacter(16000800);
    SetNetworkUpdateRate(16000800, true, CharacterUpdateFrequency.AlwaysUpdate);
    SpawnMapSFX(16002814);
    WarpCharacterAndCopyFloor(16000800, TargetEntityType.Area, 16002831, 0, 16000801);
    WaitFixedTimeFrames(1);
    EnableCharacterCollision(16000800);
    EnableCharacterAI(16000800);
    DisplayBossHealthBar(Enabled, 16000800, 0, 904710001);
    DisableLockOnPoint(16000800, 220);
    EnableLockOnPoint(16000800, 221);
    ForceAnimationPlayback(16000800, 20002, false, true, false);
});

$Event(16002812, Restart, function() {
    EndIf(EventFlag(16000800));
    WaitFor(HPRatio(16000800) <= 0.5);
    SetSpEffect(16000800, 11902);
});

$Event(16002822, Restart, function() {
    WaitFor(
        CharacterBackreadStatus(16000800)
            && (CharacterHasSpEffect(16000800, 11901) || CharacterHasSpEffect(16000800, 11902))
            && CharacterHasSpEffect(16000800, 11940)
            && !CharacterHasSpEffect(16000800, 11930)
            && !CharacterHasSpEffect(16000800, 11931)
            && !CharacterHasSpEffect(16000800, 11941)
            && !CharacterHasSpEffect(16000800, 11946)
            && !CharacterHasSpEffect(16000800, 11947));
    WaitFixedTimeSeconds(3);
    SpawnMapSFX(16002810);
    SetSpEffect(16000800, 11930);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(16002824, Restart, function() {
    WaitFor(
        CharacterBackreadStatus(16000800)
            && (CharacterHasSpEffect(16000800, 11901) || CharacterHasSpEffect(16000800, 11902))
            && CharacterHasSpEffect(16000800, 11940)
            && CharacterHasSpEffect(16000800, 11930)
            && !CharacterHasSpEffect(16000800, 11931)
            && !CharacterHasSpEffect(16000800, 11941)
            && !CharacterHasSpEffect(16000800, 11946)
            && !CharacterHasSpEffect(16000800, 11947));
    WaitFixedTimeSeconds(3);
    SpawnMapSFX(16002811);
    DeleteMapSFX(16002810, true);
    SetSpEffect(16000800, 11931);
    ClearSpEffect(16000800, 11930);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(16002826, Restart, function() {
    WaitFor(
        CharacterBackreadStatus(16000800)
            && (CharacterHasSpEffect(16000800, 11901) || CharacterHasSpEffect(16000800, 11902))
            && CharacterHasSpEffect(16000800, 11940)
            && CharacterHasSpEffect(16000800, 11931)
            && !CharacterHasSpEffect(16000800, 11930)
            && !CharacterHasSpEffect(16000800, 11941)
            && !CharacterHasSpEffect(16000800, 11946)
            && !CharacterHasSpEffect(16000800, 11947));
    WaitFixedTimeSeconds(3);
    SpawnMapSFX(16002812);
    DeleteMapSFX(16002811, true);
    SetSpEffect(16000800, 11941);
    ClearSpEffect(16000800, 11931);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(16002830, Restart, function() {
    EndIf(EventFlag(16000800));
    WaitFor(CharacterHasSpEffect(16000800, 11942));
    SpawnMapSFX(16002813);
    ClearSpEffect(16000800, 11941);
    SetSpEffect(16000800, 11947);
    ShootBullet(16000800, 16001800, 100, 247100510, 0, 0, 0);
    ShootBullet(16000800, 16001800, 100, 247100810, 0, 0, 0);
    ShootBullet(16000800, 16001800, 100, 247100820, 0, 0, 0);
    ShootBullet(16000800, 16001800, 100, 247100830, 0, 0, 0);
    WaitFixedTimeSeconds(25);
    SetSpEffect(16000800, 11945);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(16002832, Restart, function() {
    WaitFor(CharacterHasSpEffect(16000800, 11946));
    DeleteMapSFX(16002810, true);
    DeleteMapSFX(16002811, true);
    DeleteMapSFX(16002812, true);
    DeleteMapSFX(16002813, true);
    ClearSpEffect(16000800, 11941);
    ClearSpEffect(16000800, 11945);
    ClearSpEffect(16000800, 11947);
    ClearSpEffect(16000800, 11946);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(16002836, Restart, function() {
    DisableNetworkSync();
    EndIf(EventFlag(16000800));
    EndIf(EventFlag(16002802));
    if (PlayerIsInOwnWorld()) {
        WaitFor(!EventFlag(16002802) && EventFlag(16002801) && EventFlag(16002805));
        ChangeCamera(4710, 4712);
        EndEvent();
    }
L0:
    WaitFor(!EventFlag(16002802) && EventFlag(16002806) && EventFlag(16002801));
    ChangeCamera(4710, 4712);
});

$Event(16002838, Restart, function() {
    DisableNetworkSync();
    EndIf(EventFlag(16000800));
    if (PlayerIsInOwnWorld()) {
        WaitFor(EventFlag(16002802) && EventFlag(16002805));
        ChangeCamera(4710, 4711);
        EndEvent();
    }
L0:
    WaitFor(EventFlag(16002802) && EventFlag(16002806));
    ChangeCamera(4710, 4711);
});

$Event(16002840, Restart, function() {
    DisableNetworkSync();
    EndIf(EventFlag(16000800));
    GotoIf(L1, InArea(10000, 16002164));
    Goto(L0);
L1:
    SetSpEffect(10000, 1908);
L0:
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(16002842, Restart, function(X0_4) {
    EndIf(EventFlag(16000800));
    WaitFor(
        CharacterHasSpEffect(X0_4, 1929)
            || CharacterHasSpEffect(X0_4, 1930)
            || CharacterHasSpEffect(X0_4, 1931)
            || CharacterHasSpEffect(X0_4, 1932));
    GotoIf(L0, CharacterHasSpEffect(X0_4, 1929));
    GotoIf(L1, CharacterHasSpEffect(X0_4, 1930));
    GotoIf(L2, CharacterHasSpEffect(X0_4, 1931));
    GotoIf(L3, CharacterHasSpEffect(X0_4, 1932));
L0:
    GotoIf(S0, NumberOfCoopClients() == 0);
    GotoIf(S1, NumberOfCoopClients() == 1);
    GotoIf(S2, NumberOfCoopClients() == 2);
S0:
    SetSpEffect(X0_4, 19450);
    Goto(L10);
S1:
    SetSpEffect(X0_4, 19451);
    Goto(L10);
S2:
    SetSpEffect(X0_4, 19452);
    Goto(L10);
L1:
    GotoIf(S3, NumberOfCoopClients() == 0);
    GotoIf(S4, NumberOfCoopClients() == 1);
    GotoIf(S5, NumberOfCoopClients() == 2);
S3:
    SetSpEffect(X0_4, 19455);
    Goto(L10);
S4:
    SetSpEffect(X0_4, 19456);
    Goto(L10);
S5:
    SetSpEffect(X0_4, 19457);
    Goto(L10);
L2:
    GotoIf(S6, NumberOfCoopClients() == 0);
    GotoIf(S7, NumberOfCoopClients() == 1);
    GotoIf(S8, NumberOfCoopClients() == 2);
S6:
    SetSpEffect(X0_4, 19460);
    Goto(L10);
S7:
    SetSpEffect(X0_4, 19461);
    Goto(L10);
S8:
    SetSpEffect(X0_4, 19462);
    Goto(L10);
L3:
    GotoIf(S9, NumberOfCoopClients() == 0);
    GotoIf(S10, NumberOfCoopClients() == 1);
    GotoIf(S11, NumberOfCoopClients() == 2);
S9:
    SetSpEffect(X0_4, 19465);
    Goto(L10);
S10:
    SetSpEffect(X0_4, 19466);
    Goto(L10);
S11:
    SetSpEffect(X0_4, 19467);
    Goto(L10);
L10:
    WaitFixedTimeFrames(15);
    RestartEvent();
});

$Event(16002846, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4) {
    if (!EventFlag(X0_4)) {
        WaitFixedTimeFrames(1);
        if (X24_4 != 0) {
            GotoIf(L0, EventFlag(X24_4));
            if (X28_4 != 0) {
                areaFlag |= InArea(10000, X28_4);
            }
            areaFlag |= EventFlag(X24_4);
            WaitFor((areaFlag && PlayerIsInOwnWorld()) || EventFlag(X0_4));
            RestartIf(EventFlag(X0_4));
            Goto(L1);
        }
L0:
        if (PlayerIsInOwnWorld()) {
            WaitFor(
                EventFlag(X0_4)
                    || (PlayerIsInOwnWorld() && !EventFlag(X0_4) && ActionButtonInArea(X20_4, X4_4)));
            GotoIf(L2, !PlayerIsInOwnWorld());
            RestartIf(EventFlag(X0_4));
            SuppressSoundForFogGate(5);
            if (!CharacterHasSpEffect(10000, 4250)) {
                RotateCharacter(10000, X8_4, 60060, true);
            } else {
                RotateCharacter(10000, X8_4, 60060, false);
            }
        }
L3:
        GotoIf(L1, EventFlag(X12_4));
        time = ElapsedSeconds(3);
        WaitFor(
            ((InArea(10000, X8_4) || time) && PlayerIsInOwnWorld() && !EventFlag(X0_4))
                || EventFlag(X0_4));
        RestartIf(EventFlag(X0_4));
        RestartIf(time.Passed);
        WaitFor(PlayerIsInOwnWorld() && EntityInRadiusOfEntity(16000801, 10000, 40, 1));
L1:
        if (PlayerIsInOwnWorld()) {
            IssueBossRoomEntryNotification();
            SetNetworkUpdateAuthority(X16_4, AuthorityLevel.Forced);
        }
L2:
        ActivateMultiplayerdependantBuffs(X16_4);
        SetNetworkconnectedEventFlagID(X12_4, ON);
        EndIf(!PlayerIsInOwnWorld());
        RestartEvent();
    }
L10:
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        PlayerIsInOwnWorld()
            && EventFlag(X0_4)
            && (HasMultiplayerState(MultiplayerState.Invasion)
                || HasMultiplayerState(MultiplayerState.InvasionPending))
            && ActionButtonInArea(10000, X4_4));
    RotateCharacter(10000, X8_4, 60060, true);
    SendInvadingPhantomsHome(0);
    RestartEvent();
});

$Event(16002849, Restart, function() {
    InitializeEvent(0, 16002846, 16000800, 16001801, 16002801, 16002805, 16005800, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 16000800, 16001801, 16002801, 16002805, 16002806, 10000);
    InitializeCommonEvent(0, 9005811, 16000800, 16001801, 3, 0);
    InitializeCommonEvent(0, 9005822, 16000800, 471000, 16002805, 16002806, 16002803, 16002802, 0, 0);
});

$Event(16002850, Restart, function() {
    EndIf(EventFlag(16000850));
    WaitFor(CharacterHPValue(16000850) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(16008000, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(16000850));
    HandleBossDefeatAndDisplayBanner(16000850, TextBannerType.GreatEnemyFelled);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, -11100);
});

$Event(16002855, Restart, function() {
    if (EventFlag(16000850)) {
        DisableCharacter(16000850);
        DisableCharacterCollision(16000850);
        ForceCharacterDeath(16000850, false);
        DeleteAssetfollowingSFX(16001682, true);
        if (!EventFlag(16007710)) {
            EnableAssetTreasure(16001681);
        }
        EndEvent();
    }
L0:
    DisableAssetTreasure(16001681);
    CreateAssetfollowingSFX(16001682, 90, 6101);
    DisableCharacterAI(16000850);
    if (!EventFlag(16000851)) {
        DisableCharacter(16000850);
        DisableCharacterCollision(16000850);
        ForceAnimationPlayback(16000850, 30001, true, false, false);
        WaitFor(
            (PlayerIsInOwnWorld() && EntityInRadiusOfEntity(10000, 16000850, 26, 1))
                || HasDamageType(16000850, 10000, DamageType.Unspecified)
                || CharacterHasStateInfo(16000850, 436)
                || CharacterHasStateInfo(16000850, 2)
                || CharacterHasStateInfo(16000850, 5)
                || CharacterHasStateInfo(16000850, 6)
                || CharacterHasStateInfo(16000850, 260));
        SetNetworkconnectedEventFlagID(16000851, ON);
        EnableCharacter(16000850);
        EnableCharacterCollision(16000850);
        EnableCharacterAI(16000850);
        ForceAnimationPlayback(16000850, 20001, false, true, false);
    } else {
L1:
        WaitFor(EventFlag(16002855) && InArea(10000, 16002850));
    }
L2:
    EnableCharacterAI(16000850);
    SetNetworkUpdateRate(16000850, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 16000850, 0, 903570000);
});

$Event(16002860, Restart, function() {
    EndIf(EventFlag(16000860));
    WaitFor(CharacterDead(16000860) && CharacterDead(16000861));
    HandleBossDefeatAndDisplayBanner(16000860, TextBannerType.EnemyFelled);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, -11100);
});

$Event(16002865, Restart, function() {
    if (EventFlag(16000860)) {
        DisableCharacter(16000860);
        DisableCharacterCollision(16000860);
        ForceCharacterDeath(16000860, false);
        DisableCharacter(16000861);
        DisableCharacterCollision(16000861);
        ForceCharacterDeath(16000861, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(16000860);
    DisableCharacterAI(16000861);
    WaitFor(EventFlag(16002865) && InArea(10000, 16002860));
    EnableCharacterAI(16000860);
    EnableCharacterAI(16000861);
    SetNetworkUpdateRate(16000860, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(16000861, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 16000860, 0, 904470000);
    DisplayBossHealthBar(Enabled, 16000861, 1, 904470001);
});

$Event(16002889, Default, function() {
    InitializeCommonEvent(0, 9005800, 16000860, 16001860, 16002860, 16002865, 16005860, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 16000860, 16001860, 16002860, 16002865, 16002866, 10000);
    InitializeCommonEvent(0, 9005811, 16000860, 16001860, 4, 0);
    InitializeCommonEvent(0, 9005811, 16000860, 16001861, 5, 0);
    InitializeCommonEvent(0, 9005822, 16000860, 931000, 16002865, 16002866, 0, 16002862, 0, 0);
});

$Event(16002899, Default, function() {
    InitializeCommonEvent(0, 9005800, 16000850, 16001850, 16002850, 16002855, 16005850, 10000, 16000851, 0);
    InitializeCommonEvent(0, 9005801, 16000850, 16001850, 16002850, 16002855, 16002856, 10000);
    InitializeCommonEvent(0, 9005811, 16000850, 16001850, 4, 16000851);
    InitializeCommonEvent(0, 9005811, 16000850, 16001851, 3, 0);
    InitializeCommonEvent(0, 9005822, 16000850, 356000, 16002855, 16002856, 0, 16002852, 0, 0);
});

$Event(16009000, Restart, function() {
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 16009213);
    WaitFor(CharacterBackreadStatus(10000));
    PlayCutsceneToPlayerAndWarp(16000010, CutscenePlayMode.Skippable, 16002840, 16000000, 10000, 0, false);
    WaitFixedTimeRealFrames(1);
    SetEventFlagID(16009213, OFF);
    ForceAnimationPlayback(20000, 60451, false, false, false);
});

$Event(16002900, Restart, function() {
    WaitFor(EntityInRadiusOfEntity(10000, 16000801, 30, 1));
    SetLockcamSlotNumber(16, 0, 1);
    WaitFor(!EntityInRadiusOfEntity(10000, 16000801, 30, 1));
    SetLockcamSlotNumber(16, 0, 0);
    RestartEvent();
});

$Event(16003700, Restart, function(X0_4, X4_4, X8_4) {
    WaitFixedTimeFrames(1);
    DisableNetworkSync();
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3100)) {
            SetEventFlagID(16009205, OFF);
        }
    }
L10:
    if (!EventFlag(3105)) {
        if (!EventFlag(3106)) {
            if (!EventFlag(3107)) {
                if (!EventFlag(3108)) {
                    DisableCharacter(X0_4);
                    SetCharacterBackreadState(X0_4, true);
                    EnableCharacterGravity(X0_4);
                    DisableCharacter(X8_4);
                    SetCharacterBackreadState(X8_4, true);
                    WaitFor(
                        EventFlag(3105) || EventFlag(3106) || EventFlag(3107) || EventFlag(3108));
                    RestartEvent();
                }
            }
        }
    }
L5:
    GotoIf(L1, EventFlag(3100));
    GotoIf(L2, EventFlag(3101));
    GotoIf(L3, EventFlag(3102));
    GotoIf(L4, EventFlag(3103));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X8_4, false);
    EnableCharacter(X8_4);
    DisableCharacterGravity(X0_4);
    IssueShortWarpRequest(X0_4, TargetEntityType.Area, X4_4, -1);
    ForceAnimationPlayback(X0_4, 90100, false, false, false);
    ForceAnimationPlayback(X8_4, 930010, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!(EventFlag(3105) || EventFlag(3106) || EventFlag(3107) || EventFlag(3108)));
    RestartEvent();
});

$Event(16003701, Restart, function(X0_4, X4_4, X8_4) {
    WaitFixedTimeFrames(1);
    DisableNetworkSync();
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3100)) {
            SetEventFlagID(16009205, OFF);
        }
    }
L10:
    if (!EventFlag(3109)) {
        if (!EventFlag(3110)) {
            if (!EventFlag(3111)) {
                DisableCharacter(X0_4);
                SetCharacterBackreadState(X0_4, true);
                DisableCharacter(X4_4);
                SetCharacterBackreadState(X4_4, true);
                WaitFor(EventFlag(3109) || EventFlag(3110) || EventFlag(3111));
                RestartEvent();
            }
        }
    }
L5:
    EnableCharacter(X4_4);
    SetCharacterBackreadState(X4_4, false);
    WarpAssetToCharacter(X8_4, X0_4, -1);
    GotoIf(L1, EventFlag(3100));
    GotoIf(L2, EventFlag(3101));
    GotoIf(L3, EventFlag(3102));
    GotoIf(L4, EventFlag(3103));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.FriendlyNPC);
    ForceAnimationPlayback(X0_4, 90101, false, false, false);
    if (EventFlag(3110)) {
        ForceAnimationPlayback(X0_4, 90102, false, false, false);
        DisableCharacterCollision(X0_4);
    }
    if (EventFlag(3111)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
    }
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    if (EventFlag(3111)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
    }
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    if (EventFlag(3111)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
    }
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (EventFlag(3111)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
    }
    Goto(L20);
L20:
    WaitFor(!(EventFlag(3109) || EventFlag(3110) || EventFlag(3111)));
    RestartEvent();
});

$Event(16003702, Restart, function(X0_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(3105));
    WaitFor(EventFlag(X0_4));
    SetEventFlagID(3118, ON);
    EndEvent();
});

$Event(16003703, Restart, function(X0_4, X4_4, X8_4) {
    RequestAssetRestoration(X0_4);
    EnableAssetInvunerability(X0_4);
    RequestAssetRestoration(X4_4);
    EnableAssetInvunerability(X4_4);
    RequestAssetRestoration(X8_4);
    EnableAssetInvunerability(X8_4);
    EndEvent();
});

$Event(16003704, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(EventValue(16009260, 3) >= 3);
    EndIf(EventFlag(3109));
    EndIf(EventFlag(3110));
    EndIf(EventFlag(3111));
    ClearEventValue(16009260, 3);
    EndIf(!EventFlag(X0_4));
    IncrementEventValue(16009260, 3, 3);
    EndIf(!EventFlag(X4_4));
    IncrementEventValue(16009260, 3, 3);
    SetEventFlagID(3438, ON);
    EndIf(!EventFlag(X8_4));
    IncrementEventValue(16009260, 3, 3);
    SetEventFlagID(3118, ON);
    EndEvent();
});

$Event(16003705, Restart, function(X0_4, X4_4) {
    WaitFixedTimeFrames(1);
    EndIf(!PlayerIsInOwnWorld());
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    DisableCharacterImmortality(X4_4);
    if (!(EventFlag(16009265) && !EventFlag(16009264))) {
        EndIf(EventFlag(16009264));
        EndIf(!EventFlag(3109));
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, false);
        EnableCharacterImmortality(X4_4);
        SetCharacterTalkRange(X4_4, 50);
        WaitFor(HasDamageType(X4_4, 10000, DamageType.Unspecified) && !EventFlag(9000));
        SetEventFlagID(16009265, ON);
        ForceAnimationPlayback(X4_4, 90201, false, false, false);
        SetCharacterTalkRange(X4_4, 17);
        WaitFixedTimeSeconds(7);
        EnableCharacter(X0_4);
        ForceAnimationPlayback(X0_4, 20021, false, false, false);
        DisplayBlinkingMessageWithPriority(80020, 0, false);
        WaitFixedTimeSeconds(1);
        DisableCharacter(X4_4);
        SetCharacterBackreadState(X4_4, true);
        EndEvent();
    }
L1:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    WaitFor(EntityInRadiusOfEntity(10000, X4_4, 10, 1) && !EventFlag(9000));
    SetCharacterBackreadState(X4_4, true);
    WaitFixedTimeSeconds(2);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 20021, false, false, false);
    DisplayBlinkingMessageWithPriority(80020, 0, false);
    WaitFixedTimeSeconds(1);
    WaitFixedTimeSeconds(4);
    DisableCharacter(X4_4);
    SetCharacterBackreadState(X4_4, true);
    EndEvent();
});

$Event(16003706, Restart, function(X0_4, X4_4) {
    EndIf(EventFlag(16009264));
    WaitFor(CharacterDead(X0_4));
    DisplayBlinkingMessageWithPriority(80021, 0, false);
    SetEventFlagID(16009264, ON);
    AwardItemLot(16000950);
    EnableCharacter(X4_4);
    SetCharacterBackreadState(X4_4, false);
    DisableCharacterCollision(X4_4);
    ForceAnimationPlayback(X4_4, 90007, false, false, false);
    WaitFixedTimeSeconds(2);
    ForceAnimationPlayback(X4_4, 90202, false, false, false);
    EndEvent();
});

$Event(16003707, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    if (EventFlag(400070) && EventFlag(400072)) {
        SetEventFlagID(X4_4, OFF);
        EndEvent();
    }
    if (!EventFlag(X4_4)) {
        WaitFor(
            (!EventFlag(16009208) && EventFlag(16000800) && !CharacterBackreadStatus(X0_4))
                || (!EventFlag(400070)
                    && EventFlag(16000800)
                    && AnyBatchEventFlags(3109, 3111)
                    && !CharacterBackreadStatus(X0_4)));
        SetEventFlagID(X4_4, ON);
    }
L1:
    WaitFor(EventFlag(400070) && EventFlag(400072));
    SetEventFlagID(X4_4, OFF);
    EndEvent();
});


