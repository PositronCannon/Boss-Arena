// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    InitializeCommonEvent(0, 9005810, 22000800, 22000000, 22000950, 22001950, 1084227584);
    RegisterBonfire(22000001, 22001951, 0, 0, 0, 5);
    RegisterBonfire(22000002, 22001952, 0, 0, 0, 5);
    RegisterBonfire(22000003, 22001953, 0, 0, 0, 5);
    RegisterBonfire(22000004, 22001954, 0, 0, 0, 5);
    InitializeEvent(0, 22000800, 0);
    InitializeEvent(0, 22002810, 0);
    InitializeEvent(0, 22002811, 0);
    InitializeEvent(0, 22002815, 0);
    InitializeEvent(0, 22002830, 22000800, 22001800, 22002800, 22002805, 22002806, 10000);
    InitializeEvent(0, 22002816, 0);
    InitializeEvent(0, 22002820, 0);
    InitializeEvent(0, 22002849, 0);
    InitializeEvent(0, 22002470, 0);
    InitializeEvent(0, 22002471, 22000705);
    InitializeEvent(0, 22002472, 0);
    InitializeEvent(0, 22002473, 22000705);
    InitializeEvent(0, 22002474, 22000705);
    InitializeEvent(0, 22002496, 22000706);
    InitializeEvent(0, 22002497, 22000706);
    InitializeCommonEvent(0, 90005615, 22002699, 0);
    InitializeCommonEvent(0, 900005610, 22001620, 100, 800, 0);
    InitializeCommonEvent(0, 900005580, 580600, 22001622, 9146);
    InitializeEvent(0, 22002500, 0);
    InitializeCommonEvent(0, 90005690, 22002600);
    InitializeCommonEvent(0, 90005691, 22002600);
    InitializeCommonEvent(0, 90005690, 22002601);
    InitializeCommonEvent(0, 90005691, 22002601);
    InitializeEvent(0, 22002501, 0);
    InitializeEvent(0, 22000702, 4460, 4900, 22000800, 22009209, 22002481, 22009207, 22009208, 22000496, 22009205, 4478, 4928, 2048439205);
    InitializeEvent(0, 22000700, 22000700, 4460, 4463, 4466, 1108082688, 90101, 4900, 22009219, 22009210, 22009211, 22009212, 22009222, 22009208, 22000496, 4928);
    InitializeCommonEvent(0, 90005774, 22000496, 106310, 400632);
    InitializeEvent(0, 22000701, 22000701, 4460, 4463, 4467, 1099431936, 90102, 22009231, 90103, 4900, 22009233, 4470, 90104, 4928);
    InitializeEvent(0, 22000703, 22000701, 22009237, 1084227584, 22009237, 22009231, 90201, 4894);
    InitializeEvent(0, 22000705, 22000710, 4285, 4286, 930000, 930001, 20010800);
    InitializeEvent(0, 22000708, 22002710, 22002711, 22002712, 22000710, 231, 22001710, 231, 1051931443, 90215, -1, -1, 1066192077, 1075419546, 22002713, 22002714, 22009285, 1036831949);
    InitializeEvent(0, 22000709, 22002714, 22009286, 1036831949);
    InitializeEvent(0, 22000707, 4286, 9913, 22009260, 22009261, 22009262, 22009263, 22009264, 22009265, 22009280, 22009281, 22009282, 22009283, 20010800, 4880, 22009275);
    InitializeEvent(0, 22000715, 4286, 9913, 22009287);
    InitializeEvent(0, 22000716, 22009287, 9711);
    InitializeEvent(0, 22000717, 20010800, 22009275, 4298, 22002699);
    InitializeCommonEvent(0, 90005750, 22000711, 4350, 107400, 400740, 400740, 4286, 6103);
    InitializeCommonEvent(0, 90005748, 22001700, 206020, 1030029, 1106247680, 4919);
    InitializeCommonEvent(0, 90005706, 22000730, 30018, 0);
    InitializeCommonEvent(0, 90005706, 22000731, 30015, 0);
});

$Event(50, Default, function() {
    InitializeCommonEvent(0, 90005250, 22000450, 22002450, 0, 0);
    InitializeCommonEvent(0, 90005301, 22000460, 22000460, 22000900, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000460, 30001, 20001, 22002460, 1106247680, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000400, 30005, 20005, 22002400, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000401, 30005, 20005, 22002402, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000407, 30003, 20003, 22002406, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000408, 30003, 20003, 22002408, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000409, 30003, 20003, 22002411, 1060320051, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000410, 30005, 20005, 22002408, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000411, 30003, 20003, 22002411, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000415, 30005, 20005, 22002415, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000413, 30003, 20003, 22002413, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000420, 30000, 20000, 22002420, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 22000422, 22002420, 0, 3020);
    InitializeCommonEvent(0, 90005250, 22000425, 22002425, 0, 3020);
    InitializeCommonEvent(0, 90005211, 22000426, 30000, 20000, 22002426, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000427, 30001, 20001, 22002427, 1077936128, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000429, 30001, 20001, 22002429, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000430, 30003, 20003, 22002431, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000431, 30003, 20003, 22002431, 1053609165, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 22000432, 22002431, 1053609165, 0);
    InitializeCommonEvent(0, 90005210, 22000433, 30003, 20003, 22002431, 1092616192, 1077936128, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000440, 30003, 20003, 22002440, 1106247680, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000441, 30003, 20003, 22002440, 1106247680, 1060320051, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000442, 30003, 20003, 22002442, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000443, 30003, 20003, 22002442, 1097859072, 1067030938, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000444, 30003, 20003, 22002442, 1097859072, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000445, 30003, 20003, 22002442, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000302, 30001, 20001, 22002302, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000303, 30001, 20001, 22002303, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000304, 30000, 20000, 22002302, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000310, 30000, 20000, 22002310, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000311, 30000, 20000, 22002310, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000315, 30000, 20000, 22002310, 1072064102, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000317, 30000, 20000, 22002310, 1074580685, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 22000312, 22002312, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000313, 30000, 20000, 22002312, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 22000314, 22002312, 1045220557, 0);
    InitializeCommonEvent(0, 90005200, 22000316, 30000, 20000, 22002312, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 22000318, 22002312, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000320, 30000, 20000, 22002320, 1072902963, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000321, 30001, 20001, 22002320, 1067869798, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000322, 30000, 20000, 22002320, 1060320051, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000323, 30000, 20000, 22002320, 1072064102, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000324, 30001, 20001, 22002320, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000325, 30001, 20001, 22002320, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000326, 30000, 20000, 22002320, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 22000327, 30001, 20001, 22002320, 1100218368, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000340, 30000, 20000, 22002340, 1060320051, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000341, 30000, 20000, 22002340, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000342, 30001, 20001, 22002340, 1050253722, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005210, 22000347, 30000, 20000, 22002347, 1092616192, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005210, 22000348, 30000, 20000, 22002347, 1092616192, 0, 0, 0, 0, 0);
    ClearSpEffect(22000200, 14902);
    ClearSpEffect(22000201, 14902);
    ClearSpEffect(22000202, 14902);
    ClearSpEffect(22000203, 14902);
    ClearSpEffect(22000210, 14902);
    ClearSpEffect(22000211, 14902);
    ClearSpEffect(22000212, 14902);
    ClearSpEffect(22000214, 14902);
    ClearSpEffect(22000215, 14902);
    ClearSpEffect(22000218, 14902);
    ClearSpEffect(22000219, 14902);
    ClearSpEffect(22000220, 14902);
    ClearSpEffect(22000221, 14902);
    ClearSpEffect(22000222, 14902);
    ClearSpEffect(22000227, 14902);
    ClearSpEffect(22000228, 14902);
    ClearSpEffect(22000242, 14902);
    ClearSpEffect(22000246, 14902);
    ClearSpEffect(22000247, 14902);
    ClearSpEffect(22000251, 14902);
    ClearSpEffect(22000275, 14902);
    ClearSpEffect(22000276, 14902);
    ClearSpEffect(22000277, 14902);
    ClearSpEffect(22000201, 14902);
    InitializeCommonEvent(0, 90005220, 22000201, 30000, 20000, 0, 0, 0, 0);
    ClearSpEffect(22000202, 14902);
    InitializeCommonEvent(0, 90005220, 22000202, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000210, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000211, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000214, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000215, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000220, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000221, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005220, 22000222, 30000, 20000, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000225, 30000, 20005, 22002225, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 22000240, 30000, 20005, 22002240, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005260, 22000241, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000243, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000244, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000245, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000248, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000249, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000250, 22002241, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005200, 22000252, 30000, 20005, 22002252, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005260, 22000255, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000256, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000257, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000258, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000259, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000260, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000261, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000262, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000263, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000264, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005260, 22000265, 22002255, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005250, 22000278, 22002278, 0, 0);
    InitializeCommonEvent(0, 90005260, 22000279, 22002278, 1086324736, 0, -1);
    InitializeCommonEvent(0, 90005200, 22000280, 30000, 20005, 22002280, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005260, 22000281, 22002278, 1087373312, 0, -1);
    InitializeCommonEvent(0, 90005250, 22000282, 22002278, 0, 0);
    InitializeCommonEvent(0, 90005250, 22000283, 22002278, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000350, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000351, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000352, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000353, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000354, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000360, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000361, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000362, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000363, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000364, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000365, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000370, 30005, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000371, 30005, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000372, 30005, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000373, 30005, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000374, 30005, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000380, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000381, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000382, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000383, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000384, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000390, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000391, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000392, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000393, 30004, -1, 0, 0);
    InitializeCommonEvent(0, 90005221, 22000394, 30004, -1, 0, 0);
    InitializeEvent(0, 22002300, 22000300, 22002300);
    InitializeEvent(1, 22002300, 22000302, 22002302);
    InitializeEvent(2, 22002300, 22000303, 22002302);
    InitializeEvent(3, 22002300, 22000304, 22002302);
    InitializeEvent(4, 22002300, 22000305, 22002302);
    InitializeEvent(5, 22002300, 22000306, 22002302);
    InitializeEvent(6, 22002300, 22000307, 22002302);
    InitializeEvent(7, 22002300, 22000320, 22002320);
    InitializeEvent(8, 22002300, 22000321, 22002320);
    InitializeEvent(9, 22002300, 22000322, 22002320);
    InitializeEvent(10, 22002300, 22000323, 22002320);
    InitializeEvent(11, 22002300, 22000324, 22002320);
    InitializeEvent(12, 22002300, 22000325, 22002320);
    InitializeEvent(13, 22002300, 22000326, 22002320);
    InitializeEvent(14, 22002300, 22000327, 22002320);
    InitializeEvent(15, 22002300, 22000328, 22002320);
});

$Event(22002225, Restart, function(X0_4, X4_4, X8_4) {
    if (CharacterDead(X4_4)) {
        EndEvent();
    }
    if (!EventFlag(X0_4)) {
        if (!ThisEventSlot()) {
            ForceAnimationPlayback(X4_4, 30000, true, false, false);
        }
        WaitFor(
            ((CharacterType(10000, TargetType.Alive)
                || CharacterType(10000, TargetType.BluePhantom)
                || CharacterType(10000, TargetType.WhitePhantom))
                && InArea(10000, X8_4)
                && !EventFlag(X0_4))
                || EventFlag(X0_4));
        SetNetworkconnectedEventFlagID(X0_4, ON);
        ForceAnimationPlayback(X4_4, 20000, true, false, false);
        EnableCharacterAI(X4_4);
        RestartEvent();
    }
L0:
    chrAreaFlag = (CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom))
        && !InArea(10000, X8_4)
        && EventFlag(X0_4);
    WaitFor(chrAreaFlag);
    if (chrAreaFlag) {
        SetNetworkconnectedEventFlagID(X0_4, OFF);
        ForceAnimationPlayback(X4_4, 20010, false, true, false);
        ForceAnimationPlayback(X4_4, 30000, true, false, false);
        DisableCharacterAI(X4_4);
    }
L10:
    WaitFixedTimeRealFrames(1);
    RestartEvent();
});

$Event(22002470, Restart, function() {
    EndIf(EventFlag(22000800));
    EndIf(!PlayerIsInOwnWorld());
    if (EventFlag(22009209)) {
        SetEventFlagID(22002488, OFF);
        SetEventFlagID(22002489, OFF);
        WaitFor(
            EventFlag(22000800)
                || (PlayerIsInOwnWorld()
                    && EventFlag(22009209)
                    && ActionButtonInArea(209522, 22001480)));
        EndIf(EventFlag(22000800));
        SetNetworkconnectedEventFlagID(22002488, ON);
L1:
        WaitFixedTimeFrames(1);
        WaitFixedTimeSeconds(1);
        SetNetworkconnectedEventFlagID(22002481, ON);
        EndEvent();
    }
L10:
    WaitFor(EventFlag(22009209));
    RestartEvent();
});

$Event(22002471, Restart, function(X0_4) {
    if (EventFlag(22000800)) {
        DisableCharacter(X0_4);
        DisableCharacterCollision(X0_4);
        SetCharacterMaphit(X0_4, false);
        DisableCharacterGravity(X0_4);
        DisableCharacterAI(X0_4);
        EndEvent();
    }
L10:
    GotoIf(S0, !PlayerIsInOwnWorld());
    GotoIf(L20, !EventFlag(22009209));
S0:
    if (PlayerIsInOwnWorld()) {
        SetNetworkUpdateAuthority(X0_4, AuthorityLevel.Forced);
    }
    if (PlayerIsInOwnWorld()) {
        EnableCharacter(X0_4);
    } else {
        DisableCharacter(X0_4);
    }
    SetSpEffect(X0_4, 20004380);
    DisableCharacterCollision(X0_4);
    DisableCharacterAI(X0_4);
    SetCharacterTeamType(X0_4, TeamType.Disabled);
    EnableCharacterImmortality(X0_4);
    EnableCharacterFadeOnEnable(X0_4);
    SetNetworkUpdateRate(X0_4, true, CharacterUpdateFrequency.AtLeastEvery2Frames);
    WaitFor(EventFlag(22009209) && EventFlag(22002481) && CharacterBackreadStatus(X0_4));
    if (EventFlag(22000800)) {
        DisableCharacter(X0_4);
        DisableCharacterCollision(X0_4);
        SetCharacterMaphit(X0_4, false);
        DisableCharacterGravity(X0_4);
        DisableCharacterAI(X0_4);
        EndEvent();
    }
    if (PlayerIsInOwnWorld()) {
        DisplayNetworkMessage(4080100, false);
    }
    SetNetworkUpdateRate(X0_4, true, CharacterUpdateFrequency.AtLeastEvery2Frames);
    DeleteAssetfollowingSFX(22001480, true);
    CreateAssetfollowingSFX(22001480, 100, 30320);
    ClearSpEffect(X0_4, 20004380);
    SetSpEffect(X0_4, 18677);
    EnableCharacterInvincibility(X0_4);
    WaitFixedTimeSeconds(1);
    ClearSpEffect(X0_4, 18677);
    ForceAnimationPlayback(X0_4, 63010, false, true, false);
    EnableCharacter(X0_4);
    EnableCharacterCollision(X0_4);
    SetCharacterMaphit(X0_4, true);
    EnableCharacterGravity(X0_4);
    DisableCharacterInvincibility(X0_4);
    EnableCharacterAI(X0_4);
    RequestCharacterAIReplan(X0_4);
    ClearCharactersAITarget(X0_4);
    EnableCharacterHPBarDisplay(X0_4);
    SetCharacterTeamType(X0_4, TeamType.WhitePhantom);
    SetCharacterEventTarget(X0_4, 22000800);
    if (PlayerIsInOwnWorld()) {
        DisplayNetworkMessage(4080810, false);
        GotoIf(S1, PlayerIsInOwnWorld());
    }
    DisplayNetworkMessage(4080811, false);
S1:
    DeleteAssetfollowingSFX(22001480, true);
    EndEvent();
L20:
    DisableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterAI(X0_4);
    WaitFor(EventFlag(22009209));
    RestartEvent();
});

$Event(22002472, Restart, function() {
    GotoIf(L2, EventFlag(22000800));
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(EventFlag(22009209));
    DeleteAssetfollowingSFX(22001480, true);
    CreateAssetfollowingSFX(22001480, 100, 30001);
    WaitFor(EventFlag(22002481) || EventFlag(22000800));
    DeleteAssetfollowingSFX(22001480, true);
    EndEvent();
});

$Event(22002473, Restart, function(X0_4) {
    EndIf(EventFlag(22000800));
    EndIf(!PlayerIsInOwnWorld());
    if (!EventFlag(22002481)) {
        WaitFor(
            PlayerIsInOwnWorld()
                && EventFlag(22009209)
                && EntityInRadiusOfEntity(10000, 22001480, 1.5, 1));
        GotoIf(L2, EventFlag(22000800));
        GotoIf(L1, EventFlag(22002481));
        EnableCharacter(X0_4);
        EnableCharacterInvincibility(X0_4);
        DisableCharacterAI(X0_4);
        SetSpEffect(X0_4, 20004380);
        WaitFixedTimeFrames(1);
        DisableCharacterCollision(X0_4);
        WaitFixedTimeFrames(1);
        WaitFor(
            (PlayerIsInOwnWorld() && !EntityInRadiusOfEntity(10000, 22001480, 1.5, 1))
                || !EventFlag(22009209));
        GotoIf(L2, EventFlag(22000800));
        GotoIf(L1, EventFlag(22002481));
        WaitFixedTimeSeconds(1);
        RestartEvent();
L2:
        DisableCharacter(X0_4);
    }
L1:
    EndEvent();
});

$Event(22002474, Restart, function(X0_4) {
    EndIf(EventFlag(22000800));
    onlineFlagHpChr = PlayerIsInOwnWorld()
        && EventFlag(22009209)
        && HPRatio(X0_4) > 0
        && EventFlag(22002481)
        && CharacterBackreadStatus(X0_4)
        && EventFlag(22000800);
    onlineChrHpFlag = PlayerIsInOwnWorld()
        && CharacterBackreadStatus(X0_4)
        && HPRatio(X0_4) <= 0
        && EventFlag(22002481);
    flag = !EventFlag(22002481) && EventFlag(22000800);
    WaitFor(onlineFlagHpChr || onlineChrHpFlag || flag);
    EndIf(flag.Passed);
    if (HPRatio(X0_4) <= 0) {
        DisplayNetworkMessage(4080812, false);
        EndEvent();
    }
    WaitFixedTimeSeconds(4);
    SetCharacterTeamType(X0_4, TeamType.Disabled);
    DisableCharacterCollision(X0_4);
    EnableCharacterInvincibility(X0_4);
    SetSpEffect(X0_4, 18677);
    RequestCharacterAIReplan(X0_4);
    ClearCharactersAITarget(X0_4);
    WaitFixedTimeSeconds(3);
    DisableCharacterAI(X0_4);
    DisableCharacterInvincibility(X0_4);
    RequestCharacterAnimationReset(X0_4, Enabled);
    SetNetworkUpdateRate(X0_4, false, CharacterUpdateFrequency.AtLeastEvery2Frames);
    if (HPRatio(X0_4) <= 0) {
        DisplayNetworkMessage(4080812, false);
        EndEvent();
    }
});

$Event(22002496, Restart, function(X0_4) {
    DisableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterGravity(X0_4);
    DisableCharacterAI(X0_4);
    EnableCharacterFadeOnEnable(X0_4);
    EnableCharacterImmortality(X0_4);
    if (PlayerIsInOwnWorld()) {
        SetNetworkUpdateAuthority(X0_4, AuthorityLevel.Forced);
    }
    DisableAsset(22001496);
    EndIf(EventFlag(22000496));
    SetSpEffect(X0_4, 18677);
    EnableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterGravity(X0_4);
    DisableCharacterAI(X0_4);
    SetCharacterTeamType(X0_4, TeamType.Disabled);
    EnableCharacterImmortality(X0_4);
    WaitFor(
        EventFlag(22009208)
            && InArea(10000, 22002496)
            && !InArea(10000, 22002497)
            && CharacterBackreadStatus(X0_4));
    SetEventFlagID(22002708, ON);
    EnableAsset(22001496);
    SetNetworkUpdateRate(X0_4, true, CharacterUpdateFrequency.AtLeastEvery2Frames);
    SetSpEffect(X0_4, 110);
    SetSpEffect(X0_4, 111);
    CreateAssetfollowingSFX(22001497, 100, 30330);
    ClearSpEffect(X0_4, 4380);
    ClearSpEffect(X0_4, 18677);
    EnableCharacter(X0_4);
    EnableCharacterInvincibility(X0_4);
    IssueShortWarpRequest(X0_4, TargetEntityType.Area, 22002180, -1);
    ForceAnimationPlayback(X0_4, 63010, false, true, false);
    EnableCharacterCollision(X0_4);
    SetCharacterMaphit(X0_4, true);
    EnableCharacterGravity(X0_4);
    DisableCharacterInvincibility(X0_4);
    EnableCharacterAI(X0_4);
    RequestCharacterAIReplan(X0_4);
    ClearCharactersAITarget(X0_4);
    EnableCharacterHPBarDisplay(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    SetCharacterEventTarget(X0_4, 10000);
    DisplayNetworkMessage(4080820, false);
    DeleteAssetfollowingSFX(22001497, true);
    EndEvent();
});

$Event(22002497, Restart, function(X0_4) {
    EndIf(EventFlag(22000496));
    WaitFor(PlayerIsInOwnWorld() && CharacterBackreadStatus(X0_4) && HPRatio(X0_4) <= 0);
    SetCharacterEventTarget(X0_4, 0);
    WaitFixedTimeSeconds(5);
    SetEventFlagID(22000496, ON);
    DisplayNetworkMessage(4080822, false);
    HandleBossDefeatAndDisplayBanner(X0_4, TextBannerType.DuelistVanquished);
    SetSpEffect(20000, 20004826);
    DisableAsset(22001496);
    EndEvent();
});

$Event(22002500, Restart, function() {
    if (EventFlag(22000500)) {
        DisableAsset(22001500);
        EndEvent();
    }
L0:
    WaitFor(
        ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
            || CharacterType(10000, TargetType.Alive)
            || CharacterType(10000, TargetType.BluePhantom)
            || CharacterType(10000, TargetType.WhitePhantom))
            && InArea(10000, 22002500));
    WaitFixedTimeSeconds(0.2);
    RequestAssetDestruction(22001500, 1);
    SetEventFlagID(22000500, ON);
});

$Event(22002501, Restart, function() {
    DisableNetworkSync();
    WaitFor(InArea(10000, 22002603));
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
    WaitFixedTimeRealFrames(2);
    SetSpEffect(10000, 19935);
});

$Event(22002300, Restart, function(X0_4, X4_4) {
    DisableNetworkSync();
    WaitFor(InArea(X0_4, X4_4));
    SetSpEffect(X0_4, 4080);
    SetSpEffect(X0_4, 4085);
    WaitFor(!InArea(X0_4, X4_4));
    ClearSpEffect(X0_4, 4080);
    ClearSpEffect(X0_4, 4085);
    RestartEvent();
});

//putrescent
$Event(22000800, Restart, function() {
    EndIf(EventFlag(22000800));
    WaitFor(CharacterHPValue(22000800) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(22008000, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(22000800));
    ForceCharacterDeath(22000801, false);
    DisableCharacter(22000801);
    DisableCharacterCollision(22000801);
    HandleBossDefeatAndDisplayBanner(22000800, TextBannerType.LegendFelled);
    WaitFixedTimeSeconds(6);
    //boss rush
    if (AnyBatchEventFlags(1049308250, 1049308275)) {
        SetEventFlagID(1049302520, ON);
        InitializeCommonEvent(0, 90009920, 0);
    }
    //roundtable warp
    else
        WarpPlayer(11, 10, 0, 0, 11102021, 0);
});

$Event(22002810, Restart, function() {
    if (EventFlag(22000800)) {
        DisableCharacter(22000800);
        DisableCharacterCollision(22000800);
        ForceCharacterDeath(22000800, false);
        DisableCharacter(22000801);
        DisableCharacterCollision(22000801);
        ForceCharacterDeath(22000801, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(22000800);
    DisableAsset(22001801);
    ForceAnimationPlayback(22000800, 30010, true, false, false);
    DisableLockOnPoint(22000800, 221);
    DisableLockOnPoint(22000801, 220);
    CreateReferredDamagePair(22000801, 22000800);
    if (!EventFlag(22000802)) {
        WaitFor(
            EventFlag(22002805)
                && (InArea(10000, 22002804)
                    || HasDamageType(22000800, 10000, DamageType.Unspecified)
                    || CharacterHasStateInfo(22000800, 436)
                    || CharacterHasStateInfo(22000800, 2)
                    || CharacterHasStateInfo(22000800, 5)
                    || CharacterHasStateInfo(22000800, 6)
                    || CharacterHasStateInfo(22000800, 260)));
        SetNetworkconnectedEventFlagID(22000802, ON);
        WaitFixedTimeSeconds(1.5);
        ForceAnimationPlayback(22000800, 20010, false, false, false);
        WaitFixedTimeSeconds(2.6);
        SetSpEffect(22000800, 20010097);
    } else {
L1:
        WaitFor(EventFlag(22002805) && InArea(10000, 22002802));
        WaitFixedTimeSeconds(1);
        ForceAnimationPlayback(22000800, 20010, false, false, false);
        WaitFixedTimeSeconds(2.6);
        SetSpEffect(22000800, 20010098);
    }
L2:
    EnableCharacterAI(22000800);
    WaitFixedTimeSeconds(3);
    DisplayBossHealthBar(Enabled, 22000800, 0, 905020000);
    SetNetworkconnectedEventFlagID(22002801, ON);
    EnableAsset(22001801);
});

$Event(22002811, Restart, function() {
    EndIf(EventFlag(22000800));
    WaitFor(HPRatio(22000800) <= 0.65 && CharacterHasSpEffect(22000800, 20010050));
    SetEventFlagID(22002802, ON);
});

$Event(22002815, Restart, function() {
    DisableNetworkSync();
    if (!EventFlag(22000802)) {
        WaitFor(InArea(10000, 22002815));
        SetBossBGM(502000, BossBGMState.Stop1);
        WaitFor(EventFlag(22000802));
        SetEventFlagID(22002815, ON);
        EndEvent();
    }
L1:
    WaitFor(InArea(10000, 22002815));
    SetEventFlagID(22002815, ON);
});

$Event(22002816, Restart, function() {
    EndIf(EventFlag(22000800));
    WaitFor(EventFlag(22002805) && InArea(10000, 22002802));
    EnableCharacterDefaultBackread(22000800);
    SetNetworkUpdateRate(22000800, true, CharacterUpdateFrequency.AlwaysUpdate);
});

$Event(22002820, Default, function() {
    EndIf(EventFlag(22000802));
    SetSpEffect(22000100, 9531);
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 22000802);
    SetSpEffect(22000100, 9532);
});

$Event(22002830, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4) {
    DisableNetworkSync();
    EndIf(EventFlag(X0_4));
    WaitFor(
        !EventFlag(X0_4)
            && EventFlag(X12_4)
            && CharacterType(10000, TargetType.WhitePhantom)
            && ActionButtonInArea(X20_4, X4_4));
    RotateCharacter(10000, X8_4, 60060, true);
    time = ElapsedSeconds(3);
    WaitFor(CharacterType(10000, TargetType.WhitePhantom) && (InArea(10000, X8_4) || time));
    RestartIf(time.Passed);
    SetEventFlagID(X16_4, ON);
    RestartEvent();
});

$Event(22002849, Restart, function() {
    InitializeCommonEvent(0, 9005800, 22000800, 22001800, 22002800, 22002805, 22005800, 10000, 22000801, 22002801);
    InitializeCommonEvent(0, 9005811, 22000800, 22001800, 1580, 22000801);
    InitializeCommonEvent(0, 9005811, 22000800, 22001801, 5, 22002801);
    InitializeCommonEvent(0, 9005822, 22000800, 502000, 22002805, 22002806, 22002815, 22002802, 0, 0);
});

$Event(22000700, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4, X44_4, X48_4, X52_4, X56_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
    }
L10:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!EventFlag(X56_4)) {
        if (EventFlag(X44_4)) {
            if (!EventFlag(X52_4)) {
                WaitFor(!CharacterHasSpEffect(10000, 9607) && !CharacterHasSpEffect(10000, 9608));
                SetEventFlagID(X48_4, ON);
            }
        }
        if (!(EventFlag(X12_4) && !EventFlag(X24_4))) {
            WaitFor(EventFlag(X12_4) && !EventFlag(X24_4));
            RestartEvent();
        }
L0:
        GotoIf(L1, EventFlag(X4_4));
        GotoIf(L4, EventFlag(X8_4));
L1:
        EnableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, false);
        SetCharacterTeamType(X0_4, TeamType.Disabled);
        EnableCharacterInvincibility(X0_4);
        WaitFixedTimeRealFrames(1);
        WaitFor(CharacterBackreadStatus(X0_4));
        IssueShortWarpRequest(X0_4, TargetEntityType.Area, 22002701, -1);
        WaitFixedTimeRealFrames(1);
        SetCharacterTalkRange(X0_4, X16_4);
        if (Signed(-1) != X20_4) {
            ForceAnimationPlayback(X0_4, X20_4, false, false, false);
        }
        if (EventFlag(X28_4)) {
            if (!EventFlag(X32_4)) {
                SetEventFlagID(X32_4, ON);
            } else if (!EventFlag(X36_4)) {
                SetEventFlagID(X36_4, ON);
            } else {
                SetEventFlagID(X40_4, ON);
                Goto(L20);
L4:
                DisableCharacter(X0_4);
                SetCharacterBackreadState(X0_4, true);
                ForceCharacterTreasure(X0_4);
                Goto(L20);
            }
        }
    }
L20:
    WaitFor(!(EventFlag(X12_4) && !EventFlag(X24_4)));
    RestartEvent();
});

$Event(22000701, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4, X44_4, X48_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
    }
L10:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!(EventFlag(X12_4) && EventFlag(X48_4))) {
        if (!((EventFlag(X12_4) || EventFlag(X40_4)) && !EventFlag(X32_4))) {
            WaitFor((EventFlag(X12_4) || EventFlag(X40_4)) && !EventFlag(X32_4));
            RestartEvent();
        }
L0:
        GotoIf(L1, EventFlag(X4_4));
        GotoIf(L4, EventFlag(X8_4));
L1:
        EnableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, false);
        SetCharacterTeamType(X0_4, TeamType.Disabled);
        EnableCharacterInvincibility(X0_4);
        WaitFixedTimeRealFrames(1);
        WaitFor(CharacterBackreadStatus(X0_4));
        IssueShortWarpRequest(X0_4, TargetEntityType.Area, 22002701, -1);
        WaitFixedTimeRealFrames(1);
        if (EventFlag(X40_4)) {
            ForceAnimationPlayback(X0_4, X44_4, true, false, false);
        } else {
            SetCharacterTalkRange(X0_4, X16_4);
            SetEventFlagID(X36_4, OFF);
            if (EventFlag(X24_4)) {
                ForceAnimationPlayback(X0_4, X28_4, true, false, false);
                SetEventFlagID(X36_4, ON);
            } else {
                if (Signed(-1) != X20_4) {
                    ForceAnimationPlayback(X0_4, X20_4, true, false, false);
                }
                Goto(L20);
L4:
                DisableCharacter(X0_4);
                SetCharacterBackreadState(X0_4, true);
                ForceCharacterTreasure(X0_4);
                Goto(L20);
            }
        }
    }
L20:
    WaitFor(!((EventFlag(X12_4) || EventFlag(X40_4)) && !EventFlag(X32_4)));
    RestartEvent();
});

$Event(22000702, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4, X44_4) {
    EndIf(!PlayerIsInOwnWorld());
    WaitFixedTimeFrames(1);
    EndIf(!EventFlag(X0_4));
    GotoIf(L10, EventFlag(X40_4));
    GotoIf(L1, !EventFlag(X8_4));
    GotoIf(L2, !EventFlag(X28_4));
    Goto(L20);
L1:
    EndIf(!EventFlag(X44_4));
    SetEventFlagID(X12_4, ON);
    WaitFor(EventFlag(X8_4));
    if (EventFlag(X16_4)) {
        SetEventFlagID(X20_4, ON);
    }
    EndEvent();
L2:
    WaitFor(EventFlag(X28_4));
    SetEventFlagID(X24_4, OFF);
    SetEventFlagID(X32_4, ON);
    SetEventFlagID(X36_4, ON);
    RestartEvent();
L10:
    SetEventFlagID(X12_4, OFF);
    SetEventFlagID(X24_4, OFF);
    EndEvent();
L20:
    SetEventFlagID(X12_4, OFF);
    SetEventFlagID(X24_4, OFF);
    WaitFor(EventFlag(X4_4));
    RestartEvent();
});

$Event(22000703, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    EndIf(EventFlag(X16_4));
    WaitFor(EventFlag(X4_4));
    WaitFor(EventFlag(X12_4) || !EntityInRadiusOfEntity(X0_4, 10000, X8_4, 1));
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(X12_4, ON);
        SetEventFlagID(X16_4, ON);
        SetEventFlagID(X24_4, ON);
    }
    ForceAnimationPlayback(X0_4, X20_4, false, false, false);
    EndEvent();
});

$Event(22000705, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(2);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!(EventFlag(X8_4) || EventFlag(X4_4))) {
        WaitFor(EventFlag(X8_4) || EventFlag(X4_4));
        RestartEvent();
    }
L0:
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    if (EventFlag(X20_4)) {
        ForceAnimationPlayback(X0_4, X16_4, false, false, false);
    } else {
        ForceAnimationPlayback(X0_4, X12_4, false, false, false);
    }
    SetCharacterTeamType(X0_4, TeamType.Disabled);
    Goto(L20);
L20:
    WaitFor(!(EventFlag(X8_4) || EventFlag(X4_4)));
    RestartEvent();
});

$Event(22000707, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4, X44_4, X48_4, X52_4, X56_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(X0_4));
    WaitFor(CharacterHasSpEffect(20000, X4_4));
    if (!EventFlag(X8_4)) {
        SetEventFlagID(X8_4, ON);
        EndEvent();
    }
    if (!EventFlag(X12_4)) {
        SetEventFlagID(X12_4, ON);
        EndEvent();
    }
    if (!EventFlag(X16_4)) {
        SetEventFlagID(X16_4, ON);
        EndEvent();
    }
    SetEventFlagID(X52_4, ON);
    if (!EventFlag(X20_4)) {
        SetEventFlagID(X20_4, ON);
        SetEventFlagID(X32_4, ON);
        EndEvent();
    }
    if (!EventFlag(X24_4)) {
        SetEventFlagID(X24_4, ON);
        SetEventFlagID(X36_4, ON);
        EndEvent();
    }
    SetEventFlagID(X40_4, ON);
    SetEventFlagID(X28_4, ON);
    EndEvent();
    SetEventFlagID(X44_4, OFF);
    SetEventFlagID(X48_4, OFF);
    SetEventFlagID(X56_4, OFF);
});

$Event(22000708, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_2, X28_4, X32_4, X36_4, X40_4, X44_4, X48_4, X52_4, X56_4, X60_4, X64_4) {
    EndIf(!PlayerIsInOwnWorld());
    SetEventFlagID(X60_4, OFF);
    WaitFor(EventFlag(X0_4));
    if (Signed(X16_4) != 0) {
        GotoIf(L0, X20_4 == 0);
        WarpAssetToCharacter(X20_4, X12_4, X24_2);
        WaitFixedTimeRealFrames(1);
        area &= EntityInRadiusOfEntity(10000, X20_4, X28_4, 1);
        GotoIf(S0, !area);
        SetEventFlagID(X4_4, ON);
        SetEventFlagID(X60_4, ON);
        Goto(L15);
S0:
        GotoIf(S1, 
            !(EntityInRadiusOfEntity(10000, X20_4, X44_4, 1)
                && EntityInRadiusOfEntity(10000, X12_4, X44_4, 1)));
        SetEventFlagID(X4_4, ON);
        SetEventFlagID(X60_4, ON);
        Goto(L15);
S1:
        RotateCharacter(10000, X20_4, -1, true);
        RotateCharacter(10000, X20_4, 90006, false);
        Goto(L8);
    }
L0:
    RotateCharacter(10000, X12_4, -1, true);
    area &= EntityInRadiusOfEntity(10000, X12_4, X28_4, 1);
    GotoIf(L9, area);
    RotateCharacter(10000, X12_4, 90006, false);
    Goto(L8);
L8:
    SetEventFlagID(X52_4, ON);
    WaitFixedTimeRealFrames(1);
    SetEventFlagID(X52_4, OFF);
    sp = !CharacterHasSpEffect(10000, 9900);
    flagTime = !EventFlag(X0_4) || ElapsedSeconds(X48_4);
    spFlagTimeArea |= sp || flagTime;
    if (Signed(X16_4) != 0) {
        GotoIf(S2, X20_4 == 0);
        spFlagTimeArea |= EntityInRadiusOfEntity(10000, X20_4, X28_4, 1);
    } else {
S2:
        spFlagTimeArea |= EntityInRadiusOfEntity(10000, X12_4, X28_4, 1);
    }
    WaitFor(spFlagTimeArea);
    if (!sp.Passed) {
        if (!flagTime.Passed) {
L9:
            SetEventFlagID(X4_4, ON);
            if (Signed(X16_4) != 0) {
                RequestCharacterAnimationReset(10000, Disabled);
                GotoIf(S3, EventFlag(X60_4));
                RotateCharacter(10000, X12_4, -1, true);
                RotateCharacter(10000, X12_4, X32_4, false);
                Goto(S4);
            }
S3:
            Goto(L15);
S4:
            SetEventFlagID(X56_4, ON);
            WaitFixedTimeSeconds(X64_4);
L15:
            if (X8_4 != 0) {
                SetEventFlagID(X8_4, ON);
            }
            if (Signed(X16_4) != 0) {
                IssueShortWarpRequest(10000, TargetEntityType.Character, X12_4, X16_4);
            }
            if (Signed(X40_4) != -1) {
                RotateCharacter(10000, X12_4, X32_4, false);
            } else {
                RotateCharacter(10000, X12_4, X32_4, true);
            }
            Goto(L8);
L8:
            WaitFixedTimeRealFrames(1);
            sp2 = !CharacterHasSpEffect(10000, 9900);
            WaitFor(!EventFlag(X0_4) || sp2);
            if (!sp2.Passed) {
                if (Signed(X36_4) != -1) {
                    if (Signed(X40_4) != -1) {
                        sp3 = !CharacterHasSpEffect(10000, 9900);
                        WaitFor(CharacterHasSpEffect(10000, X40_4) || sp3);
                        GotoIf(L20, sp3.Passed);
                    }
L10:
                    SetEventFlagID(X4_4, OFF);
                    ForceAnimationPlayback(10000, X36_4, false, true, false);
                    RestartEvent();
                }
L18:
                SetEventFlagID(X4_4, OFF);
                RestartEvent();
            }
        }
L19:
        SetEventFlagID(X0_4, OFF);
        ForceAnimationPlayback(10000, 0, false, false, false);
        RestartEvent();
    }
L20:
    SetEventFlagID(X0_4, OFF);
    SetEventFlagID(X4_4, OFF);
    RestartEvent();
});

$Event(22000709, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(!PlayerIsInOwnWorld());
    WaitFixedTimeFrames(1);
    WaitFor(EventFlag(X0_4));
    SetEventFlagID(X4_4, ON);
    WaitFixedTimeSeconds(X8_4);
L0:
    SetEventFlagID(X0_4, OFF);
    SetEventFlagID(X4_4, OFF);
    RestartEvent();
});

$Event(22000715, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(X0_4));
    WaitFor(CharacterHasSpEffect(20000, X4_4));
    SetEventFlagID(X8_4, ON);
    WaitFor(CharacterHPValue(20000) == 0);
    SetEventFlagID(X8_4, OFF);
    EndEvent();
});

$Event(22000716, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(X0_4));
    SetSpEffect(20000, X4_4);
    SetEventFlagID(X0_4, OFF);
    EndEvent();
});

$Event(22000717, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(X4_4));
    WaitFor(InArea(20000, X12_4) && EventFlag(X0_4));
    SetEventFlagID(X4_4, ON);
    SetEventFlagID(X8_4, ON);
    EndEvent();
});
