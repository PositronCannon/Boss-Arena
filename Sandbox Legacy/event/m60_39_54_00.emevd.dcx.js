// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    InitializeCommonEvent(0, 90001001, 0);
    RegisterBonfire(1039540000, 1039541950, 0, 0, 0, 5);
    RegisterBonfire(1039540001, 1039541951, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 1039540800, 1039540002, 1039540952, 1039541952, 1084227584);
    InitializeCommonEvent(0, 90005632, 580020, 1039541400, 80020);
    InitializeCommonEvent(0, 900005610, 1039541200, 100, 800, 0);
    InitializeCommonEvent(0, 900005610, 1039541201, 100, 800, 0);
    InitializeCommonEvent(0, 900005610, 1039541202, 100, 800, 0);
    InitializeCommonEvent(0, 90005261, 1039540213, 1039542213, 1065353216, 0, 3002);
    InitializeCommonEvent(0, 90005200, 1039540257, 30001, 20001, 1039542657, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540558, 1039542610, 0, 0);
    InitializeCommonEvent(0, 90005261, 1039540214, 1039542559, 0, 0, 3037);
    InitializeCommonEvent(0, 90005200, 1039540615, 30001, 20001, 1039542615, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540616, 30001, 20001, 1039542615, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540609, 30001, 20001, 1039542615, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540613, 30001, 20001, 1039542615, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540614, 30001, 20001, 1039542615, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540619, 30001, 20001, 1039542615, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540633, 30001, 20001, 1039542615, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540630, 30000, 20000, 1039542272, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540631, 30000, 20000, 1039542272, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540632, 30000, 20000, 1039542272, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540272, 30000, 20000, 1039542616, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540273, 30000, 20000, 1039542616, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540212, 30000, 20000, 1039542616, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540667, 1039542667, 0, 3001);
    InitializeCommonEvent(0, 90005250, 1039540668, 1039542668, 1056964608, 0);
    InitializeCommonEvent(0, 90005250, 1039540669, 1039542668, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540670, 30001, 20001, 1039542670, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540672, 30001, 20001, 1039542672, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540671, 1039542671, 0, 3001);
    InitializeCommonEvent(0, 90005250, 1039540551, 1039542551, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540552, 1039542552, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540206, 1039542206, 0, 3035);
    InitializeCommonEvent(0, 90005250, 1039540203, 1039542203, 0, 3036);
    InitializeCommonEvent(0, 90005250, 1039540553, 1039542553, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540209, 1039542209, 0, 3016);
    InitializeCommonEvent(0, 90005211, 1039540211, 30001, 20001, 1039542226, 1073741824, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1039540224, 30002, 20002, 1039542226, 1073741824, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1039540226, 30001, 20001, 1039542226, 1073741824, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540303, 30000, 20000, 1039542303, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540504, 1039542504, 1073741824, 0);
    InitializeCommonEvent(0, 90005261, 1039540221, 1039542618, 1065353216, 0, 3002);
    InitializeCommonEvent(0, 90005261, 1039540222, 1039542617, 1065353216, 1053609165, 3002);
    InitializeCommonEvent(0, 90005261, 1039540230, 1039542619, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540231, 1039542619, 1065353216, 1061997773, -1);
    InitializeCommonEvent(0, 90005261, 1039540232, 1039542619, 1065353216, 1061997773, -1);
    InitializeCommonEvent(0, 90005200, 1039540310, 30001, 20001, 1039542310, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1039540250, 1039542250, 1065353216, 0, 3036);
    InitializeCommonEvent(0, 90005261, 1039540227, 1039542227, 1065353216, 0, 3038);
    InitializeCommonEvent(0, 90005261, 1039540351, 1039542679, 1065353216, 0, 3002);
    InitializeCommonEvent(0, 90005211, 1039540218, 30005, 20005, 1039542350, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1039540219, 30005, 20005, 1039542350, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1039540220, 30005, 20005, 1039542350, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 1039540350, 30006, 20006, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1039540207, 30002, 20002, 1039542207, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540296, 1039542296, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540365, 30000, 20000, 1039542207, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540366, 30000, 20000, 1039542207, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540367, 30000, 20000, 1039542207, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540368, 30000, 20000, 1039542207, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540301, 30000, 20000, 1039542298, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540555, 1039542555, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540331, 30002, 20002, 1039542330, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540330, 30002, 20002, 1039542330, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540337, 1039542330, 0, 3005);
    InitializeCommonEvent(0, 90005250, 1039540341, 1039542341, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540340, 1039542340, 0, 3001);
    InitializeCommonEvent(0, 90005250, 1039540320, 1039542320, 0, 3009);
    InitializeCommonEvent(0, 90005250, 1039540342, 1039542342, 1065353216, 3000);
    InitializeEvent(0, 1039542200, 1039540361, 1039542311, 0, 3005);
    InitializeCommonEvent(0, 90005250, 1039540311, 1039542311, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540338, 1039542338, 0, 3000);
    InitializeCommonEvent(0, 90005250, 1039540343, 1039542343, 0, 3006);
    InitializeCommonEvent(0, 90005250, 1039540321, 1039542322, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540312, 1039542312, 0, 0);
    InitializeCommonEvent(0, 90005261, 1039540370, 1039542636, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540371, 1039542636, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540372, 1039542636, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540400, 1039542654, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540401, 1039542654, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540402, 1039542654, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540403, 1039542654, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540404, 1039542860, 1065353216, 1092616192, -1);
    InitializeCommonEvent(0, 90005261, 1039540680, 1039542860, 1065353216, 1073741824, -1);
    InitializeCommonEvent(0, 90005261, 1039540681, 1039542860, 1065353216, 1082130432, -1);
    InitializeCommonEvent(0, 90005261, 1039540682, 1039542860, 1065353216, 0, -1);
    SetSpEffect(1039540680, 4801);
    SetSpEffect(1039540681, 4801);
    InitializeCommonEvent(0, 90005261, 1039540420, 1039542639, 1065353216, 1050253722, 3002);
    InitializeCommonEvent(0, 90005261, 1039540430, 1039542615, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540431, 1039542615, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540440, 1039542641, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540441, 1039542641, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540442, 1039542641, 1065353216, 0, 3002);
    InitializeCommonEvent(0, 90005261, 1039540443, 1039542641, 1065353216, 1058642330, 3017);
    InitializeCommonEvent(0, 90005261, 1039540444, 1039542641, 1065353216, 0, 3017);
    InitializeCommonEvent(0, 90005261, 1039540445, 1039542641, 1065353216, 1082130432, 3017);
    InitializeCommonEvent(0, 90005261, 1039540446, 1039542641, 1065353216, 1045220557, 3017);
    InitializeCommonEvent(0, 90005261, 1039540447, 1039542641, 1065353216, 1058642330, 3002);
    InitializeCommonEvent(0, 90005261, 1039540448, 1039542641, 1065353216, 1053609165, 3016);
    InitializeCommonEvent(0, 90005261, 1039540449, 1039542641, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540440, 1039542642, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540441, 1039542642, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540442, 1039542642, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540443, 1039542642, 1065353216, 1053609165, -1);
    InitializeCommonEvent(0, 90005261, 1039540444, 1039542642, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540445, 1039542642, 1065353216, 1067030938, -1);
    InitializeCommonEvent(0, 90005261, 1039540446, 1039542642, 1065353216, 1053609165, -1);
    InitializeCommonEvent(0, 90005261, 1039540447, 1039542642, 1065353216, 1058642330, -1);
    InitializeCommonEvent(0, 90005261, 1039540448, 1039542642, 1065353216, 1053609165, -1);
    InitializeCommonEvent(0, 90005261, 1039540449, 1039542642, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039540470, 1039542658, 1065353216, 1077936128, -1);
    InitializeCommonEvent(0, 90005261, 1039540471, 1039542680, 1065353216, 0, 3002);
    InitializeCommonEvent(0, 90005261, 1039540690, 1039542658, 1065353216, 0, 5012);
    SetSpEffect(1039540453, 8081);
    InitializeCommonEvent(0, 90005261, 1039540650, 1039542706, 1065353216, 1084227584, 3009);
    InitializeCommonEvent(0, 90005261, 1039540651, 1039542706, 1065353216, 1065353216, 3009);
    InitializeCommonEvent(0, 90005261, 1039540690, 1039542706, 1065353216, 0, 5012);
    SetSpEffect(1039540515, 4801);
    SetSpEffect(1039540650, 5000);
    SetSpEffect(1039540650, 4801);
    SetSpEffect(1039540650, 8081);
    SetSpEffect(1039540655, 4801);
    SetSpEffect(1039540655, 5000);
    SetSpEffect(1039540655, 8081);
    SetSpEffect(1039540655, 8087);
    SetSpEffect(1039540690, 4801);
    InitializeCommonEvent(0, 90005261, 1039540655, 1039542655, 1065353216, 0, 20);
    InitializeCommonEvent(0, 90005261, 1039540656, 1039542655, 1065353216, 0, 3008);
    SetSpEffect(1039540655, 4801);
    SetSpEffect(1039540656, 4801);
    InitializeCommonEvent(0, 90005261, 1039540555, 1039542704, 1084227584, 0, 0);
    InitializeCommonEvent(0, 90005261, 1039540556, 1039542704, 1101004800, 0, -1);
    InitializeCommonEvent(0, 90005501, 1039540510, 1039540511, 5, 1039541510, 1039541511, 1039541512, 1039540512);
    InitializeEvent(0, 1039542510, 0);
    InitializeEvent(0, 1039542800, 0);
    InitializeEvent(0, 1039542810, 0);
    InitializeEvent(0, 1039542849, 0);
    InitializeEvent(0, 1039542811, 0);
    InitializeCommonEvent(0, 90005261, 1039544680, 1039546680, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039544681, 1039546680, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039544650, 1039546680, 1065353216, 0, -1);
    SetSpEffect(1039544680, 8087);
    SetSpEffect(1039544681, 8087);
    SetSpEffect(1039544680, 5000);
    SetSpEffect(1039544681, 5000);
    SetSpEffect(1039544600, 8033);
    SetSpEffect(1039544601, 8033);
    SetSpEffect(1039544602, 8033);
    SetSpEffect(1039544603, 8033);
    SetSpEffect(1039544604, 8033);
    SetSpEffect(1039544605, 8033);
    SetSpEffect(1039544606, 8033);
    SetSpEffect(1039544600, 8035);
    SetSpEffect(1039544601, 8035);
    SetSpEffect(1039544602, 8035);
    SetSpEffect(1039544603, 8035);
    SetSpEffect(1039544604, 8035);
    SetSpEffect(1039544605, 8035);
    SetSpEffect(1039544606, 8035);
    InitializeCommonEvent(0, 90005261, 1039544252, 1039546250, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039544253, 1039546250, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039544254, 1039546250, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 1039544550, 1039546550, 1065353216, 0, 3010);
    InitializeCommonEvent(0, 90005261, 1039544551, 1039546550, 1065353216, 0, 3010);
    InitializeCommonEvent(0, 90005261, 1039544552, 1039546550, 1065353216, 0, 3010);
    InitializeCommonEvent(0, 90005261, 1039544553, 1039546550, 1065353216, 0, 3010);
    InitializeCommonEvent(0, 90005261, 1039544695, 1039546695, 1065353216, 0, 3008);
    InitializeCommonEvent(0, 90005250, 1039540380, 1039542380, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540383, 30000, 20000, 1039542393, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 1039540393, 30000, 20000, 1039542393, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540627, 1039542627, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540628, 1039542627, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540629, 1039542627, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540607, 1039542607, 1077936128, 0);
    InitializeCommonEvent(0, 90005250, 1039540623, 1039542607, 0, 0);
    InitializeCommonEvent(0, 90005250, 1039540624, 1039542607, 1090519040, 0);
    InitializeEvent(0, 1039542283, 1039540283);
    InitializeEvent(0, 1039542520, 1039542650, 1039541260);
    InitializeEvent(1, 1039542520, 1039542651, 1039541261);
    InitializeEvent(2, 1039542520, 1039545650, 1039546260);
    InitializeEvent(3, 1039542520, 1039545651, 1039546261);
    InitializeEvent(0, 1039542580, 0);
    InitializeCommonEvent(0, 90005520, 1039540592, 1039541592, 1039540593, 1039540863);
    InitializeCommonEvent(0, 90005520, 1039540594, 1039541594, 1039540595, 1039540865);
    InitializeEvent(0, 1039542498, 0);
    InitializeEvent(0, 1039542499, 0);
    InitializeEvent(0, 1039542283, 1039540236);
    InitializeEvent(1, 1039542283, 1039540238);
    InitializeEvent(2, 1039542283, 1039540241);
    InitializeEvent(3, 1039542283, 1039540242);
    InitializeEvent(4, 1039542283, 1039540244);
    InitializeEvent(5, 1039542283, 1039540245);
    InitializeEvent(0, 1039543700, 1039540700);
    InitializeEvent(0, 1039543702, 1039540700, 1039549206);
    InitializeCommonEvent(0, 90005702, 1039540700, 3683, 3680, 3684);
    InitializeCommonEvent(0, 90005706, 1039540701, 930025, 0);
});

$Event(50, Default, function() {
    SetCharacterBackreadState(1039540700, true);
    SetCharacterBackreadState(1039540701, true);
});

$Event(1039542498, Restart, function() {
    if (EventFlag(1039540592)) {
        ModifyNavimeshConnectionBitflag(1039542498, NavimeshType.Solid, BitopType.Delete);
        EndEvent();
    }
L0:
    ModifyNavimeshConnectionBitflag(1039542498, NavimeshType.Solid, BitopType.Add);
    WaitFor(EventFlag(1039540592));
    ModifyNavimeshConnectionBitflag(1039542498, NavimeshType.Solid, BitopType.Delete);
    EndEvent();
});

$Event(1039542811, Restart, function() {
    EndIf(EventFlag(1039540800));
    WaitFor(HPRatio(1039540800) <= 0.6);
    SetEventFlagID(1039542802, ON);
});

$Event(1039542499, Restart, function() {
    if (EventFlag(1039540594)) {
        ModifyNavimeshConnectionBitflag(1039542499, NavimeshType.Solid, BitopType.Delete);
        EndEvent();
    }
L0:
    ModifyNavimeshConnectionBitflag(1039542499, NavimeshType.Solid, BitopType.Add);
    WaitFor(EventFlag(1039540594));
    ModifyNavimeshConnectionBitflag(1039542499, NavimeshType.Solid, BitopType.Delete);
    EndEvent();
});

$Event(1039542290, Restart, function(X0_4) {
    EndIf(ThisEventSlot());
    SetSpEffect(X0_4, 90000);
    SetNetworkconnectedThisEventSlot(ON);
});

$Event(1039542283, Restart, function(X0_4) {
    ForceCharacterDeath(X0_4, false);
    EndEvent();
});

$Event(1039542580, Default, function() {
    RegisterLadder(1039540580, 1039540851, 1039541580);
    RegisterLadder(1039540582, 1039540853, 1039541582);
    RegisterLadder(1039540584, 1039540855, 1039541584);
    RegisterLadder(1039540586, 1039540857, 1039541586);
    RegisterLadder(1039540588, 1039540859, 1039541588);
    RegisterLadder(1039540590, 1039540861, 1039541590);
    RegisterLadder(1039540598, 1039540869, 1039541598);
    RegisterLadder(1039540596, 1039540863, 1039541596);
});

$Event(1039542200, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    EndIf(ThisEventSlot());
    DisableCharacterAI(X0_4);
    SetSpEffect(X0_4, 8081);
    SetSpEffect(X0_4, 8082);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaChrSp = InArea(10000, X4_4) && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedThisEventSlot(ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X8_4);
        if (Signed(X12_4) != -1) {
            ForceAnimationPlayback(X0_4, X12_4, true, false, false);
        }
    }
L1:
    EnableCharacterAI(X0_4);
    WaitFixedTimeSeconds(5);
    ClearSpEffect(X0_4, 8081);
    ClearSpEffect(X0_4, 8082);
});

$Event(1039542849, Restart, function() {
    InitializeCommonEvent(0, 9005800, 1039540800, 1039541800, 1039542800, 1039542805, 1039545800, 10000, 0, 1039542800);
    InitializeCommonEvent(0, 9005801, 1039540800, 1039541800, 1039542800, 1039542805, 1039542806, 10000);
    InitializeCommonEvent(0, 9005811, 1039540800, 1039541800, 5, 0);
    InitializeCommonEvent(0, 9005822, 1039540800, 921000, 1039542805, 1039542806, 0, 1039542802, 0, 0);
});

$Event(1039542800, Restart, function() {
    EndIf(EventFlag(1039540800));
    WaitFor(HPRatio(1039540800) <= 0);
    SpawnMapSFX(1039540820);
    SpawnMapSFX(1039540821);
    SpawnMapSFX(1039540822);
    WaitFixedTimeSeconds(4);
    PlaySE(1039540800, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(1039540800));
    HandleBossDefeatAndDisplayBanner(1039540800, TextBannerType.GreatEnemyFelled);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, -11100);
});

$Event(1039542810, Restart, function() {
    if (EventFlag(1039540800)) {
        DisableCharacter(1039540800);
        DisableCharacterCollision(1039540800);
        ForceCharacterDeath(1039540800, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(1039540800);
    WaitFor(EventFlag(1039542805) && InArea(10000, 1039542800));
    SetNetworkUpdateRate(1039540800, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 1039540800, 0, 903100500);
    WaitFixedTimeSeconds(1.75);
    EnableCharacterAI(1039540800);
});

$Event(1039542720, Restart, function(X0_4, X4_4, X8_4) {
    if (!InArea(10000, X4_4)) {
        SetSpEffect(X0_4, 530);
        EndEvent();
    }
L1:
    WaitFixedTimeSeconds(X8_4);
    ClearSpEffect(X0_4, 530);
    EndEvent();
});

$Event(1039542510, Default, function() {
    InitializeCommonEvent(0, 90005500, 1039540510, 1039540511, 5, 1039541510, 1039541511, 1039543511, 1039541512, 1039543512, 1039542511, 1039542512, 1039540512, 1039540513, 0);
});

$Event(1039542520, Restart, function(X0_4, X4_4) {
    WaitFixedTimeFrames(1);
    EndIf(AssetDestroyed(X4_4, Equal, 1));
    WaitFor(HasDamageType(X4_4, 0, DamageType.Fire));
    WaitFixedTimeFrames(1);
    SpawnOneshotSFX(TargetEntityType.Asset, X4_4, 200, 800140);
    CreateDamagingAsset(X0_4, X4_4, 200, 200100, DamageTargetType.Character, 3.5, 0.8, 0);
});

$Event(1039543700, Restart, function(X0_4) {
    WaitFixedTimeFrames(1);
    DisableNetworkSync();
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3680)) {
            SetEventFlagID(31009205, OFF);
        }
    }
L10:
    if (!EventFlag(3690)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
        WaitFor(EventFlag(3690));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(3680));
    GotoIf(L2, EventFlag(3681));
    GotoIf(L3, EventFlag(3682));
    GotoIf(L4, EventFlag(3683));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.FriendlyNPC);
    ForceAnimationPlayback(X0_4, 90103, false, false, false);
    if (EventFlag(1039549206)) {
        ForceAnimationPlayback(X0_4, 90104, false, false, false);
    }
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(3690));
    RestartEvent();
});

$Event(1039543702, Restart, function(X0_4, X4_4) {
    WaitFixedTimeFrames(1);
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(3690));
    if (!EventFlag(X4_4)) {
        WaitFor(EventFlag(X4_4));
    }
L1:
    SetSpEffect(X0_4, 9705);
    EndEvent();
});

$Event(1039543709, Restart, function(X0_4) {
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    EndEvent();
});


