// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    
    
    RegisterBonfire(2047440000, 2047441950, 0, 0, 0, 0);
    RegisterBonfire(2047440001, 2047441951, 0, 0, 0, 4);
    InitializeCommonEvent(0, 90005250, 2047440351, 2047442351, 0, -1);
    InitializeCommonEvent(0, 90005250, 2047440352, 2047442351, 0, -1);
    InitializeCommonEvent(0, 90005250, 2047440330, 2047442330, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440339, 2047442330, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440340, 2047442330, 0, 0);
    InitializeCommonEvent(0, 90005301, 2047440360, 2047440360, 30865, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440270, 2047442200, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440200, 2047442200, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440260, 2047442200, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440265, 2047442263, 1056964608, 3005);
    InitializeCommonEvent(0, 90005200, 2047440264, 30002, 20002, 2047442263, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 2047440263, 30002, 20002, 2047442263, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 2047440203, 30004, 20004, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 2047440266, 2047442232, 1056964608, 0, 3008);
    InitializeCommonEvent(0, 90005261, 2047440271, 2047442271, 0, 0, 3008);
    InitializeCommonEvent(0, 90005250, 2047440225, 2047442223, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440228, 2047442225, 1056964608, 3001);
    InitializeCommonEvent(0, 90005250, 2047440227, 2047442227, 0, 3000);
    InitializeEvent(0, 2047442200, 2047440225);
    InitializeEvent(1, 2047442200, 2047440228);
    InitializeCommonEvent(0, 90005250, 2047440222, 2047442222, 0, 3020);
    InitializeCommonEvent(0, 90005250, 2047440232, 2047442232, 0, 3001);
    InitializeCommonEvent(0, 90005250, 2047440235, 2047442232, 0, 3010);
    InitializeCommonEvent(0, 90005250, 2047440224, 2047442232, 1056964608, 3010);
    InitializeEvent(2, 2047442200, 2047440232);
    InitializeCommonEvent(0, 90005250, 2047440221, 2047442221, 0, 3020);
    InitializeCommonEvent(0, 90005200, 2047440231, 30010, 20010, 2047442226, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 2047440226, 30010, 20010, 2047442226, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 2047440236, 30010, 20010, 2047442226, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 2047440236, 30010, 20010, 2047442226, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440240, 2047442226, 0, 3013);
    InitializeEvent(3, 2047442200, 2047440237);
    InitializeCommonEvent(0, 90005250, 2047440237, 2047442237, 0, 3001);
    InitializeEvent(4, 2047442200, 2047440238);
    InitializeCommonEvent(0, 90005250, 2047440238, 2047442237, 0, 3001);
    InitializeCommonEvent(0, 90005201, 2047440230, 30010, 20010, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 2047440229, 30010, 20010, 1088421888, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440211, 2047442212, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440260, 2047442212, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440206, 2047442206, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440207, 2047442206, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440214, 2047442206, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440217, 2047442206, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440216, 2047442222, 0, 0);
    InitializeCommonEvent(0, 90005211, 2047440280, 30004, 20004, 2047442211, 1081291571, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 2047440310, 30000, 20000, 2047442201, 0, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005301, 2047440310, 2047440310, 2047440900, 1086324736, 0);
    InitializeCommonEvent(0, 90005261, 2047440252, 2047442252, 1073741824, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440253, 2047442252, 0, 0);
    InitializeCommonEvent(0, 90005201, 2047440321, 30000, 20000, 1084227584, 0, 0, 1, 1, 0);
    InitializeCommonEvent(0, 90005261, 2047440320, 2047442237, 1073741824, 1056964608, 0);
    InitializeCommonEvent(0, 90005261, 2047440322, 2047442226, 1073741824, 1056964608, 0);
    InitializeCommonEvent(0, 90005250, 2047440302, 2047442302, 1056964608, 0);
    InitializeCommonEvent(0, 90005250, 2047440301, 2047442301, 0, 0);
    InitializeCommonEvent(0, 90005250, 2047440243, 2047442226, 0, 0);
    InitializeEvent(0, 2047442580, 0);
    InitializeEvent(0, 2047442500, 2047448500, 2047441500, 2047441501, 2047443500, 464016, 1, 2, 1);
    InitializeCommonEvent(0, 900005610, 2047441200, 100, 800, 0);
    InitializeCommonEvent(0, 900005610, 2047441201, 100, 800, 0);
    InitializeCommonEvent(0, 900005610, 2047441202, 100, 800, 0);
    InitializeCommonEvent(0, 900005580, 580600, 2047441600, 9146);
    InitializeCommonEvent(0, 90005605, 2047441610, 3026493, 2046464500, 0, 2047442650, 2047442654, 2047442655, 2047440610, 0, 0, 0);
    InitializeEvent(0, 2047442611, 2047440611, 2047441611, 2047442613, 2047442614, 2047440610);
    InitializeEvent(0, 2047442612, 2047440611, 2047441612);
    InitializeCommonEvent(0, 90005706, 2047440700, 30010, 0);
    InitializeCommonEvent(0, 90005748, 2047441700, 206020, 1030050, 1106247680, 4920);
});

$Event(2047442580, Default, function() {
    RegisterLadder(2047440580, 2047440581, 2047441580);
    RegisterLadder(2047440582, 2047440583, 2047441582);
    RegisterLadder(2047440584, 2047440585, 2047441584);
    RegisterLadder(2047440586, 2047440587, 2047441586);
    RegisterLadder(2047440588, 2047440589, 2047441588);
    RegisterLadder(2047440590, 2047440591, 2047441590);
    RegisterLadder(2047440592, 2047440593, 2047441592);
});

$Event(2047442500, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4) {
    if (EventFlag(X0_4)) {
        DisableObjAct(X8_4, X16_4);
        ReproduceAssetAnimation(X4_4, X24_4);
        ReproduceAssetAnimation(X8_4, X28_4);
        EndEvent();
    }
L0:
    WaitFor(!EventFlag(X0_4) && ObjActEventFlag(X12_4));
    SetNetworkconnectedEventFlagID(X0_4, ON);
    DisableObjAct(X8_4, X16_4);
    ForceAnimationPlayback(X4_4, X20_4, false, false, false);
});

$Event(2047442200, Restart, function(X0_4) {
    if (!CharacterHasSpEffect(X0_4, 13690)) {
        SetSpEffect(X0_4, 13690);
    }
});

$Event(2047442300, Restart, function(X0_4) {
    SetSpEffect(X0_4, 20007030);
});

$Event(2047442611, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(EventFlag(X0_4) || !PlayerIsInOwnWorld());
    SetEventFlagID(X8_4, OFF);
    SetEventFlagID(X12_4, OFF);
    WaitFor(ActionButtonInArea(9523, X4_4));
    DisplayGenericDialogAndSetEventFlags(108186, PromptType.YESNO, NumberofOptions.TwoButtons, X4_4, 3, X8_4, X12_4, X12_4);
    if (!EventFlag(X8_4)) {
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
L1:
    if (!PlayerHasItem(ItemType.Goods, 8186)) {
        WaitFixedTimeFrames(1);
        ForceAnimationPlayback(10000, 50050, false, false, false);
        WaitFixedTimeSeconds(1.5);
        DisplayGenericDialog(308186, PromptType.OKCANCEL, NumberofOptions.NoButtons, X4_4, 3);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
L2:
    IssueShortWarpRequest(10000, TargetEntityType.Asset, X4_4, 191);
    ForceAnimationPlayback(10000, 60810, false, false, false);
    WaitFixedTimeSeconds(2.5);
    SetNetworkconnectedEventFlagID(X0_4, ON);
    SetNetworkconnectedEventFlagID(X16_4, ON);
    DisplayGenericDialog(208186, PromptType.OKCANCEL, NumberofOptions.NoButtons, X4_4, 3);
    RemoveItemFromPlayer(ItemType.Goods, 8186, 1);
});

$Event(2047442612, Restart, function(X0_4, X4_4) {
    if (EventFlag(X0_4)) {
        EnableAsset(X4_4);
        EndEvent();
    }
L0:
    DisableAsset(X4_4);
    WaitFor(EventFlag(X0_4));
    EnableAsset(X4_4);
});

$Event(2047442360, Restart, function() {
    EndIf(EventFlag(2047440360));
    WaitFor(CharacterDead(2047440360));
    AwardItemLot(30865);
    SetNetworkconnectedEventFlagID(2047440360, ON);
});
