// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    RegisterBonfire(11000002, 11001952, 0, 0, 0, 5);
    RegisterBonfire(11000003, 11001953, 0, 0, 0, 5);
    RegisterBonfire(11000004, 11001954, 0, 0, 0, 5);
    RegisterBonfire(11000005, 11001955, 0, 0, 0, 5);
    RegisterBonfire(11000006, 11001956, 0, 0, 0, 5);
    RegisterBonfire(11000007, 11001957, 0, 0, 0, 5);
    RegisterBonfire(11000008, 11001958, 0, 0, 0, 5);
    RegisterBonfire(11000009, 11001959, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 11000500, 11000000, 11000950, 11001950, 1084227584);
    InitializeCommonEvent(0, 9005810, 11000850, 11000001, 11000951, 11001951, 1084227584);
    InitializeEvent(0, 11002800, 0);
    InitializeEvent(0, 11002810, 0);
    InitializeEvent(0, 11002811, 0);
    InitializeEvent(0, 11002829, 0);
    InitializeEvent(0, 11002850, 0);
    InitializeEvent(0, 11002860, 0);
    InitializeEvent(0, 11002859, 0);
    InitializeEvent(0, 11002500, 0);
    InitializeEvent(0, 11002501, 0);
    InitializeEvent(0, 11002502, 0);
    InitializeEvent(0, 11002503, 0);
    InitializeCommonEvent(0, 90005501, 11000510, 11000511, 0, 11001510, 11001511, 11001512, 11000512);
    InitializeCommonEvent(0, 90005501, 11000515, 11000516, 0, 11001515, 11001516, 11001517, 11000517);
    InitializeCommonEvent(0, 90005501, 11000520, 11000521, 0, 11001520, 11001521, 11001522, 11000522);
    InitializeCommonEvent(0, 90005501, 11000525, 11000526, 0, 11001525, 11001526, 11001527, 11000527);
    InitializeCommonEvent(0, 90005501, 11000530, 11000531, 0, 11001530, 11001531, 11001532, 11000532);
    InitializeCommonEvent(0, 90005501, 11000535, 11000536, 1, 11001535, 11001536, 11001537, 11000537);
    InitializeCommonEvent(0, 90005501, 11000610, 11000611, 2, 11001610, 11001611, 11001612, 11000612);
    InitializeEvent(0, 11002510, 0);
    InitializeEvent(0, 11000602, 0);
    InitializeCommonEvent(0, 90005513, 11000540, 11001540, 11001541, 11003541, 1227050, 1, 2);
    InitializeEvent(0, 11002546, 11000546, 11001546, 11001547, 11003547, 1227050, 1, 2);
    InitializeEvent(0, 11002547, 0);
    InitializeCommonEvent(0, 90005511, 11000560, 11001560, 11003560, 227010, 0);
    InitializeCommonEvent(0, 90005512, 11000560, 11002560, 11002561);
    InitializeCommonEvent(0, 90005511, 11000562, 11001562, 11003562, 227010, 0);
    InitializeCommonEvent(0, 90005512, 11000562, 11002562, 11002563);
    InitializeCommonEvent(0, 90005511, 11000564, 11001564, 11003564, 227070, 0);
    InitializeEvent(0, 11002540, 0);
    InitializeEvent(0, 11000600, 0);
    InitializeEvent(0, 11002601, 0);
    InitializeEvent(0, 11002603, 0);
    InitializeEvent(0, 11002580, 0);
    InitializeCommonEvent(0, 90005520, 11000576, 11001576, 11002576, 11002577);
    InitializeCommonEvent(0, 90005520, 11000578, 11001578, 11002578, 11002579);
    InitializeEvent(0, 11002690, 0);
    InitializeEvent(0, 11002691, 11001691);
    InitializeCommonEvent(0, 90005605, 11001692, 3874, 34152692, 11000000, 11002692, 11002693, 11002694, 11000600, 30040, 0, 0);
    InitializeCommonEvent(0, 90005632, 580050, 11001695, 80050);
    InitializeCommonEvent(0, 90005570, 60822, 52, 11001391, 0, 1, 0);
    InitializeEvent(0, 11002698, 0);
    InitializeEvent(0, 11002697, 0);
    InitializeEvent(0, 11002699, 0);
    InitializeEvent(0, 11002604, 0);
    InitializeEvent(0, 11002203, 11000203, 11002216);
    InitializeEvent(0, 11002205, 11000203, 11002215);
    InitializeEvent(0, 11002207, 11000203, 11002216);
    InitializeEvent(0, 11002209, 11000203, 11002215);
    InitializeEvent(1, 11002203, 11000205, 11002218);
    InitializeEvent(1, 11002205, 11000205, 11002217);
    InitializeEvent(1, 11002207, 11000205, 11002218);
    InitializeEvent(1, 11002209, 11000205, 11002217);
    InitializeEvent(5, 11002260, 11000265, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(6, 11002260, 11000266, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(7, 11002260, 11000267, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(8, 11002260, 11000268, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(9, 11002260, 11000269, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(10, 11002260, 11000270, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(11, 11002260, 11000271, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(12, 11002260, 11000272, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(13, 11002260, 11000273, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(14, 11002260, 11000274, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(15, 11002260, 11000275, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(16, 11002260, 11000276, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(17, 11002260, 11000277, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(18, 11002260, 11000278, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(19, 11002260, 11000279, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(20, 11002260, 11000280, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(21, 11002260, 11000281, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(22, 11002260, 11000282, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(23, 11002260, 11000283, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(24, 11002260, 11000284, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(25, 11002260, 11000285, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(26, 11002260, 11000286, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(27, 11002260, 11000287, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(28, 11002260, 11000288, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(29, 11002260, 11000289, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000393, 11000393, 11001187, 1073741824, 0);
    InitializeEvent(2, 11002402, 11000252, 30000, 20000, 11002243, 0, 0, 1, 0, 0, 1);
    InitializeEvent(0, 11002402, 11000254, 30000, 20000, 11002254, 1073741824, 0, 1, 0, 0, 1);
    InitializeEvent(1, 11002402, 11000259, 30000, 20000, 11002259, 0, 0, 1, 1, 1, 1);
    InitializeEvent(0, 11002317, 11000408, 11002359, 0, 1084227584);
    InitializeEvent(1, 11002317, 11000420, 11002359, 0, 1092616192);
    InitializeCommonEvent(0, 90005300, 11000389, 11000389, 11001198, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000399, 11000399, 11000185, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000495, 11000495, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000496, 11000496, 0, 0, 0);
    InitializeEvent(0, 11002497, 11000497, 11002497, 0);
    InitializeCommonEvent(0, 90005300, 11000497, 11000497, 11001193, 0, 0);
    InitializeEvent(4, 11002402, 11000397, 30001, 20001, 11002625, 0, 0, 1, 1, 1, 1);
    InitializeCommonEvent(0, 90005300, 11000498, 11000498, 0, 1073741824, 0);
    InitializeCommonEvent(0, 90005300, 11000499, 11000499, 11000195, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000484, 11000484, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000665, 11000665, 40370, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000666, 11000666, 40372, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000667, 11000667, 40374, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000299, 11000299, 11001000, 0, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001930, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001931, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001932, 5, 0);
    InitializeCommonEvent(0, 90005795, 7605, 0, 11009500, 11002141, 11002142, 80605, 9000, 11001710, 30010);
    if (CeremonyActive(20)) {
        InitializeEvent(0, 11002155, 7605, 11000740, 11000745, 5, 11002141);
        InitializeEvent(0, 11002145, 0);
    }
    InitializeCommonEvent(0, 90005780, 11000800, 11002164, 11002165, 11000730, 20, 11002164, 0, 1, 0);
    InitializeCommonEvent(0, 90005781, 11000800, 11002164, 11002165, 11000730);
    InitializeCommonEvent(0, 90005782, 11002164, 11002805, 11000730, 11002800, 11002809, 20029);
    InitializeCommonEvent(0, 90005780, 11000800, 11002168, 11002169, 11000760, 20, 11002761, 35009317, 1, 0);
    InitializeCommonEvent(0, 90005781, 11000800, 11002168, 11002169, 11000760);
    InitializeCommonEvent(0, 90005782, 11002168, 11002805, 11000760, 11002800, 11002809, 0);
    InitializeCommonEvent(0, 90005703, 11000710, 3941, 3942, 1039409251, 3941, 3940, 3943, 0);
    InitializeCommonEvent(0, 90005704, 11000710, 3941, 3940, 1039409251, 3);
    InitializeCommonEvent(0, 90005702, 11000710, 3943, 3940, 3944);
    InitializeEvent(0, 11003710, 11000710);
    InitializeEvent(0, 11003711, 11000710);
    InitializeEvent(0, 11003715, 11000720);
    InitializeEvent(0, 11003720, 11000725);
    InitializeCommonEvent(0, 90005704, 11000725, 4201, 4200, 11009451, 3);
    InitializeCommonEvent(0, 90005703, 11000725, 4201, 4202, 11009451, 4201, 4200, 4204, -1);
    InitializeCommonEvent(0, 90005702, 11000725, 4203, 4200, 4204);
    InitializeEvent(0, 11003721, 11000715);
    InitializeEvent(0, 11003722, 11000715);
    InitializeEvent(0, 11003723, 11000716);
    InitializeEvent(0, 11003724, 0);
    InitializeEvent(0, 11003725, 11000705);
    InitializeCommonEvent(0, 90005701, 11000705, 4701, 4702, 11009301, 3);
    InitializeCommonEvent(0, 90005700, 11000705, 4701, 4702, 11009301, 1059481190, 4700, 4704, -1);
    InitializeCommonEvent(0, 90005702, 11000705, 4703, 4700, 4704);
    InitializeEvent(0, 11003730, 0);
    InitializeCommonEvent(0, 90005774, 7605, 11001985, 11001985);
    InitializeEvent(0, 11003740, 0);
    InitializeEvent(0, 11003741, 0);
    InitializeCommonEvent(0, 90005771, 11000957, 11002740);
    InitializeCommonEvent(0, 90005771, 11000952, 11002741);
    InitializeCommonEvent(0, 90005771, 11000953, 11002742);
    InitializeCommonEvent(0, 90005771, 11000954, 11002743);
    InitializeCommonEvent(0, 90005771, 11000955, 11002744);
    InitializeCommonEvent(0, 90005775, 85495300, 11109687, -1082130432);
});

$Event(11002501, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000501));
    WaitFor(EventFlag(11000800) && !EventFlag(11000501));
    SetSpEffect(10000, 4280);
    SetSpEffect(10000, 4282);
    WaitFor(EventFlag(11000800) && EventFlag(11000500) && EventFlag(9000));
    SetSpEffect(10000, 4281);
    SetSpEffect(10000, 4283);
    SetEventFlagID(11000501, ON);
    RestartEvent();
});

$Event(11002502, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000500));
    WaitFor(EventFlag(11002802) || (EventFlag(11000800) && PlayerInMap(11, 0, 0, 0)));
    ChangeWeather(Weather.Rain, -1, false);
    WaitFixedTimeSeconds(3);
    WaitFor(!(EventFlag(11002802) || (EventFlag(11000800) && PlayerInMap(11, 0, 0, 0))));
    ChangeWeather(Weather.None, -1, false);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

$Event(11002503, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000501));
    WaitFor(
        PlayerIsInOwnWorld()
            && EventFlag(11000800)
            && !EventFlag(11000501)
            && ActionButtonInArea(10000, 11001800)
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending)));
    RotateCharacter(10000, 11002800, 60060, true);
    SendInvadingPhantomsHome(0);
    RestartEvent();
});

//morgott
$Event(11002800, Restart, function() {
    EndIf(EventFlag(11000800));
    WaitFor(CharacterHPValue(11000800) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11008000, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000800));
    HandleBossDefeatAndDisplayBanner(11000800, TextBannerType.DemigodFelled);
    //boss rewards (6 bonus items, no upgrade mats, guaranteed flag)
InitializeCommonEvent(0,90001036,1049304218,1049304008,1049304932,1049304933,1049304934,1049304935,1049304936,1049304937,1049304938,1049305595,1049305599,1049305601,1049305603,1049305605,1049305607,1049305609,1049300218);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, 0);
});

$Event(11002810, Restart, function() {
    if (EventFlag(11000800)) {
        DisableCharacter(11005800);
        DisableCharacterCollision(11005800);
        ForceCharacterDeath(11005800, false);
        DisableAsset(11001820);
        DisableHit(11004820);
        DisableAsset(11006830);
        EndEvent();
    }
L0:
    DisableCharacterAI(11005800);
    DisableAsset(11001820);
    DisableHit(11004820);
    DisableCharacterCollision(11000800);
    EndIf(
        CharacterType(10000, TargetType.BlackPhantom)
            || CharacterType(10000, TargetType.Invader)
            || CharacterType(10000, TargetType.Invader2)
            || CharacterType(10000, TargetType.Invader3)
            || CharacterType(10000, TargetType.BluePhantom));
    if (!EventFlag(11000801)) {
        WarpCharacterAndCopyFloor(11000800, TargetEntityType.Area, 11002810, -1, 11000800);
        ForceAnimationPlayback(11000800, 30000, false, false, false);
        WaitFor(EventFlag(11002805) && InArea(10000, 11002800));
        if (PlayerIsInOwnWorld()) {
            SendInvadingPhantomsHome(0);
        }
        if (PlayerIsInOwnWorld()) {
            PlayCutsceneToPlayerAndWarp(11000040, CutscenePlayMode.Skippable, 11002812, 11000000, 10000, 0, false);
        } else {
            PlayCutsceneToPlayer(11000040, CutscenePlayMode.Skippable, 10000);
        }
        WaitFixedTimeRealFrames(1);
        SetNetworkconnectedEventFlagID(11000801, ON);
        if (PlayerIsInOwnWorld()) {
            SetCameraAngle(14.42, -37.69);
        }
        DisableAsset(11006830);
        IssueShortWarpRequest(11000800, TargetEntityType.Area, 11002811, -1);
        ForceAnimationPlayback(11000800, 20000, false, false, false);
    } else {
L1:
        DisableAsset(11006830);
        WaitFor(EventFlag(11002805) && InArea(10000, 11002800));
    }
L2:
    EnableCharacterCollision(11000800);
    EnableCharacterAI(11005800);
    SetNetworkUpdateRate(11005800, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 11000800, 0, 902130002);
});

$Event(11002811, Restart, function() {
    EndIf(EventFlag(11000800));
    WaitFor(CharacterHasSpEffect(11000800, 16205));
    SetEventFlagID(11002802, ON);
    EnableAsset(11001820);
    EnableHit(11004820);
    WaitFixedTimeFrames(1);
    DisableHit(11004821);
    DisplayBossHealthBar(Enabled, 11000800, 0, 902130003);
});

$Event(11002829, Restart, function() {
    InitializeCommonEvent(0, 9005800, 11000800, 11001800, 11002800, 11002805, 11005800, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 11000800, 11001800, 11002800, 11002805, 11002806, 10000);
    InitializeCommonEvent(0, 9005811, 11000501, 11001800, 17, 0);
    InitializeCommonEvent(0, 9005811, 11000800, 11001801, 18, 11000801);
    InitializeCommonEvent(0, 9005822, 11000800, 213001, 11002805, 11002806, 0, 11002802, 0, 0);
});

//godfrey (golden shade)
$Event(11002850, Restart, function() {
    EndIf(EventFlag(11000850));
    WaitFor(CharacterHPValue(11000850) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11008050, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000850));
    HandleBossDefeatAndDisplayBanner(11000850, TextBannerType.GreatEnemyFelled);
    //boss rewards (3 bonus items + guaranteed flag)
    InitializeCommonEvent(0,90001033,1049304210,1049304099,1049304097,-1,1049304895,1049304896,1049304897,1049304898,1049305498,1049305500,1049305502,1049305504,1049300210);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, 0);
});

$Event(11002860, Restart, function() {
    if (EventFlag(11000850)) {
        DisableCharacter(11005850);
        DisableCharacterCollision(11005850);
        ForceCharacterDeath(11005850, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(11005850);
    if (!EventFlag(11000851)) {
        ForceAnimationPlayback(11000850, 30000, true, false, false);
        DisableCharacter(11000850);
        WaitFor(
            (PlayerIsInOwnWorld() && EntityInRadiusOfEntity(11000850, 10000, 25, 1))
                || HasDamageType(10000850, 0, DamageType.Unspecified));
        SetNetworkconnectedEventFlagID(11000851, ON);
        ForceAnimationPlayback(11000850, 20000, false, false, false);
        EnableCharacter(11000850);
    } else {
L1:
        WaitFor(EventFlag(11002855) && InArea(10000, 11002850));
    }
L2:
    EnableCharacterAI(11000850);
    SetNetworkUpdateRate(11005850, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 11000850, 0, 904720002);
});

$Event(11002861, Restart, function() {
    EndIf(EventFlag(11000850));
    WaitFor(HPRatio(11000850) <= 0.6);
    SetEventFlagID(11002852, ON);
});

$Event(11002859, Restart, function() {
    InitializeCommonEvent(0, 9005800, 11000850, 11001850, 11002850, 11002855, 11005850, 10000, 11000851, 0);
    InitializeCommonEvent(0, 9005801, 11000850, 11001850, 11002850, 11002855, 11002856, 10000);
    InitializeCommonEvent(0, 9005811, 11000850, 11001850, 4, 11000851);
    InitializeCommonEvent(0, 9005811, 11000850, 11001851, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001852, 4, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001853, 4, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001854, 19, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001857, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001858, 5, 0);
    InitializeCommonEvent(0, 9005822, 11000850, 472001, 11002855, 11002856, 0, 11002852, 0, 0);
});

$Event(11002910, Restart, function() {
    WaitFor(EventFlag(11000800) && EventFlag(130));
    DeleteAssetfollowingSFX(11001920, true);
    CreateAssetfollowingSFX(11001920, 100, 30);
});

$Event(11002920, Default, function(X0_4, X4_4) {
    DisableNetworkSync();
    WaitFor(ActionButtonInArea(7100, X4_4) || EventFlag(X0_4));
    EndIf(EventFlag(X0_4));
    DisplayGenericDialog(10010170, PromptType.OKCANCEL, NumberofOptions.OneButton, X4_4, 3);
    RestartEvent();
});

$Event(11003710, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3940)) {
            SetEventFlagID(1043379353, OFF);
        }
    }
L0:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!EventFlag(3947)) {
        WaitFor(EventFlag(3947));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(3940));
    GotoIf(L2, EventFlag(3941));
    GotoIf(L3, EventFlag(3942));
    GotoIf(L4, EventFlag(3943));
L1:
    if (!EventFlag(3957)) {
        if (!EventFlag(11109819)) {
            WaitFor(EventFlag(71102) && EventFlag(9000));
        }
    }
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 930010, false, false, false);
    SetNetworkconnectedEventFlagID(11109819, ON);
    SetNetworkconnectedEventFlagID(3957, ON);
    Goto(L20);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(3947));
    RestartEvent();
});

$Event(11003711, Restart, function(X0_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(3943) || !EventFlag(3947) || EventFlag(1039409259));
    WaitFor(EntityInRadiusOfEntity(X0_4, 20000, 4, 1) && CharacterHasSpEffect(20000, 9690));
    SetNetworkconnectedEventFlagID(1039402710, ON);
    EndEvent();
});

$Event(11003715, Restart, function(X0_4) {
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    SetCharacterTalkRange(X0_4, 17);
    GotoIf(L0, EventFlag(11000800));
    Goto(L1);
L0:
    SetCharacterTalkRange(X0_4, 120);
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    IssueShortWarpRequest(X0_4, TargetEntityType.Area, 11002721, -1);
    ForceAnimationPlayback(X0_4, 930000, false, false, false);
    if (EventFlag(11009405)) {
        ForceAnimationPlayback(X0_4, 930002, false, false, false);
    }
    EndEvent();
L1:
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 11000800);
    SetCharacterTalkRange(X0_4, 120);
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    IssueShortWarpRequest(X0_4, TargetEntityType.Character, 11000800, 900);
    ForceAnimationPlayback(X0_4, 930000, false, false, false);
    if (EventFlag(11009405)) {
        ForceAnimationPlayback(X0_4, 930002, false, false, false);
    }
    EndEvent();
});

$Event(11003720, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4200)) {
            SetEventFlagID(1040529253, OFF);
        }
    }
L10:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554)))) {
        WaitFor(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554)));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(4200));
    GotoIf(L2, EventFlag(4201));
    GotoIf(L4, EventFlag(4203));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 90101, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554))));
    RestartEvent();
});

$Event(11003721, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
    }
L10:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    WaitFor(
        (!EventFlag(4203) && EventFlag(4208))
            || (EventFlag(4203) && !EventFlag(4217) && !EventFlag(1051569454) && !EventFlag(11059304))
            || (!EventFlag(4217) && EventFlag(11009554)));
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 930007, false, false, false);
    if (EventFlag(11009555)) {
        ForceAnimationPlayback(X0_4, 930009, false, false, false);
    }
    SetNetworkconnectedEventFlagID(1040549254, OFF);
    SetNetworkconnectedEventFlagID(11009554, ON);
    SetNetworkconnectedEventFlagID(1051569454, OFF);
    SetNetworkconnectedEventFlagID(11059304, OFF);
    WaitFor(
        !((!EventFlag(4203) && EventFlag(4208))
            || (EventFlag(4203) && !EventFlag(4217) && !EventFlag(1051569454) && !EventFlag(11059304))
            || (!EventFlag(4217) && EventFlag(11009554))));
    RestartEvent();
});

$Event(11003722, Restart, function(X0_4) {
    WaitFixedTimeFrames(1);
    EndIf(!PlayerIsInOwnWorld());
    EnableCharacterImmortality(X0_4);
    WaitFor(HasDamageType(X0_4, 10000, DamageType.Unspecified));
    SetNetworkconnectedEventFlagID(1040542710, ON);
    if (EventFlag(11009555)) {
        ForceAnimationPlayback(X0_4, 20014, false, true, true);
    }
    if (!EventFlag(11009555)) {
        ForceAnimationPlayback(X0_4, 20013, false, true, true);
    }
    EndEvent();
});

$Event(11003723, Restart, function(X0_4) {
    if (EventFlag(11009556)) {
        DisableAsset(11001715);
        EndEvent();
    }
    DisableAsset(11001705);
    SetNetworkconnectedEventFlagID(11009468, ON);
    WaitFor(
        EntityInRadiusOfEntity(20000, X0_4, 4, 1)
            && PlayerIsInOwnWorld()
            && CharacterHasSpEffect(20000, 1673014));
    SpawnOneshotSFX(TargetEntityType.Asset, 11001706, -1, 811630);
    ForceAnimationPlayback(11001715, 1, false, false, false);
    EnableAsset(11001705);
    ForceAnimationPlayback(11001705, 1, false, false, false);
    SetNetworkconnectedEventFlagID(11009556, ON);
    SetNetworkconnectedEventFlagID(11009469, ON);
    SetNetworkconnectedEventFlagID(11009468, OFF);
    EndEvent();
});

$Event(11003724, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    SetCharacterTalkRange(11000725, 17);
    EndIf(EventFlag(11009460));
    SetCharacterTalkRange(11000725, 160);
    WaitFor(
        EventFlag(4208) && !EventFlag(11009460) && !EventFlag(11002734) && InArea(10000, 11002740));
    SetNetworkconnectedEventFlagID(11002733, ON);
    EndEvent();
});

$Event(11003725, Restart, function(X0_4) {
    WaitFixedTimeFrames(1);
    DisableNetworkSync();
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4700)) {
            SetEventFlagID(1042369283, OFF);
        }
    }
L10:
    if (!EventFlag(4707)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
        WaitFor(EventFlag(4707));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(4700));
    GotoIf(L2, EventFlag(4701));
    GotoIf(L3, EventFlag(4702));
    GotoIf(L4, EventFlag(4703));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.FriendlyNPC);
    ForceAnimationPlayback(X0_4, 30003, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(4707));
    RestartEvent();
});

$Event(11003730, Restart, function() {
    WaitFixedTimeFrames(1);
    SetEventFlagID(11009500, OFF);
    EndIf(!EventFlag(16009458));
    EndIf(!EventFlag(3886));
    SetEventFlagID(11009500, ON);
    EndEvent();
});

$Event(11003740, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(4247));
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 1045520180);
    SetNetworkconnectedEventFlagID(35009317, OFF);
    SetNetworkconnectedEventFlagID(35009318, OFF);
    EndEvent();
});

$Event(11003741, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(4246));
    WaitFor(
        EventFlag(4240) && EventFlag(35009306) && EntityInRadiusOfEntity(11001957, 20000, 13, 1));
    SetNetworkconnectedEventFlagID(4258, ON);
    EndEvent();
});
