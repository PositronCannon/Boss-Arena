// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    
    RegisterBonfire(42020000, 42021950, 0, 0, 0, 5);
    InitializeCommonEvent(0, 90005250, 42020227, 42022227, 0, 0);
    InitializeCommonEvent(0, 90005250, 42020209, 42022209, 0, 3001);
    InitializeCommonEvent(0, 90005200, 42020210, 30000, 20000, 42022210, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020205, 30000, 20000, 42022214, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020215, 30000, 20000, 42022214, 1050253722, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020229, 30000, 20000, 42022214, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020217, 30000, 20000, 42022214, 1075000115, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020230, 30000, 20000, 42022214, 1075838976, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020207, 30000, 20000, 42022214, 1083179008, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020206, 30000, 20000, 42022214, 1088631603, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020214, 30000, 20000, 42022214, 1089260749, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020216, 30000, 20000, 42022214, 1089051034, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020218, 30000, 20000, 42022218, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020219, 30000, 20000, 42022218, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020220, 30000, 20000, 42022218, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020221, 30000, 20000, 42022218, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020222, 30000, 20000, 42022218, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020223, 30000, 20000, 42022218, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020224, 30000, 20000, 42022218, 1050253722, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020221, 30000, 20000, 42022222, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020200, 30001, 20001, 42022227, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020200, 30001, 20001, 42022200, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020201, 30001, 20001, 42022200, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020202, 30001, 20001, 42022200, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020200, 30001, 20001, 42022203, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020201, 30001, 20001, 42022203, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020202, 30001, 20001, 42022203, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020200, 30001, 20001, 42022206, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020201, 30001, 20001, 42022206, 1045220557, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020202, 30001, 20001, 42022206, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 42020228, 42022228, 1050253722, 0);
    InitializeCommonEvent(0, 90005200, 42020211, 30001, 20001, 42022241, 1089470464, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020213, 30001, 20001, 42022241, 1084227584, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 42020212, 42022241, 0, 0);
    InitializeCommonEvent(0, 90005251, 42020225, 1082130432, 0, 0);
    InitializeCommonEvent(0, 90005251, 42020226, 1056964608, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020208, 30000, 20000, 42022208, 0, 0, 0, 0, 0);
    InitializeEvent(0, 42022300, 42020201, 42022300);
    InitializeEvent(1, 42022300, 42020202, 42022300);
    InitializeEvent(2, 42022300, 42020203, 42022300);
    InitializeEvent(3, 42022300, 42020226, 42022301);
    InitializeEvent(4, 42022300, 42020217, 42022302);
    InitializeEvent(0, 42022330, 42020201, 42022300);
    InitializeEvent(1, 42022330, 42020202, 42022300);
    InitializeEvent(2, 42022330, 42020203, 42022300);
    InitializeEvent(3, 42022330, 42020226, 42022301);
    InitializeEvent(4, 42022330, 42020217, 42022302);
    InitializeCommonEvent(0, 90005250, 42020240, 42022240, 1056964608, 0);
    InitializeCommonEvent(0, 90005200, 42020241, 30001, 20001, 42022241, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020242, 30002, 20002, 42022242, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 42020245, 30002, 20002, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 42020243, 42022243, 0, 0);
    InitializeCommonEvent(0, 90005200, 42020244, 30002, 20002, 42022244, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005251, 42020250, 1065353216, 0, 0);
    InitializeEvent(0, 42022580, 0);
    InitializeCommonEvent(0, 90005646, 42027000, 42022840, 42022841, 42021840, 42022840, 554);
    InitializeEvent(0, 42022600, 42020600, 42021601, 42021600, 42023600, 42021605, 42023605);
    InitializeEvent(1, 42022600, 42020601, 42021603, 42021602, 42023601, 42021604, 42023604);
    InitializeCommonEvent(0, 90005555, 42027000, 42020000, 42021620);
    InitializeCommonEvent(0, 900005610, 42021680, 100, 800, 0);
    InitializeEvent(0, 42020700, 42020700, 30013, 0, 42009205);
});

$Event(42022580, Default, function() {
    RegisterLadder(42020580, 42020581, 42021580);
    RegisterLadder(42020582, 42020583, 42021582);
    RegisterLadder(42020584, 42020585, 42021584);
});

$Event(42022600, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4) {
    if (EventFlag(X0_4)) {
        ReproduceAssetAnimation(X4_4, 21);
    }
L0:
    WaitFor(ObjActEventFlag(X12_4) || ObjActEventFlag(X20_4));
    if (!EventFlag(X0_4)) {
        SetNetworkconnectedEventFlagID(X0_4, ON);
        DisableObjAct(X8_4, 449011);
        DisableObjAct(X16_4, 449011);
        ForceAnimationPlayback(X4_4, 21, false, true, false);
        EnableObjAct(X8_4, 449011);
        EnableObjAct(X16_4, 449011);
        RestartEvent();
    }
L1:
    SetNetworkconnectedEventFlagID(X0_4, OFF);
    DisableObjAct(X8_4, 449011);
    DisableObjAct(X16_4, 449011);
    ForceAnimationPlayback(X4_4, 12, false, true, false);
    EnableObjAct(X8_4, 449011);
    EnableObjAct(X16_4, 449011);
    RestartEvent();
});

$Event(42022620, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(42027000));
    CreateAssetfollowingSFX(42021620, 100, 834010);
    WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(209200, 42021620));
    RotateCharacter(10000, 42021620, -1, true);
    ForceAnimationPlayback(10000, 60010, false, false, false);
    WaitFixedTimeSeconds(1);
    CreateAssetfollowingSFX(42021620, 100, 800380);
    WaitFixedTimeSeconds(1);
    DeleteAssetfollowingSFX(42021620, true);
    WaitFixedTimeSeconds(2.5);
    AwardItemsIncludingClients(42020000);
});

$Event(42022300, Restart, function(X0_4, X4_4) {
    WaitFor(InArea(X0_4, X4_4));
    SetSpEffect(X0_4, 4080);
    WaitFor(!InArea(X0_4, X4_4));
    ClearSpEffect(X0_4, 4080);
    RestartEvent();
});

$Event(42022330, Restart, function(X0_4, X4_4) {
    WaitFor(InArea(X0_4, X4_4));
    SetSpEffect(X0_4, 4085);
    WaitFor(!InArea(X0_4, X4_4));
    ClearSpEffect(X0_4, 4085);
    RestartEvent();
});

$Event(42020700, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    if (!EventFlag(X12_4)) {
L0:
        EnableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, false);
        DisableCharacterGravity(X0_4);
        ForceAnimationPlayback(X0_4, X4_4, false, false, false);
        EndIf(X8_4 == 0);
        WaitFor(CharacterHasSpEffect(X0_4, 9624));
        IssueShortWarpRequest(X0_4, TargetEntityType.Area, X8_4, -1);
        DisableCharacterGravity(X0_4);
    } else {
L5:
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
        Goto(L20);
    }
L20:
    EndEvent();
});


