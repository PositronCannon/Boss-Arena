// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    RegisterBonfire(1051570000, 1051571950, 0, 0, 0, 5);
    InitializeCommonEvent(0, 90005100, 76524, 76521, 1051571980, 77510, 0, 78510, 78511, 78512, 78513, 78514, 78515, 78516, 78517, 78518, 78519);
    RegisterBonfire(1051570001, 1051571951, 0, 0, 0, 5);
    InitializeCommonEvent(0, 90005100, 76524, 76522, 1051571981, 77510, 1, 78510, 78511, 78512, 78513, 78514, 78515, 78516, 78517, 78518, 78519);
    RegisterBonfire(1051570002, 1051571952, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 1051570800, 1051570003, 1051570953, 1051571953, 1084227584);
    InitializeEvent(0, 1051572580, 0);
    InitializeCommonEvent(0, 90005511, 1051570560, 1051571560, 1051573560, 30000, 0);
    InitializeCommonEvent(0, 90005512, 1051570560, 1051572560, 1051572561);
    InitializeEvent(0, 1051572350, 0);
    InitializeEvent(1, 1051572350, 0);
    InitializeEvent(0, 1051572510, 0);
    InitializeCommonEvent(0, 90005501, 1051570510, 1051570511, 0, 1051571510, 1051571511, 1051571512, 1051570512);
    InitializeCommonEvent(0, 90005502, 1051570514, 1051571512, 1051572511);
    InitializeCommonEvent(0, 900005610, 1051571600, 100, 800, 0);
    InitializeCommonEvent(0, 90005632, 580030, 1051571550, 80030);
    InitializeEvent(0, 1051572849, 0);
    InitializeEvent(0, 1051572800, 0);
    InitializeEvent(0, 1051572810, 0);
    InitializeEvent(0, 1051572811, 0);
    InitializeEvent(0, 1051572812, 0);
    InitializeEvent(0, 1051572820, 1051570800, 1051575801, 11130, 20015);
    InitializeEvent(0, 1051572821, 1051570800, 1051575801, 11136, 20016);
    InitializeEvent(0, 1051572822, 1051570800, 1051570801, 1051570802, 11135);
    InitializeEvent(0, 1051572828, 1051572829);
    InitializeEvent(0, 1051572829, 1051572829);
    InitializeCommonEvent(0, 90005211, 1051570200, 30001, 20001, 1051572200, 1084227584, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570201, 30000, 20000, 1051572201, 1084227584, 1050253722, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570202, 30000, 20000, 1051572202, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570203, 30000, 20000, 1051572203, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570204, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570205, 1051572205, 1077936128, 1060320051, -1);
    InitializeCommonEvent(0, 90005261, 1051570206, 1051572206, 1077936128, 1050253722, -1);
    InitializeCommonEvent(0, 90005211, 1051570207, 30001, 20001, 1051572207, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570208, 30000, 20000, 1051572208, 0, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570210, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570211, 30000, 20000, 1051572211, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570212, 30000, 20000, 1051572212, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570213, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570214, 30001, 20001, 1051572214, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570216, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570217, 30000, 20000, 1051572214, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570218, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570219, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570220, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570221, 30001, 20001, 1051572200, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570222, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570223, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570224, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570225, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570226, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570227, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570228, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570229, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570240, 30002, 20011, 1051572240, 1077936128, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570241, 30002, 20011, 1051572241, 1077936128, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570242, 1051572242, 1056964608, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570243, 1051572242, 1056964608, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570244, 1051572242, 1056964608, 0, 0);
    InitializeEvent(0, 1051572250, 1051570272, 30010, 20010, 0, 1065353216, 0, 0, 0, 0, 0, 1051570240);
    InitializeEvent(5, 1051572250, 1051570215, 30001, 20001, 0, 1075838976, 0, 0, 0, 0, 0, 1051570241);
    InitializeEvent(6, 1051572250, 1051570209, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0, 1051570241);
    InitializeEvent(7, 1051572250, 1051570250, 30001, 20001, 0, 1075838976, 0, 0, 0, 0, 0, 1051570241);
    InitializeEvent(8, 1051572250, 1051570255, 30000, 20000, 0, 1083179008, 0, 0, 0, 0, 0, 1051570241);
    InitializeCommonEvent(0, 90005211, 1051570251, 30001, 20001, 1051572251, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570252, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570253, 30000, 20000, 0, 1077936128, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570254, 30001, 20001, 1051572254, 1073741824, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570256, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570257, 30001, 20001, 1051572257, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570258, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570259, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570270, 30011, 20011, 1051572270, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570271, 1051572271, 1056964608, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570273, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeEvent(0, 1051572274, 1051570274, 30011, 20011, 1051572274, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570276, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570277, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570278, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570279, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570280, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570281, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570282, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570283, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570284, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570285, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570286, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570287, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570288, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570289, 30010, 20010, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570395, 1051572275, 1077936128, 0, 3005);
    InitializeCommonEvent(0, 90005261, 1051570315, 1051572315, 1077936128, 0, -1);
    InitializeCommonEvent(0, 90005300, 1051570315, 1051570315, 40508, 0, 0);
    InitializeEvent(0, 1051572310, 1051570311, 30000, 20000, 1051572310, 1084227584, 0, 0, 0, 0, 0);
    InitializeEvent(0, 1051572311, 1051570311, 13360);
    InitializeCommonEvent(0, 90005300, 1051570310, 1051570310, 1051570800, 0, 0);
    InitializeCommonEvent(0, 90005300, 1051570311, 1051570311, 1051570810, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570370, 1051572370, 1077936128, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570372, 30000, 20000, 1051572372, 1077936128, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570374, 1051572370, 1077936128, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570381, 30000, 20000, 0, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 1051570383, 30000, 20000, 0, 1092616192, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 1051570385, 1051572385, 1084227584, 0, 0);
    InitializeEvent(0, 1051572450, 1051570430, 5021);
    InitializeEvent(0, 1051572430, 1051570430, 1051572430, 1051572440);
    InitializeEvent(1, 1051572430, 1051570431, 1051572430, 1051572441);
    InitializeEvent(2, 1051572430, 1051570432, 1051572430, 1051572442);
    InitializeEvent(3, 1051572430, 1051570433, 1051572430, 1051572443);
    InitializeEvent(6, 1051572430, 1051570436, 1051572430, 1051572446);
    InitializeEvent(7, 1051572430, 1051570437, 1051572430, 1051572447);
    InitializeCommonEvent(0, 90005211, 1051570430, 30000, 20000, 0, 1092616192, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 1051570421, 1051570421, 1051570720, 0, 0);
    InitializeEvent(0, 1051572460, 1051570421, 1051570430, 15335);
    InitializeEvent(1, 1051572460, 1051570421, 1051570431, 15335);
    InitializeEvent(2, 1051572460, 1051570421, 1051570432, 15335);
    InitializeEvent(3, 1051572460, 1051570421, 1051570433, 15335);
    InitializeEvent(6, 1051572460, 1051570421, 1051570436, 15335);
    InitializeEvent(7, 1051572460, 1051570421, 1051570437, 15335);
    InitializeEvent(9, 1051572460, 1051570421, 1050570320, 15335);
    InitializeCommonEvent(0, 90005616, 1051577720, 1051572700);
    InitializeCommonEvent(0, 90005211, 1051570368, 30000, 20000, 1051572368, 0, 1036831949, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005706, 1051570710, 930025, 0);
});

$Event(50, Default, function() {
    SetCharacterBackreadState(1051570700, true);
    SetCharacterBackreadState(1051570710, true);
    InitializeEvent(0, 1051570519, 0);
});

$Event(1051572510, Default, function() {
    InitializeCommonEvent(0, 90005500, 1051570510, 1051570511, 0, 1051571510, 1051571511, 1051573511, 1051571512, 1051573512, 1051572511, 1051572512, 1051570512, 1051570513, 1051570514);
});

$Event(1051570519, Default, function() {
    EndIf(ThisEventSlot());
    SetEventFlagID(1051570510, ON);
    SetThisEventSlot(ON);
});

$Event(1051572430, Restart, function(X0_4, X4_4, X8_4) {
    if (CharacterDead(X0_4)) {
        EndEvent();
    }
    WaitFor(CharacterBackreadStatus(X0_4));
    if (!EventFlag(X8_4)) {
        WaitFor(
            (((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
                || CharacterType(10000, TargetType.Alive)
                || CharacterType(10000, TargetType.GrayPhantom)
                || CharacterType(10000, TargetType.WhitePhantom))
                && !AllPlayersInArea(X4_4))
                || EventFlag(X8_4));
        SetSpEffect(X0_4, 15338);
        SetNetworkconnectedEventFlagID(X8_4, ON);
    }
L0:
    WaitFor(
        (((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
            || CharacterType(10000, TargetType.Alive)
            || CharacterType(10000, TargetType.GrayPhantom)
            || CharacterType(10000, TargetType.WhitePhantom))
            && InArea(10000, X4_4))
            || !EventFlag(X8_4));
    SetNetworkconnectedEventFlagID(X8_4, OFF);
    SetSpEffect(X0_4, 15339);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

$Event(1051572450, Restart, function(X0_4, X4_4) {
    SetSpEffect(X0_4, X4_4);
});

$Event(1051572460, Restart, function(X0_4, X4_4, X8_4) {
    if (EventFlag(1051570421)) {
        DisableCharacter(X4_4);
        DisableCharacterCollision(X4_4);
        EndEvent();
    }
L0:
    WaitFor(CharacterHPValue(X0_4) == 0);
    if (!CharacterHasSpEffect(X4_4, X8_4)) {
        ForceCharacterDeath(X4_4, true);
        EndEvent();
    }
L1:
    ForceCharacterDeath(X4_4, true);
    DisableCharacter(X4_4);
    DisableCharacterCollision(X4_4);
    EndEvent();
});

$Event(1051572250, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X24_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    DisableCharacterAI(X0_4);
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    if (0 != X12_4) {
        areaSp |= InArea(10000, X12_4);
    }
    areaSp |= CharacterHasSpEffect(X40_4, 17126);
    areaSpChr &= areaSp
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X28_4 == 0 && X32_4 == 0 && X36_4 == 0)) {
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X36_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        areaSpChr &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaSpChr &= chrSp;
    WaitFor(
        areaSpChr
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X20_4);
        if (X24_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        EnableCharacterAI(X0_4);
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    if (X24_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
    WaitFixedTimeSeconds(X16_4);
});

$Event(1051572274, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X24_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    if (0 != X12_4) {
        area |= InArea(10000, X12_4);
    }
    area |= EntityInRadiusOfEntity(10000, X0_4, X16_4, 1);
    areaHpChrSp &= area
        && HPRatio(1051570272) <= 0.4
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X28_4 == 0 && X32_4 == 0 && X36_4 == 0)) {
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X36_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        areaHpChrSp &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaHpChrSp &= chrSp;
    WaitFor(
        areaHpChrSp
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X20_4);
        if (X24_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    if (X24_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(1051572310, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X24_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    if (0 != X12_4) {
        areaHp |= InArea(10000, X12_4);
    }
    areaHp |= EntityInRadiusOfEntity(10000, X0_4, X16_4, 1) || HPRatio(1051570310) <= 0.5;
    areaHpChrSp &= areaHp
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X28_4 == 0 && X32_4 == 0 && X36_4 == 0)) {
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X36_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        areaHpChrSp &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaHpChrSp &= chrSp;
    WaitFor(
        areaHpChrSp
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X20_4);
        if (X24_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    if (X24_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(1051572311, Restart, function(X0_4, X4_4) {
    EndIf(ThisEventSlot());
    DisableCharacterHPBarDisplay(X0_4);
    SetSpEffect(X0_4, X4_4);
    WaitFixedTimeSeconds(0.1);
    EnableCharacterHPBarDisplay(X0_4);
    EndEvent();
});

$Event(1051572350, Restart, function() {
    DisableNetworkSync();
    CreateBulletOwner(1051570350);
    WaitFor(InArea(10000, 1051572350));
    WaitRandomTimeSeconds(1, 10);
    if (EventFlag(50)) {
        ShootBullet(1051570350, 1051572351, 900, 802105000, 0, 0, 0);
    }
    if (EventFlag(51)) {
        ShootBullet(1051570350, 1051572351, 900, 802105010, 0, 0, 0);
    }
    if (EventFlag(52)) {
        ShootBullet(1051570350, 1051572351, 900, 802105020, 0, 0, 0);
    }
    if (EventFlag(53)) {
        ShootBullet(1051570350, 1051572351, 900, 802105030, 0, 0, 0);
    }
    if (EventFlag(54)) {
        ShootBullet(1051570350, 1051572351, 900, 802105040, 0, 0, 0);
    }
    if (EventFlag(55)) {
        ShootBullet(1051570350, 1051572351, 900, 802105050, 0, 0, 0);
    }
    if (EventFlag(56)) {
        ShootBullet(1051570350, 1051572351, 900, 802105060, 0, 0, 0);
    }
    if (EventFlag(57)) {
        ShootBullet(1051570350, 1051572351, 900, 802105070, 0, 0, 0);
    }
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(1051572580, Restart, function() {
    RegisterLadder(1051570580, 1051570581, 1051571580);
    RegisterLadder(1051570582, 1051570583, 1051571582);
    RegisterLadder(1051570584, 1051570585, 1051571584);
    RegisterLadder(1051570590, 1051570591, 1051571590);
    RegisterLadder(1051570592, 1051570593, 1051571592);
    RegisterLadder(1051570594, 1051570595, 1051571594);
});

$Event(1051572800, Default, function() {
    EndIf(EventFlag(1051570800));
    WaitFor(HPRatio(1051570800) <= 0);
    WaitFor(CharacterDead(1051570800));
    HandleBossDefeatAndDisplayBanner(1051570800, TextBannerType.GreatEnemyFelled);
    //boss rewards (4 bonus items + guaranteed flag)
    InitializeCommonEvent(0,90001034,1049304232,-1,-1,1049304008,1049304992,1049304993,1049304994,1049304995,1049304996,1049305753,1049305756,1049305758,1049305763,1049305765,1049300232);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, 0);
});

$Event(1051572810, Restart, function() {
    if (EventFlag(1051570800)) {
        DisableCharacter(1051570800);
        DisableCharacterCollision(1051570800);
        ForceCharacterDeath(1051570800, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(1051570800);
    if (!EventFlag(1051570801)) {
        onlineAreaDmgChr = (PlayerIsInOwnWorld() && InArea(10000, 1051572801))
            || HasDamageType(1051570800, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(1051570800, 436)
            || CharacterHasStateInfo(1051570800, 2)
            || CharacterHasStateInfo(1051570800, 5)
            || CharacterHasStateInfo(1051570800, 6);
        chr = CharacterHasStateInfo(1051570800, 260);
        WaitFor(onlineAreaDmgChr);
        SetNetworkconnectedEventFlagID(1051570801, ON);
        ForceAnimationPlayback(1051570800, 20010, false, false, false);
    } else {
L1:
        WaitFor(EventFlag(1051572805) && InArea(10000, 1051572800));
        ForceAnimationPlayback(1051570800, 20010, false, false, false);
    }
L2:
    EnableCharacterAI(1051570800);
    SetNetworkUpdateRate(1051575800, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 1051570800, 0, 903050500);
});

$Event(1051572811, Restart, function() {
    EndIf(EventFlag(1051570800));
    WaitFor(CharacterHasSpEffect(1051570800, 11155));
    SetEventFlagID(1051572802, ON);
});

$Event(1051572812, Restart, function() {
    DisableNetworkSync();
    EndIf(EventFlag(1051570800));
    WaitFor(
        !EventFlag(1051570800)
            && CharacterHPValue(1051570800) != 0
            && CharacterHasSpEffect(1051570800, 11135));
    WaitFor(!CharacterHasSpEffect(1051570800, 11135));
    EndIf(CharacterHPValue(1051570800) == 0);
    RestartEvent();
});

$Event(1051572820, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    if (EventFlag(1051570800)) {
        DisableCharacter(X4_4);
        DisableCharacterCollision(X4_4);
        ForceCharacterDeath(X4_4, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(X4_4);
    DisableCharacter(X4_4);
    WaitFor(CharacterHasSpEffect(X0_4, X8_4) && !CharacterDead(X0_4));
    EnableCharacter(X4_4);
    EnableCharacterCollision(X4_4);
    EnableCharacterAI(X4_4);
    ForceAnimationPlayback(X4_4, X12_4, false, true, false);
});

$Event(1051572821, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    if (EventFlag(X0_4)) {
        DisableCharacter(X4_4);
        DisableCharacterCollision(X4_4);
        ForceCharacterDeath(X4_4, false);
        EndEvent();
    }
L0:
    WaitFor(CharacterHasSpEffect(X0_4, X8_4) || CharacterDead(X0_4));
    ForceAnimationPlayback(X4_4, X12_4, false, false, true);
    WaitFixedTimeFrames(300);
    DisableCharacter(X4_4);
    DisableCharacterCollision(X4_4);
    ForceCharacterDeath(X4_4, false);
    EndEvent();
});

$Event(1051572822, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    EndIf(EventFlag(X0_4));
    WaitFor(CharacterDead(X4_4) && CharacterDead(X8_4));
    SetSpEffect(X0_4, X12_4);
});

$Event(1051572828, Restart, function(X0_4) {
    EndIf(EventFlag(1051570800));
    WaitFor(InArea(35000, X0_4));
    WaitFixedTimeRealFrames(1);
    SetSpEffect(35000, 10859);
});

$Event(1051572829, Restart, function(X0_4) {
    EndIf(EventFlag(1051570800));
    DisableNetworkSync();
    WaitFor(InArea(20000, X0_4));
    SetSpEffect(20000, 10859);
    WaitFixedTimeSeconds(0.1);
    WaitFor(!InArea(20000, X0_4));
    WaitFixedTimeSeconds(0.1);
    ClearSpEffect(20000, 10859);
    RestartEvent();
});

$Event(1051572849, Default, function() {
    InitializeCommonEvent(0, 9005800, 1051570800, 1051571800, 1051572800, 1051572805, 1051575800, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 1051570800, 1051571800, 1051572800, 1051572805, 1051572806, 10000);
    InitializeCommonEvent(0, 9005811, 1051570800, 1051571800, 3, 0);
    InitializeCommonEvent(0, 9005811, 1051570800, 1051571801, 3, 0);
    InitializeCommonEvent(0, 9005822, 1051570800, 950000, 1051572805, 1051572806, 0, 1051572802, 0, 0);
});

$Event(200, Default, function() {
    InitializeEvent(0, 1051572581, 0);
    InitializeCommonEvent(0, 90005451, 1251570400, 1251576420);
    InitializeCommonEvent(0, 90005452, 1251570400, 1251570400);
    InitializeCommonEvent(0, 90005454, 1251570400, 1251572400, 1251570400);
    InitializeCommonEvent(0, 90005458, 1251570400, 1251571401);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571420, 101, 0);
    InitializeCommonEvent(1, 90005453, 1251570400, 1251571421, 102, 1036831949);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571422, 103, 1045220557);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571423, 104, 1050253722);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571424, 105, 1053609165);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571425, 106, 1056964608);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571426, 107, 1058642330);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571427, 108, 1060320051);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571428, 109, 1061997773);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571429, 110, 1063675494);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571430, 111, 1065353216);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571436, 117, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571437, 118, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571438, 119, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571439, 120, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571440, 121, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571441, 122, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571442, 123, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571443, 124, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571444, 125, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571445, 126, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571446, 127, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571447, 128, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571452, 133, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571453, 134, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571454, 135, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571455, 136, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571456, 137, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571457, 138, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571458, 139, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571459, 140, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571460, 141, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571461, 142, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571468, 149, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571469, 150, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571470, 151, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571471, 152, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571472, 153, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571473, 154, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571474, 155, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571475, 156, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571476, 157, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571477, 158, 0);
    InitializeCommonEvent(0, 90005453, 1251570400, 1251571478, 159, 0);
    InitializeCommonEvent(0, 90005456, 1251570400, 1251571410, 1251571418, 1251570400);
});

$Event(250, Default, function() {
    InitializeCommonEvent(0, 90005450, 1251570400, 1251571400, 1251571410, 1251571418);
});
