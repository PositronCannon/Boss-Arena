// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    InitializeCommonEvent(0, 90001001, 0);
    RegisterBonfire(71223, 12021953, 0, 0, 0, 5);
    RegisterBonfire(71224, 12021954, 0, 0, 0, 5);
    RegisterBonfire(71226, 12021956, 0, 0, 0, 5);
    RegisterBonfire(71227, 12021957, 0, 0, 0, 5);
    RegisterBonfire(71228, 12021958, 0, 0, 0, 5);
    RegisterBonfire(71229, 12021959, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 12020850, 71221, 12020951, 12021951, 1084227584);
    InitializeCommonEvent(0, 9005810, 12020800, 71220, 12020950, 12021950, 1084227584);
    InitializeEvent(0, 12022503, 0);
    InitializeEvent(0, 12022580, 0);
    InitializeCommonEvent(0, 90005920, 12020900, 12021900, 12023900);
    InitializeCommonEvent(0, 900005610, 12021682, 100, 800, 0);
    InitializeCommonEvent(0, 900005610, 12021683, 100, 800, 0);
    InitializeEvent(0, 12022800, 0);
    InitializeEvent(0, 12022810, 0);
    InitializeEvent(0, 12022849, 0);
    InitializeEvent(0, 12022820, 0);
    InitializeEvent(0, 12022821, 0);
    InitializeEvent(0, 12022850, 0);
    InitializeEvent(0, 12022860, 0);
    InitializeEvent(0, 12022865, 12020860, 12020850, 63010);
    InitializeEvent(0, 12022899, 0);
    InitializeCommonEvent(0, 90005501, 12020520, 12021520, 5, 12021520, 1049401521, 12021522, 12020522);
    InitializeCommonEvent(0, 90005620, 12020570, 12021570, 12021571, 12021572, 12022570, 12022571, 12022572);
    InitializeEvent(0, 12022567, 12020570, 12022570);
    InitializeEvent(0, 12022569, 12020524, 12020570);
    InitializeEvent(0, 12020500, 0);
    InitializeCommonEvent(0, 90005620, 12020575, 12021575, 12021576, 0, 12022575, 12022576, 12022577);
    InitializeEvent(0, 12022568, 12020575, 12021578);
    InitializeEvent(0, 12020510, 0);
    InitializeEvent(0, 12022670, 0);
    InitializeCommonEvent(0, 90005605, 12021203, 524, 12022203, 12020000, 12022203, 12022210, 12022211, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005605, 12021204, 524, 12022204, 12020000, 12022204, 12022212, 12022213, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005605, 12021205, 524, 12022205, 12020000, 12022205, 12022215, 12022206, 0, 0, 0, 0);
    InitializeEvent(0, 12022600, 0);
    InitializeEvent(0, 12022609, 0);
    InitializeEvent(0, 12022620, 0);
    InitializeEvent(0, 12022629, 0);
    InitializeEvent(0, 12022601, 12020600, 12021600, 12021610);
    InitializeEvent(1, 12022601, 12020601, 12021601, 12021611);
    InitializeEvent(2, 12022601, 12020602, 12021602, 12021612);
    InitializeEvent(3, 12022601, 12020603, 12021603, 12021613);
    InitializeEvent(4, 12022601, 12020604, 12021604, 12021614);
    InitializeEvent(5, 12022601, 12020605, 12021605, 12021615);
    InitializeEvent(6, 12022601, 12020606, 12021606, 12021616);
    InitializeEvent(7, 12022601, 12020607, 12021607, 12021617);
    InitializeEvent(0, 12022621, 12020620, 12021620, 12021630);
    InitializeEvent(1, 12022621, 12020621, 12021621, 12021631);
    InitializeEvent(2, 12022621, 12020622, 12021622, 12021632);
    InitializeEvent(3, 12022621, 12020623, 12021623, 12021633);
    InitializeEvent(4, 12022621, 12020624, 12021624, 12021634);
    InitializeEvent(5, 12022621, 12020625, 12021625, 12021635);
    InitializeEvent(6, 12022621, 12020626, 12021626, 12021636);
    InitializeEvent(7, 12022621, 12020627, 12021627, 12021637);
    InitializeCommonEvent(0, 90005250, 12020211, 12022211, 0, -1);
    InitializeCommonEvent(0, 90005261, 12020220, 12022220, 1116471296, 0, -1);
    InitializeCommonEvent(0, 90005261, 12020221, 12022220, 1116471296, 0, -1);
    InitializeCommonEvent(0, 90005300, 12020221, 12020221, 0, 0, -1);
    InitializeEvent(0, 12022300, 12020300, 12022300, 0);
    InitializeEvent(1, 12022300, 12020301, 12022300, 0);
    InitializeEvent(2, 12022300, 12020303, 12022302, 0);
    InitializeCommonEvent(0, 90005250, 12020303, 12022302, 0, 3006);
    InitializeEvent(3, 12022300, 12025303, 12022303, 0);
    InitializeEvent(4, 12022300, 12025304, 12022304, 0);
    InitializeCommonEvent(0, 90005250, 12020304, 12022304, 0, -1);
    InitializeEvent(5, 12022300, 12025305, 12022305, 0);
    InitializeCommonEvent(0, 90005250, 12020310, 12022305, 1073741824, 3011);
    InitializeEvent(6, 12022300, 12025306, 12022306, 0);
    InitializeEvent(7, 12022300, 12025307, 12022307, 0);
    InitializeEvent(8, 12022300, 12025308, 12022308, 0);
    InitializeEvent(9, 12022300, 12025309, 12022309, 0);
    InitializeCommonEvent(0, 90005251, 12020340, 1086324736, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020341, 1086324736, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020342, 1086324736, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020343, 1086324736, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020344, 1086324736, 0, -1);
    InitializeCommonEvent(0, 90005261, 0, 0, 0, 0, 0);
    InitializeEvent(10, 12022300, 12025310, 12022310, 0);
    InitializeEvent(11, 12022300, 12025311, 12022311, 0);
    InitializeEvent(12, 12022300, 12025312, 12022312, 0);
    InitializeEvent(13, 12022300, 12020313, 12022313, 0);
    InitializeEvent(15, 12022300, 12025315, 12022315, 0);
    InitializeEvent(16, 12022300, 12020316, 12022316, 0);
    InitializeCommonEvent(0, 90005250, 12020316, 12022316, 0, 3006);
    InitializeEvent(17, 12022300, 12020317, 12022317, 0);
    InitializeEvent(18, 12022300, 12025318, 12022318, 0);
    InitializeEvent(19, 12022300, 12020319, 12022319, 0);
    InitializeCommonEvent(0, 90005250, 12020319, 12022319, 0, -1);
    InitializeEvent(20, 12022300, 12020331, 12022331, 0);
    InitializeEvent(21, 12022300, 12020334, 12022334, 0);
    InitializeEvent(22, 12022300, 12020335, 12022334, 0);
    InitializeEvent(23, 12022300, 12020336, 12022336, 1077936128);
    InitializeEvent(24, 12022300, 12020337, 12022336, 0);
    InitializeCommonEvent(0, 90005250, 12020336, 12022336, 0, 3006);
    InitializeCommonEvent(0, 90005250, 12020337, 12022336, 0, 3006);
    InitializeEvent(25, 12022300, 12025324, 12022314, 0);
    InitializeEvent(26, 12022300, 12025325, 12022314, 0);
    InitializeEvent(29, 12022300, 12025329, 12022329, 0);
    InitializeCommonEvent(0, 90005201, 12020376, 30011, 20011, 1082130432, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 12020377, 30011, 20011, 1082130432, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 12020378, 30011, 20011, 1088421888, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 12020379, 30011, 20011, 1088421888, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005251, 12020348, 1120403456, 0, -1);
    InitializeEvent(0, 12022350, 12020390, 12025350);
    InitializeEvent(0, 12022360, 12020390, 12025350);
    InitializeEvent(0, 12022370, 0);
    InitializeEvent(0, 12022371, 0);
    InitializeCommonEvent(0, 90005250, 12020390, 12022350, 1077936128, -1);
    InitializeEvent(0, 12022372, 0);
    InitializeEvent(0, 12022373, 0);
    InitializeEvent(1, 12022350, 12020391, 12025351);
    InitializeEvent(1, 12022360, 12020391, 12025351);
    InitializeEvent(2, 12022350, 12020392, 12025352);
    InitializeEvent(2, 12022360, 12020392, 12025352);
    InitializeCommonEvent(0, 90005250, 12020350, 12022350, 1077936128, -1);
    InitializeCommonEvent(0, 90005250, 12020351, 12022350, 0, -1);
    InitializeCommonEvent(0, 90005250, 12020368, 12022366, 0, 3006);
    InitializeCommonEvent(0, 90005250, 12020368, 12022368, 0, -1);
    InitializeCommonEvent(0, 90005860, 12020830, 0, 12020830, 1, 30620, 0);
    InitializeCommonEvent(0, 90005870, 12020830, 904650600, 25);
    InitializeCommonEvent(0, 90005251, 12020471, 1106247680, 0, 3009);
    InitializeCommonEvent(0, 90005300, 12020470, 12020470, 40648, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12020472, 12020472, 40630, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12020474, 12020474, 40610, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12020477, 12020477, 40642, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12020479, 12020479, 40646, 1069547520, 0);
    InitializeCommonEvent(0, 90005250, 12020420, 12022420, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020421, 1114636288, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020424, 1120403456, 0, -1);
    InitializeCommonEvent(0, 90005261, 12020422, 12022422, 1110704128, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020424, 1114636288, 0, -1);
    InitializeCommonEvent(0, 90005251, 12020431, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005300, 12020430, 12020430, 12020435, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12020431, 12020431, 12020445, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12020434, 12020434, 0, 1069547520, 0);
    InitializeCommonEvent(0, 90005261, 12020440, 12022440, 1097859072, 0, -1);
    InitializeCommonEvent(0, 90005261, 12020442, 12022442, 1097859072, 0, -1);
    InitializeEvent(0, 12022440, 12020431, 12020440, 12023440);
    InitializeEvent(1, 12022440, 12020431, 12020441, 12023440);
    InitializeEvent(2, 12022440, 12020431, 12020442, 12023440);
    InitializeEvent(3, 12022440, 12020447, 12020444, 12023444);
    InitializeEvent(4, 12022440, 12020447, 12020445, 12023444);
    InitializeEvent(5, 12022440, 12020447, 12020446, 12023444);
    InitializeEvent(6, 12022440, 12020447, 12020448, 12023444);
    InitializeEvent(7, 12022440, 12020447, 12020449, 12023444);
    InitializeCommonEvent(0, 90005250, 12020450, 12022450, 1069547520, -1);
    InitializeCommonEvent(0, 90005250, 12020451, 12022450, 1073741824, -1);
    InitializeCommonEvent(0, 90005250, 12020452, 12022450, 1077936128, -1);
    InitializeCommonEvent(0, 90005250, 12020453, 12022450, 1075838976, -1);
    InitializeCommonEvent(0, 90005250, 12020454, 12022450, 0, -1);
    InitializeCommonEvent(0, 90005250, 12020455, 12022450, 0, -1);
    InitializeCommonEvent(0, 90005251, 12025461, 1101004800, 0, -1);
    InitializeEvent(0, 12022419, 12020400, 12020490, 12022400);
    InitializeEvent(1, 12022400, 12020380, 12020491, 12022401);
    InitializeCommonEvent(0, 90005261, 12020380, 12022411, 1101004800, 0, -1);
    InitializeEvent(2, 12022400, 12020402, 12020492, 12022402);
    InitializeCommonEvent(0, 90005261, 12020402, 12022412, 1101004800, 0, -1);
    InitializeEvent(3, 12022400, 12020403, 12020493, 12022403);
    InitializeEvent(4, 12022400, 12020404, 12020494, 12022404);
    InitializeEvent(5, 12022400, 12020405, 12020495, 12022405);
    InitializeEvent(6, 12022400, 12020406, 12020496, 12022406);
    InitializeEvent(7, 12022400, 12020407, 12020497, 12022407);
    InitializeEvent(10, 12022400, 12020410, 12020480, 12022410);
    InitializeCommonEvent(0, 90005702, 12020710, 4063, 4060, 4063);
    InitializeEvent(0, 12020700, 12020710, 12021711, 12021710);
    InitializeEvent(0, 12020701, 12022716);
    InitializeCommonEvent(0, 90005752, 12021710, 200, 120, 1077936128);
    InitializeEvent(0, 12023720, 12020720);
    InitializeCommonEvent(0, 90005703, 12020720, 3601, 3602, 12029151, 3603, 3600, 3603, -1);
    InitializeCommonEvent(0, 90005704, 12020720, 3601, 3600, 12029151, 3);
    InitializeCommonEvent(0, 90005702, 12020720, 3603, 3600, 3603);
    InitializeEvent(0, 12023721, 12021701, 1077936128, 9710, 1034509410);
    InitializeEvent(0, 12023710, 12020700, 12020701);
    InitializeCommonEvent(0, 90005725, 4800, 4801, 4803, 12029105, 12020705, 1035450701, 12026700);
    InitializeCommonEvent(0, 90005703, 12020705, 4801, 4802, 12029106, 4801, 4800, 4804, 0);
    InitializeCommonEvent(0, 90005704, 12020705, 4801, 4800, 12029106, 3);
    InitializeCommonEvent(0, 90005702, 12020705, 4803, 4800, 4804);
    InitializeCommonEvent(0, 90005706, 12020730, 930023, 0);
    InitializeCommonEvent(0, 90005780, 12020800, 12022160, 12022161, 12020715, 20, 12022716, 12029019, 1, 0);
    InitializeCommonEvent(0, 90005781, 12020800, 12022160, 12022161, 12020715);
    InitializeEvent(0, 12022699, 0);
    InitializeEvent(0, 12022698, 0);
});

$Event(50, Default, function() {
    SetCharacterBackreadState(12020700, true);
    SetCharacterBackreadState(12020720, true);
    SetCharacterBackreadState(12020730, true);
    DisableAsset(12021710);
    InitializeEvent(0, 12020519, 0);
    InitializeEvent(0, 12020050, 0);
});

$Event(12022699, Restart, function() {
    WaitFor(EventFlag(12022805));
    if (!InArea(12020715, 12022717)) {
        InitializeCommonEvent(0, 90005784, 12022160, 12022805, 12020715, 12022800, 12022809, 0);
        EndEvent();
    }
L10:
    EndEvent();
});

$Event(12022698, Restart, function() {
    EndIf(EventFlag(12020800));
    WaitFor(EventFlag(12022160));
    DisableHit(12021698);
});

$Event(12022569, Restart, function(X0_4, X4_4) {
    DisableNetworkSync();
    EndIf(EventFlag(X0_4));
    WaitFor(EventFlag(X4_4));
    if (PlayerIsInOwnWorld()) {
        SetNetworkconnectedEventFlagID(X0_4, ON);
    }
    RestartEvent();
});

$Event(12022568, Default, function(X0_4, X4_4) {
    DisableNetworkSync();
    if (EventFlag(X0_4)) {
        DisableAsset(X4_4);
        EndEvent();
    }
L0:
    CreateAssetfollowingSFX(X4_4, 101, 806043);
    WaitFor(PlayerIsInOwnWorld() && EventFlag(X0_4));
    DeleteAssetfollowingSFX(X4_4, true);
    PlaySE(X4_4, SoundType.SFX, 90011);
    WaitFixedTimeSeconds(0.5);
    DisableAsset(X4_4);
});

$Event(12022567, Default, function(X0_4, X4_4) {
    DisableNetworkSync();
    WaitFor(InArea(10000, X4_4) && EventFlag(X0_4));
    SetSpEffect(10000, 4150);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

$Event(12022600, Restart, function() {
    if (EventFlag(12020609)) {
        DeleteAssetfollowingSFX(12021609, true);
        CreateAssetfollowingSFX(12021609, 200, 812600);
        EndEvent();
    }
L0:
    WaitFor(
        EventFlag(12020600)
            && EventFlag(12020601)
            && EventFlag(12020602)
            && EventFlag(12020603)
            && EventFlag(12020604)
            && EventFlag(12020605)
            && EventFlag(12020606)
            && EventFlag(12020607));
    SetNetworkconnectedEventFlagID(12020609, ON);
    DeleteAssetfollowingSFX(12021609, true);
    CreateAssetfollowingSFX(12021609, 200, 812600);
    WaitFixedTimeSeconds(3);
    DisplayGenericDialog(30010, PromptType.OKCANCEL, NumberofOptions.NoButtons, 0, 5);
});

$Event(12022601, Restart, function(X0_4, X4_4, X8_4) {
    if (EventFlag(X0_4)) {
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        EndEvent();
    }
L0:
    EnableCharacterCollision(10000);
    if (PlayerIsInOwnWorld()) {
        WaitFor(ActionButtonInArea(9524, X4_4) && PlayerIsInOwnWorld());
        DisableCharacterCollision(10000);
        RotateCharacter(10000, X4_4, -1, true);
        ForceAnimationPlayback(10000, 60010, false, false, false);
        WaitFixedTimeSeconds(1.3);
        SetNetworkconnectedEventFlagID(X0_4, ON);
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        WaitFixedTimeSeconds(2);
        EnableCharacterCollision(10000);
        EndEvent();
    }
L10:
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1.3);
    DeleteAssetfollowingSFX(X4_4, true);
    DeleteAssetfollowingSFX(X8_4, true);
    CreateAssetfollowingSFX(X4_4, 200, 812070);
    CreateAssetfollowingSFX(X4_4, 201, 812070);
    CreateAssetfollowingSFX(X8_4, 200, 812070);
    EndEvent();
});

$Event(12022609, Default, function() {
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(12020609)) {
            SetNetworkconnectedEventFlagID(12022610, OFF);
            WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9525, 12021609));
            SetNetworkconnectedEventFlagID(12022610, ON);
            RotateCharacter(10000, 12021609, -1, true);
            ForceAnimationPlayback(10000, 60010, false, false, false);
            WaitFixedTimeSeconds(0.4);
            SendInvadingPhantomsHome(0);
            WaitFixedTimeSeconds(1);
            WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12082400, -1, 0, false, true);
            WaitFixedTimeFrames(1);
            RestartEvent();
        }
L1:
        WaitFor(EventFlag(12020609));
        RestartEvent();
    }
L10:
    EndIf(CharacterType(10000, TargetType.BlackPhantom));
    WaitFor(EventFlag(12022610));
    WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12022202, -1, 0, false, true);
    WaitFixedTimeSeconds(5);
    WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12082401, -1, 0, false, true);
    RestartEvent();
});

$Event(12022620, Restart, function() {
    if (EventFlag(12020629)) {
        DeleteAssetfollowingSFX(12021629, true);
        CreateAssetfollowingSFX(12021629, 200, 812600);
        EndEvent();
    }
L0:
    WaitFor(
        EventFlag(12020620)
            && EventFlag(12020621)
            && EventFlag(12020622)
            && EventFlag(12020623)
            && EventFlag(12020624)
            && EventFlag(12020625));
    SetNetworkconnectedEventFlagID(12020629, ON);
    DeleteAssetfollowingSFX(12021629, true);
    CreateAssetfollowingSFX(12021629, 200, 812600);
    WaitFixedTimeSeconds(3);
    DisplayGenericDialog(30010, PromptType.OKCANCEL, NumberofOptions.NoButtons, 0, 5);
});

$Event(12022621, Restart, function(X0_4, X4_4, X8_4) {
    if (EventFlag(X0_4)) {
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        EndEvent();
    }
L0:
    if (PlayerIsInOwnWorld()) {
        EnableCharacterCollision(10000);
        WaitFor(ActionButtonInArea(9524, X4_4) && PlayerIsInOwnWorld());
        RotateCharacter(10000, X4_4, -1, true);
        ForceAnimationPlayback(10000, 60010, false, false, false);
        DisableCharacterCollision(10000);
        WaitFixedTimeSeconds(1.3);
        SetNetworkconnectedEventFlagID(X0_4, ON);
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        WaitFixedTimeSeconds(2);
        EnableCharacterCollision(10000);
        EndEvent();
    }
L10:
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1.3);
    DeleteAssetfollowingSFX(X4_4, true);
    DeleteAssetfollowingSFX(X8_4, true);
    CreateAssetfollowingSFX(X4_4, 200, 812070);
    CreateAssetfollowingSFX(X4_4, 201, 812070);
    CreateAssetfollowingSFX(X8_4, 200, 812070);
    EndEvent();
});

$Event(12022629, Default, function() {
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(12020629)) {
            SetNetworkconnectedEventFlagID(12022630, OFF);
            WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9525, 12021629));
            RotateCharacter(10000, 12021629, -1, true);
            ForceAnimationPlayback(10000, 60010, false, false, false);
            SetNetworkconnectedEventFlagID(12022630, ON);
            WaitFixedTimeSeconds(0.4);
            if (!HasMultiplayerState(MultiplayerState.Singleplayer)) {
                if (EventFlag(12090800)) {
                    SendAllPhantomsHome();
                } else {
                    SendInvadingPhantomsHome(0);
                }
            }
            WaitFixedTimeSeconds(2);
            WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12092400, -1, 0, false, true);
            WaitFixedTimeFrames(1);
            RestartEvent();
        }
L1:
        WaitFor(EventFlag(12020629));
        RestartEvent();
    }
L10:
    EndIf(CharacterType(10000, TargetType.BlackPhantom));
    WaitFor(EventFlag(12022630));
    WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12022209, -1, 0, false, true);
    WaitFixedTimeSeconds(5);
    WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12092401, -1, 0, false, true);
    RestartEvent();
});

$Event(12022670, Default, function() {
    if (!ThisEventSlot()) {
        DeleteAssetfollowingSFX(12021670, true);
        CreateAssetfollowingSFX(12021670, 200, 806870);
    }
    SetEventFlagID(12022670, OFF);
    SetEventFlagID(12022671, OFF);
    if (PlayerIsInOwnWorld()) {
        WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9140, 12021670));
        DisplayGenericDialogAndSetEventFlags(4300, PromptType.YESNO, NumberofOptions.TwoButtons, 12021670, 3, 12022670, 12022671, 12022671);
        if (!EventFlag(12022670)) {
            WaitFixedTimeSeconds(1);
            RestartEvent();
        }
L6:
        SetNetworkconnectedEventFlagID(12022670, ON);
        SendInvadingPhantomsHome(0);
        RotateCharacter(10000, 12021670, -1, true);
        ForceAnimationPlayback(10000, 60490, false, false, false);
        WaitFixedTimeSeconds(3);
        WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12022670, -1, 10000, false, true);
        RestartEvent();
    }
L10:
    WaitFor(EventFlag(12022670));
    WaitFixedTimeSeconds(3);
    WarpCharacterAndCopyFloorWithFadeout(10000, TargetEntityType.Area, 12022671, -1, 10000, false, false);
    RestartEvent();
});

$Event(12022580, Restart, function() {
    RegisterLadder(12020580, 12020581, 12021580);
    RegisterLadder(12020582, 12020583, 12021582);
    RegisterLadder(12020584, 12020585, 12021584);
});

$Event(12022680, Restart, function() {
    CreateAssetfollowingSFX(12021682, 100, 800);
    CreateAssetfollowingSFX(12021683, 100, 800);
});

$Event(12022200, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(ThisEventSlot());
    WaitFor(
        ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
            || CharacterType(10000, TargetType.Alive)
            || CharacterType(10000, TargetType.GrayPhantom)
            || CharacterType(10000, TargetType.WhitePhantom))
            && InArea(10000, X0_4));
    ClearSpEffect(X4_4, X8_4);
});

$Event(12022404, Restart, function() {
    EndIf(ThisEventSlot());
    WaitFor(
        CharacterAIState(12020404, AIStateType.Combat)
            || CharacterAIState(12020494, AIStateType.Combat));
    ChangeCharacterPatrolBehavior(12020405, 12023405);
    SetNetworkconnectedThisEventSlot(ON);
    EndEvent();
});

$Event(12022300, Restart, function(X0_4, X4_4, X8_4) {
    if (ThisEventSlot()) {
        EnableCharacter(X0_4);
        EndEvent();
    }
    DisableCharacter(X0_4);
    WaitFor(
        ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
            || CharacterType(10000, TargetType.Alive)
            || CharacterType(10000, TargetType.GrayPhantom)
            || CharacterType(10000, TargetType.WhitePhantom))
            && InArea(10000, X4_4));
    WaitFixedTimeSeconds(X8_4);
    EnableCharacter(X0_4);
    EndEvent();
});

$Event(12022350, Restart, function(X0_4, X4_4) {
    WaitFor(EntityInRadiusOfEntity(X0_4, 10000, 60, 1) && CharacterHasSpEffect(X0_4, 5080));
    WaitFixedTimeFrames(30);
    SetSpEffect(X4_4, 13190);
    WaitFixedTimeFrames(1);
    RestartEvent();
});

$Event(12022360, Restart, function(X0_4, X4_4) {
    WaitFor(EntityInRadiusOfEntity(X0_4, 10000, 60, 1) && !CharacterHasSpEffect(X0_4, 5080));
    ClearSpEffect(X4_4, 13190);
    WaitFixedTimeFrames(30);
    RestartEvent();
});

$Event(12022370, Restart, function() {
    EndIf(ThisEventSlot());
    WaitFor(
        CharacterAIState(12020350, AIStateType.Combat)
            || CharacterAIState(12020351, AIStateType.Combat)
            || CharacterAIState(12020390, AIStateType.Combat));
    ForceAnimationPlayback(12020390, 30003, true, false, false);
    EndEvent();
});

$Event(12022371, Restart, function() {
    EndIf(SpecialStandbyEndedFlag(12020390));
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(12020390, 5080) || CharacterHasSpEffect(12020390, 5450);
    sp2 = CharacterHasSpEffect(12020390, 481)
        && !CharacterHasSpEffect(12020390, 90100)
        && !CharacterHasSpEffect(12020390, 90110)
        && !CharacterHasSpEffect(12020390, 90160);
    sp3 = CharacterHasSpEffect(12020390, 482)
        && !CharacterHasSpEffect(12020390, 90100)
        && !CharacterHasSpEffect(12020390, 90120)
        && !CharacterHasSpEffect(12020390, 90160)
        && !CharacterHasSpEffect(12020390, 90162);
    sp4 = CharacterHasSpEffect(12020390, 483)
        && !CharacterHasSpEffect(12020390, 90100)
        && !CharacterHasSpEffect(12020390, 90140)
        && !CharacterHasSpEffect(12020390, 90160)
        && !CharacterHasSpEffect(12020390, 90161);
    sp5 = CharacterHasSpEffect(12020390, 484)
        && !CharacterHasSpEffect(12020390, 90100)
        && !CharacterHasSpEffect(12020390, 90130)
        && !CharacterHasSpEffect(12020390, 90161)
        && !CharacterHasSpEffect(12020390, 90162);
    sp6 = CharacterHasSpEffect(12020390, 487)
        && !CharacterHasSpEffect(12020390, 90100)
        && !CharacterHasSpEffect(12020390, 90150)
        && !CharacterHasSpEffect(12020390, 90160);
    areaChrSp = EntityInRadiusOfEntity(10000, 12020390, 6, 1)
        && CharacterBackreadStatus(12020390)
        && sp
        && chrSp;
    WaitFor(
        areaChrSp
            || HasDamageType(12020390, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(12020390, 436)
            || CharacterHasStateInfo(12020390, 2)
            || CharacterHasStateInfo(12020390, 5)
            || CharacterHasStateInfo(12020390, 6)
            || CharacterHasStateInfo(12020390, 260)
            || CharacterDead(12020351)
            || sp2
            || sp3
            || sp4
            || sp5
            || sp6);
    WaitFixedTimeSeconds(0.1);
    SetSpecialStandbyEndedFlag(12020390, ON);
    if (!(!CharacterHasSpEffect(12020390, 5080) && !CharacterHasSpEffect(12020390, 5450))) {
        WaitFixedTimeSeconds(0);
        ForceAnimationPlayback(12020390, 20003, true, false, false);
    }
L0:
    EndEvent();
});

$Event(12022372, Restart, function() {
    EndIf(SpecialStandbyEndedFlag(12020391));
    ForceAnimationPlayback(12020391, 30003, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(12020391, 5080) || CharacterHasSpEffect(12020391, 5450);
    sp2 = CharacterHasSpEffect(12020391, 481)
        && !CharacterHasSpEffect(12020391, 90100)
        && !CharacterHasSpEffect(12020391, 90110)
        && !CharacterHasSpEffect(12020391, 90160);
    sp3 = CharacterHasSpEffect(12020391, 482)
        && !CharacterHasSpEffect(12020391, 90100)
        && !CharacterHasSpEffect(12020391, 90120)
        && !CharacterHasSpEffect(12020391, 90160)
        && !CharacterHasSpEffect(12020391, 90162);
    sp4 = CharacterHasSpEffect(12020391, 483)
        && !CharacterHasSpEffect(12020391, 90100)
        && !CharacterHasSpEffect(12020391, 90140)
        && !CharacterHasSpEffect(12020391, 90160)
        && !CharacterHasSpEffect(12020391, 90161);
    sp5 = CharacterHasSpEffect(12020391, 484)
        && !CharacterHasSpEffect(12020391, 90100)
        && !CharacterHasSpEffect(12020391, 90130)
        && !CharacterHasSpEffect(12020391, 90161)
        && !CharacterHasSpEffect(12020391, 90162);
    sp6 = CharacterHasSpEffect(12020391, 487)
        && !CharacterHasSpEffect(12020391, 90100)
        && !CharacterHasSpEffect(12020391, 90150)
        && !CharacterHasSpEffect(12020391, 90160);
    areaChrSp = EntityInRadiusOfEntity(10000, 12020391, 6, 1)
        && CharacterBackreadStatus(12020391)
        && sp
        && chrSp;
    chr = CharacterDead(12020360) && CharacterDead(12020353) && CharacterDead(12020354);
    WaitFor(
        areaChrSp
            || HasDamageType(12020391, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(12020391, 436)
            || CharacterHasStateInfo(12020391, 2)
            || CharacterHasStateInfo(12020391, 5)
            || CharacterHasStateInfo(12020391, 6)
            || CharacterHasStateInfo(12020391, 260)
            || chr
            || sp2
            || sp3
            || sp4
            || sp5
            || sp6);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(12020391, ON);
    if (!(!CharacterHasSpEffect(12020391, 5080) && !CharacterHasSpEffect(12020391, 5450))) {
        WaitFixedTimeSeconds(0);
        ForceAnimationPlayback(12020391, 20003, true, false, false);
    }
L0:
    EndEvent();
});

$Event(12022373, Restart, function() {
    EndIf(SpecialStandbyEndedFlag(12020392));
    ForceAnimationPlayback(12020392, 30003, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(12020392, 5080) || CharacterHasSpEffect(12020392, 5450);
    sp2 = CharacterHasSpEffect(12020392, 481)
        && !CharacterHasSpEffect(12020392, 90100)
        && !CharacterHasSpEffect(12020392, 90110)
        && !CharacterHasSpEffect(12020392, 90160);
    sp3 = CharacterHasSpEffect(12020392, 482)
        && !CharacterHasSpEffect(12020392, 90100)
        && !CharacterHasSpEffect(12020392, 90120)
        && !CharacterHasSpEffect(12020392, 90160)
        && !CharacterHasSpEffect(12020392, 90162);
    sp4 = CharacterHasSpEffect(12020392, 483)
        && !CharacterHasSpEffect(12020392, 90100)
        && !CharacterHasSpEffect(12020392, 90140)
        && !CharacterHasSpEffect(12020392, 90160)
        && !CharacterHasSpEffect(12020392, 90161);
    sp5 = CharacterHasSpEffect(12020392, 484)
        && !CharacterHasSpEffect(12020392, 90100)
        && !CharacterHasSpEffect(12020392, 90130)
        && !CharacterHasSpEffect(12020392, 90161)
        && !CharacterHasSpEffect(12020392, 90162);
    sp6 = CharacterHasSpEffect(12020392, 487)
        && !CharacterHasSpEffect(12020392, 90100)
        && !CharacterHasSpEffect(12020392, 90150)
        && !CharacterHasSpEffect(12020392, 90160);
    areaChrSp = EntityInRadiusOfEntity(10000, 12020392, 6, 1)
        && CharacterBackreadStatus(12020392)
        && sp
        && chrSp;
    chr = CharacterDead(12020370) && CharacterDead(12020371) && CharacterDead(12020372);
    WaitFor(
        areaChrSp
            || HasDamageType(12020392, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(12020392, 436)
            || CharacterHasStateInfo(12020392, 2)
            || CharacterHasStateInfo(12020392, 5)
            || CharacterHasStateInfo(12020392, 6)
            || CharacterHasStateInfo(12020392, 260)
            || chr
            || sp2
            || sp3
            || sp4
            || sp5
            || sp6);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(12020392, ON);
    if (!(!CharacterHasSpEffect(12020392, 5080) && !CharacterHasSpEffect(12020392, 5450))) {
        WaitFixedTimeSeconds(0);
        ForceAnimationPlayback(12020392, 20003, true, false, false);
    }
L0:
    EndEvent();
});

$Event(12022400, Restart, function(X0_4, X4_4, X8_4) {
    if (CharacterDead(X4_4)) {
        DisableCharacter(X0_4);
    }
    if (ThisEventSlot() && !PlayerIsInOwnWorld()) {
        DisableCharacter(X0_4);
        DisableCharacterCollision(X0_4);
        EndEvent();
    }
L0:
    if (PlayerIsInOwnWorld()) {
        SetThisEventSlot(OFF);
    }
    DisableCharacter(X4_4);
    DisableCharacterCollision(X4_4);
    WaitFor(CharacterHasSpEffect(X0_4, 16307));
    EnableCharacter(X4_4);
    EnableCharacterCollision(X4_4);
    DisableCharacterCollision(X0_4);
    WaitFixedTimeFrames(5);
    WarpCharacterAndCopyFloor(X4_4, TargetEntityType.Character, X0_4, 900, X0_4);
    ForceAnimationPlayback(X4_4, 63010, false, false, true);
    SetSpEffect(X4_4, 16316);
    WaitFixedTimeSeconds(4.4);
    DisableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterAI(X0_4);
    EnableCharacterAI(X4_4);
    SetCharacterHome(X4_4, X8_4);
});

$Event(12022419, Restart, function(X0_4, X4_4, X8_4) {
    if (CharacterDead(X4_4)) {
        DisableCharacter(X0_4);
    }
    if (ThisEventSlot() && !PlayerIsInOwnWorld()) {
        DisableCharacter(X0_4);
        DisableCharacterCollision(X0_4);
        EndEvent();
    }
L0:
    if (PlayerIsInOwnWorld()) {
        SetThisEventSlot(OFF);
    }
    DisableCharacter(X4_4);
    DisableCharacterCollision(X4_4);
    WaitFor(CharacterHasSpEffect(X0_4, 16309));
    EnableCharacter(X4_4);
    EnableCharacterCollision(X4_4);
    DisableCharacterCollision(X0_4);
    WaitFixedTimeFrames(10);
    WarpCharacterAndCopyFloor(X4_4, TargetEntityType.Character, X0_4, 900, X0_4);
    ForceAnimationPlayback(X4_4, 20015, false, false, true);
    SetSpEffect(X4_4, 16316);
    WaitFixedTimeSeconds(5.2);
    DisableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterAI(X0_4);
    SetCharacterHome(X4_4, X8_4);
});

$Event(12022440, Restart, function(X0_4, X4_4, X8_4) {
    WaitFor(CharacterAIState(X0_4, AIStateType.Combat));
    RequestCharacterAIReplan(X4_4);
    SetSpEffect(X4_4, 5000);
    ChangeCharacterPatrolBehavior(X4_4, X8_4);
});

$Event(12022502, Default, function() {
    DisableNetworkSync();
    WaitFor(EventFlag(12020800) && PlayerIsInOwnWorld() && ActionButtonInArea(9710, 12021502));
    SetEventFlagID(12020502, ON);
    WaitFixedTimeSeconds(0.1);
    SetEventFlagID(9021, ON);
    SetPlayerRespawnPoint(12032502);
    SaveRequest();
    PlayCutsceneToPlayerAndWarp(12020000, CutscenePlayMode.Skippable, 12032502, 12030000, 10000, 12020000, false);
    PlayCutsceneToPlayer(12020001, CutscenePlayMode.SkippableWithFadeOutSkip, 10000);
    WaitFixedTimeFrames(1);
    WaitFixedTimeSeconds(1);
    DisplayAreaWelcomeMessage(12030);
});

$Event(12022503, Default, function() {
    if (EventFlag(12020502)) {
        DeleteAssetfollowingSFX(12021950, false);
        EndEvent();
    }
    WaitFor(EventFlag(71220));
    DeleteAssetfollowingSFX(12021950, true);
    CreateAssetfollowingSFX(12021950, 100, 6400);
});

$Event(12020510, Default, function() {
    InitializeCommonEvent(0, 90005500, 12020520, 12020521, 5, 12021520, 1049401521, 1049403521, 12021522, 12023522, 12022521, 12022522, 12020522, 12022523, 12020524);
    InitializeCommonEvent(0, 90005500, 12020525, 12020526, 4, 12021525, 1045371526, 1045373526, 12021527, 12023527, 1045372526, 12022527, 12020527, 12020528, 0);
});

$Event(12020519, Default, function() {
    EndIf(ThisEventSlot());
    SetEventFlagID(12020510, OFF);
    SetEventFlagID(12020520, OFF);
    SetEventFlagID(12020525, ON);
    SetEventFlagID(12020530, ON);
});

$Event(12020500, Default, function() {
    EndIf(EventFlag(12020570));
    WaitFixedTimeSeconds(0.5);
    DisableObjAct(1049401521, 239020);
    WaitFor(EventFlag(12020570));
    EnableObjAct(1049401521, 239020);
});

$Event(12022850, Restart, function() {
    EndIf(EventFlag(12020850));
    WaitFor(CharacterHPValue(12020850) <= 0 || CharacterHPValue(12020860) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(12020850, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(12020850) || CharacterDead(12020860));
    ForceCharacterDeath(12020850, true);
    WaitFixedTimeFrames(1);
    HandleBossDefeatAndDisplayBanner(12020850, TextBannerType.GreatEnemyFelled);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, -11100);
});

$Event(12022860, Restart, function() {
    if (EventFlag(12020850)) {
        DisableCharacter(12020850);
        DisableCharacterCollision(12020850);
        ForceCharacterDeath(12020850, false);
        DisableCharacter(12020860);
        DisableCharacterCollision(12020860);
        ForceCharacterDeath(12020860, false);
        EndEvent();
    }
L0:
    EndIf(ThisEventSlot() && !PlayerIsInOwnWorld());
    if (PlayerIsInOwnWorld()) {
        SetThisEventSlot(OFF);
    }
    DisableCharacterAI(12020850);
    DisableCharacterAI(12020860);
    if (!EventFlag(12020851)) {
        WaitFor(
            (PlayerIsInOwnWorld() && InArea(10000, 12022851))
                || HasDamageType(12020860, 0, DamageType.Unspecified)
                || CharacterHasStateInfo(12020860, 436)
                || CharacterHasStateInfo(12020860, 2)
                || CharacterHasStateInfo(12020860, 5)
                || CharacterHasStateInfo(12020860, 6)
                || CharacterHasStateInfo(12020860, 260));
        SetNetworkconnectedEventFlagID(12020851, ON);
        if (PlayerIsInOwnWorld()) {
            IssueBossRoomEntryNotification();
            SetNetworkUpdateAuthority(12025850, AuthorityLevel.Forced);
        }
L15:
        NoOp();
    } else {
L1:
        WaitFor(EventFlag(12022855) && InArea(10000, 12022850));
        if (PlayerIsInOwnWorld()) {
            IssueBossRoomEntryNotification();
            SetNetworkUpdateAuthority(12025850, AuthorityLevel.Forced);
        }
L16:
        NoOp();
    }
L2:
    WaitFixedTimeFrames(1);
    SetCharacterAIId(12020850, 90603100);
    EnableCharacterAI(12020860);
    ForceAnimationPlayback(12020860, 20010, false, false, false);
    if (PlayerIsInOwnWorld()) {
        CopyPlayerCharacterData(10000, 12020850);
    }
    SetNetworkUpdateRate(12020850, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetCharacterHome(12020850, 12022852);
    WaitFixedTimeSeconds(8);
    DisableCharacter(12020860);
    DisableCharacterAI(12020860);
    EnableCharacterAI(12020850);
    if (!CharacterDead(12020850)) {
        DisplayBossHealthBar(Enabled, 12020850, 0, 903320000);
    }
    SetNetworkconnectedEventFlagID(12022858, ON);
    SetNetworkconnectedThisEventSlot(ON);
});

$Event(12022865, Restart, function(X0_4, X4_4, X8_4) {
    if (ThisEventSlot() && !PlayerIsInOwnWorld()) {
        DisableCharacter(X0_4);
        DisableCharacterCollision(X0_4);
        EndEvent();
    }
L0:
    if (PlayerIsInOwnWorld()) {
        SetThisEventSlot(OFF);
    }
    DisableCharacter(X4_4);
    DisableCharacterCollision(X4_4);
    WaitFor(CharacterHasSpEffect(X0_4, 16307));
    EnableCharacter(X4_4);
    EnableCharacterCollision(X4_4);
    SetCharacterHome(X4_4, X8_4);
    DisableCharacterCollision(X0_4);
    WaitFixedTimeFrames(15);
    WarpCharacterAndCopyFloor(X4_4, TargetEntityType.Character, X0_4, 900, X0_4);
    ForceAnimationPlayback(X4_4, 63010, false, false, true);
    SetSpEffect(X4_4, 16316);
    WaitFixedTimeSeconds(4);
    DisableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterAI(X0_4);
});

$Event(12022869, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4) {
    if (!EventFlag(X0_4)) {
        WaitFixedTimeFrames(1);
        if (X24_4 != 0) {
            GotoIf(L0, EventFlag(X24_4));
            if (X28_4 != 0) {
                areaFlag |= InArea(10000, X28_4);
            }
            areaFlag |= EventFlag(X24_4);
            WaitFor((areaFlag && PlayerIsInOwnWorld()) || EventFlag(X0_4));
            RestartIf(EventFlag(X0_4));
            Goto(L1);
        }
L0:
        if (PlayerIsInOwnWorld()) {
            WaitFor(
                EventFlag(X0_4)
                    || (PlayerIsInOwnWorld() && !EventFlag(X0_4) && ActionButtonInArea(X20_4, X4_4)));
            GotoIf(L2, !PlayerIsInOwnWorld());
            RestartIf(EventFlag(X0_4));
            if (!CharacterHasSpEffect(10000, 4250)) {
                RotateCharacter(10000, X8_4, 60060, true);
            } else {
                RotateCharacter(10000, X8_4, 60060, false);
            }
        }
L3:
        GotoIf(L1, EventFlag(X12_4));
        time = ElapsedSeconds(3);
        WaitFor(
            ((InArea(10000, X8_4) || time) && PlayerIsInOwnWorld() && !EventFlag(X0_4))
                || EventFlag(X0_4));
        RestartIf(EventFlag(X0_4));
        RestartIf(time.Passed);
L1:
        if (PlayerIsInOwnWorld()) {
            SendInvadingPhantomsHome(0);
        }
L2:
        ActivateMultiplayerdependantBuffs(X16_4);
        SetNetworkconnectedEventFlagID(X12_4, ON);
        EndIf(!PlayerIsInOwnWorld());
        RestartEvent();
    }
L10:
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        PlayerIsInOwnWorld()
            && EventFlag(X0_4)
            && (HasMultiplayerState(MultiplayerState.Invasion)
                || HasMultiplayerState(MultiplayerState.InvasionPending))
            && ActionButtonInArea(10000, X4_4));
    RotateCharacter(10000, X8_4, 60060, true);
    SendInvadingPhantomsHome(0);
    RestartEvent();
});

$Event(12022899, Restart, function() {
    InitializeEvent(0, 12022869, 12020850, 12021850, 12022850, 12022855, 12025850, 10000, 0, 12022851);
    InitializeCommonEvent(0, 9005801, 12020850, 12021850, 12022850, 12022855, 12022856, 10000);
    InitializeCommonEvent(0, 9005811, 12020850, 12021850, 8, 0);
    InitializeCommonEvent(0, 9005812, 12020850, 12021851, 8, 0, 0);
    InitializeCommonEvent(0, 9005822, 12020850, 921100, 12022855, 12022856, 12022858, 12022852, 0, 0);
});

$Event(12022800, Restart, function() {
    EndIf(EventFlag(12020800));
    WaitFor(CharacterHPValue(12020800) <= 0 && CharacterHPValue(12020801) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(12020800, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(12020800) && CharacterDead(12020801));
    HandleBossDefeatAndDisplayBanner(12020800, TextBannerType.GreatEnemyFelled);
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, -11100);
});

$Event(12022810, Restart, function() {
    if (EventFlag(12020800)) {
        DisableCharacter(12020800);
        DisableCharacterCollision(12020800);
        ForceCharacterDeath(12020800, false);
        DisableCharacter(12020801);
        DisableCharacterCollision(12020801);
        ForceCharacterDeath(12020801, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(12020800);
    DisableCharacterAI(12020801);
    SetNetworkUpdateRate(12020800, true, CharacterUpdateFrequency.AlwaysUpdate);
    ForceAnimationPlayback(12020800, 30002, false, false, false);
    if (!EventFlag(12020801)) {
        WaitFor(
            (PlayerIsInOwnWorld() && InArea(10000, 12022801))
                || HasDamageType(12020800, 0, DamageType.Unspecified)
                || CharacterHasStateInfo(12020800, 436)
                || CharacterHasStateInfo(12020800, 2)
                || CharacterHasStateInfo(12020800, 5)
                || CharacterHasStateInfo(12020800, 6)
                || CharacterHasStateInfo(12020800, 260));
        SetNetworkconnectedEventFlagID(12020801, ON);
        ForceAnimationPlayback(12020800, 20002, false, false, false);
    } else {
L1:
        WaitFor(EventFlag(12022805) && InArea(10000, 12022800));
        ForceAnimationPlayback(12020800, 20002, false, false, false);
    }
L2:
    EnableCharacterAI(12020800);
    DisplayBossHealthBar(Enabled, 12020800, 0, 904770000);
    SetNetworkconnectedThisEventSlot(ON);
});

$Event(12022820, Restart, function() {
    EndIf(EventFlag(12020800));
    ForceAnimationPlayback(12020801, 30003, true, false, false);
    SetEventFlagID(12022820, OFF);
    WaitFor(HPRatio(12020800) <= 0.55);
    ForceAnimationPlayback(12020801, 20003, true, false, false);
    WaitFixedTimeFrames(1);
    EnableCharacterAI(12020801);
    SetNetworkUpdateRate(12020801, true, CharacterUpdateFrequency.AlwaysUpdate);
    WaitFixedTimeSeconds(5);
    DisplayBossHealthBar(Enabled, 12020801, 1, 904770001);
    SetSpEffect(12020800, 17648);
    SetSpEffect(12020801, 17648);
    SetEventFlagID(12022820, ON);
});

$Event(12022821, Restart, function() {
    EndIf(EventFlag(12020800));
    WaitFor(EventFlag(12022820) && (CharacterDead(12020800) || CharacterDead(12020801)));
    ClearSpEffect(12020800, 17648);
    ClearSpEffect(12020801, 17648);
});

$Event(12022849, Restart, function() {
    InitializeCommonEvent(0, 9005811, 12020800, 12021801, 5, 12020801);
    InitializeCommonEvent(0, 9005822, 12020800, 931000, 12022805, 12022806, 0, 12022820, 0, 0);
    InitializeCommonEvent(0, 9005800, 12020800, 12021800, 12022800, 12022805, 12025800, 10000, 12020801, 12022801);
    InitializeCommonEvent(0, 9005801, 12020800, 12021800, 12022800, 12022805, 12022806, 10000);
    InitializeCommonEvent(0, 9005811, 12020800, 12021800, 3, 12020801);
    InitializeCommonEvent(0, 9005822, 12020800, 931000, 12022805, 12022806, 0, 12022802, 0, 0);
});

$Event(12020700, Restart, function(X0_4, X4_4, X8_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4060)) {
            SetEventFlagID(12029002, OFF);
        }
    }
L10:
    if (!EventFlag(4065)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
        DisableAsset(X4_4);
        DisableAsset(X8_4);
        WaitFor(EventFlag(4065));
        RestartEvent();
    }
L5:
    GotoIf(L0, EventFlag(4060));
    GotoIf(L2, EventFlag(4062));
    GotoIf(L3, EventFlag(4063));
L0:
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    ForceAnimationPlayback(X0_4, 90107, false, false, false);
    EnableAsset(X4_4);
    EnableAsset(X8_4);
    Goto(L20);
L2:
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    DisableAsset(X4_4);
    DisableAsset(X8_4);
    Goto(L20);
L3:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    DisableAsset(X4_4);
    DisableAsset(X8_4);
    Goto(L20);
L20:
    WaitFor(!EventFlag(4065));
    RestartEvent();
});

$Event(12020701, Restart, function(X0_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(AnyBatchEventFlags(4066, 4077));
    WaitFor(
        EventFlag(4065)
            && EventFlag(12029016)
            && EventFlag(4048)
            && EntityInRadiusOfEntity(X0_4, 10000, 10, 1));
    SetEventFlagID(4078, ON);
});

$Event(12023710, Restart, function(X0_4, X4_4) {
    WaitFixedTimeFrames(1);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    DisableCharacter(X4_4);
    SetCharacterBackreadState(X4_4, true);
});

$Event(12023711, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(3503));
    EndIf(EventFlag(12029060));
    WaitFor(EntityInRadiusOfEntity(10000, X0_4, 5, 1));
    SetEventFlagID(X4_4, ON);
    WaitFor(!EntityInRadiusOfEntity(10000, X0_4, 5, 1));
    SetEventFlagID(X4_4, OFF);
    RestartEvent();
});

$Event(12023720, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3600)) {
            SetEventFlagID(12029152, OFF);
        }
    }
L19:
    if (!EventFlag(3610)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
        WaitFor(EventFlag(3610));
        RestartEvent();
    }
L10:
    GotoIf(L0, EventFlag(3600));
    GotoIf(L1, EventFlag(3601));
    GotoIf(L3, EventFlag(3603));
L0:
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    ForceAnimationPlayback(X0_4, 930010, false, false, false);
    Goto(L20);
L1:
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(3610));
    RestartEvent();
});

$Event(12023721, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    DisableNetworkSync();
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(EventFlag(X12_4) && EntityInRadiusOfEntity(10000, X0_4, X4_4, 1));
    SetSpEffect(10000, X8_4);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});


