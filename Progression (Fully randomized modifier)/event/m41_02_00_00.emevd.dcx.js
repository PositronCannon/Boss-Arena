// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    InitializeCommonEvent(0, 90005646, 41020800, 41022890, 41022891, 41021890, 41022890, 553);
    InitializeCommonEvent(0, 900005610, 41021500, 100, 800, 0);
    RegisterBonfire(41020000, 41021950, 0, 0, 0, 8);
    InitializeEvent(0, 41022800, 0);
    InitializeEvent(0, 41022810, 0);
    InitializeEvent(0, 41022811, 0);
    InitializeEvent(0, 41022849, 0);
    InitializeEvent(0, 41022815, 0);
    InitializeEvent(0, 41022831, 0);
    InitializeEvent(0, 41022830, 0);
    InitializeEvent(0, 41022852, 0);
    InitializeEvent(0, 41022833, 0);
    InitializeEvent(0, 41022840, 41020800);
    InitializeEvent(1, 41022840, 41020810);
    InitializeEvent(2, 41022840, 41020811);
    InitializeEvent(3, 41022840, 41020812);
    InitializeEvent(4, 41022840, 41020813);
    InitializeEvent(5, 41022840, 41020814);
    InitializeEvent(6, 41022840, 41020815);
    InitializeEvent(7, 41022840, 41020816);
    InitializeEvent(8, 41022840, 41020817);
    InitializeEvent(0, 41022860, 41020810);
    InitializeEvent(1, 41022860, 41020811);
    InitializeEvent(2, 41022860, 41020812);
    InitializeEvent(3, 41022860, 41020813);
    InitializeEvent(4, 41022860, 41020814);
    InitializeEvent(5, 41022860, 41020815);
    InitializeEvent(6, 41022860, 41020816);
    InitializeEvent(7, 41022860, 41020817);
    InitializeEvent(0, 41022870, 0);
    InitializeEvent(0, 41022871, 0);
    InitializeEvent(0, 41022851, 0);
    InitializeEvent(0, 41020510, 41021510);
    InitializeCommonEvent(0, 90005510, 41028560, 41021560, 41023560, 449008, 20208005, 0);
    InitializeCommonEvent(0, 90005510, 41028562, 41021562, 41023562, 1449008, 20208006, 0);
    InitializeCommonEvent(0, 90005510, 41028564, 41021564, 41023564, 1449008, 20208006, 0);
    InitializeEvent(0, 41022580, 0);
    InitializeCommonEvent(0, 90005525, 41020600, 41021600);
    InitializeCommonEvent(0, 90005706, 41020700, 30022, 0);
});

$Event(50, Default, function() {
    InitializeCommonEvent(0, 90005261, 41020200, 41022200, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 41020203, 41022203, 1065353216, 0, 3003);
    InitializeCommonEvent(0, 90005261, 41020201, 41022201, 1065353216, 0, 3000);
    InitializeCommonEvent(0, 90005261, 41020204, 41022204, 1065353216, 0, -1);
    InitializeEvent(0, 41022220, 41020220, 30001, 41022220, 1084227584, 0, 0, 0, 0, 0, 41022223, 41022221);
    InitializeCommonEvent(0, 90005221, 41020221, 30001, -1, 0, 0);
    InitializeEvent(1, 41022220, 41020222, 30001, 41022220, 1084227584, 1065353216, 0, 0, 0, 0, 41022222, 41022221);
    InitializeCommonEvent(0, 90005201, 41020205, 30001, 20001, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 41020206, 30001, 20001, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 41020207, 30000, 20000, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020208, 41022208, 1065353216, 0, 0);
    InitializeCommonEvent(0, 90005201, 41020209, 30001, 20001, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 41020210, 30001, 20001, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020211, 41022216, 1065353216, 0, -1);
    InitializeCommonEvent(0, 90005261, 41020212, 41022212, 1065353216, 0, 3001);
    InitializeCommonEvent(0, 90005201, 41020213, 30000, 20000, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 41020216, 30000, 20000, 41022216, 1065353216, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 41020217, 30001, 20001, 41022216, 1065353216, 1050253722, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 41020218, 30002, 20002, 41022216, 1065353216, 1061997773, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020219, 41022216, 1084227584, 0, 0);
    InitializeCommonEvent(0, 90005445, 41020240, 30001, 20001, 41022240, 0, 0, 0, 0, 0, 41021240);
    InitializeCommonEvent(0, 90005261, 41020242, 41022242, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005446, 41020243, 30001, 20001, 1084227584, 0, 0, 0, 0, 0, 41021243);
    InitializeCommonEvent(0, 90005211, 41020245, 30000, 20000, 41022245, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005445, 41020241, 30001, 20001, 41022241, 1075419546, 0, 0, 0, 0, 41021241);
    InitializeEvent(1, 41022240, 41020241, 30001, 20001, 41022562, 0, 0, 0, 0, 0, 41021241, 41027320);
    InitializeCommonEvent(0, 90005445, 41020244, 30001, 20001, 41022244, 1045220557, 0, 0, 0, 0, 41021244);
    InitializeEvent(4, 41022240, 41020244, 30001, 20001, 41022562, 0, 0, 0, 0, 0, 41021244, 41027320);
    InitializeCommonEvent(0, 90005261, 41020249, 41022249, 1065353216, 0, 3002);
    InitializeCommonEvent(0, 90005261, 41020300, 41022300, 1101004800, 0, -1);
    InitializeCommonEvent(0, 90005211, 41020262, 30002, 20002, 41022262, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 41020263, 30000, 20000, 41022263, 1065353216, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005251, 41020264, 1088421888, 0, 1703);
    InitializeCommonEvent(0, 90005221, 41020286, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020287, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020288, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020289, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020290, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020291, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020292, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005221, 41020293, 30022, 20052, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020352, 41022352, 1065353216, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020353, 41022352, 1065353216, 1067869798, 0);
    InitializeCommonEvent(0, 90005261, 41020357, 41022357, 1065353216, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020380, 41022380, 1065353216, 0, 0);
    InitializeCommonEvent(0, 90005261, 41020381, 41022357, 1065353216, 1074580685, 0);
});

$Event(41022220, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X20_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    if (0 != X8_4) {
        area |= InArea(10000, X8_4);
    }
    area |= EntityInRadiusOfEntity(10000, X0_4, X12_4, 1);
    areaChrSp &= area
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X24_4 == 0 && X28_4 == 0 && X32_4 == 0)) {
        if (X24_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        areaChrSp &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaChrSp &= chrSp;
    WaitFor(
        areaChrSp
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X16_4);
        if (X20_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        ForceAnimationPlayback(X0_4, 20017, false, true, false);
        if (X40_4 != 0) {
            RotateCharacter(X0_4, X40_4, 20018, false);
            ForceAnimationPlayback(X0_4, 20018, true, false, true);
            WaitFor(InArea(X0_4, X40_4));
        }
        RotateCharacter(X0_4, X36_4, 20018, false);
        ForceAnimationPlayback(X0_4, 20018, true, false, true);
        WaitFor(InArea(X0_4, X36_4));
        ForceAnimationPlayback(X0_4, 20019, true, true, false);
        ForceAnimationPlayback(X0_4, 30016, true, false, false);
        EndEvent();
    }
L0:
    if (X20_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(41022240, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4, X40_4) {
    if (SpecialStandbyEndedFlag(X0_4)) {
        DisableAsset(X36_4);
        EndEvent();
    }
    if (X20_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    EnableAssetInvunerability(X36_4);
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaChrSp &= InArea(10000, X12_4)
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    cmpAreaChrSpDmgFlag &= X24_4 == 0 && X28_4 == 0 && X32_4 == 0;
    if (!cmpAreaChrSpDmgFlag) {
        if (X24_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        areaChrSp &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaChrSp &= chrSp;
    cmpAreaChrSpDmgFlag &= (areaChrSp
        || HasDamageType(X0_4, 0, DamageType.Unspecified)
        || CharacterHasStateInfo(X0_4, 436)
        || CharacterHasStateInfo(X0_4, 2)
        || CharacterHasStateInfo(X0_4, 5)
        || CharacterHasStateInfo(X0_4, 6)
        || CharacterHasStateInfo(X0_4, 260)
        || sp
        || sp2
        || sp3
        || sp4
        || sp5)
        && EventFlag(X40_4);
    WaitFor(cmpAreaChrSpDmgFlag);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X16_4);
        if (X20_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        DisableAssetInvunerability(X36_4);
        RequestAssetDestruction(X36_4, 1);
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    DisableAssetInvunerability(X36_4);
    RequestAssetDestruction(X36_4, 1);
    if (X20_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(41020510, Restart, function(X0_4) {
    if (ThisEventSlot()) {
        DisableAsset(X0_4);
        EndEvent();
    }
L0:
    WaitFor(AssetDestroyed(X0_4, Equal, 1));
    SetNetworkconnectedThisEventSlot(ON);
    EndEvent();
});

$Event(41022550, Restart, function(X0_4, X4_4) {
    EndIf(ThisEventSlot());
    EnableAssetInvunerability(X4_4);
    WaitFor(SpecialStandbyEndedFlag(X0_4));
    DisableAssetInvunerability(X4_4);
    RequestAssetDestruction(X4_4, 1);
});

$Event(41022580, Default, function() {
    RegisterLadder(41020580, 41020581, 41021580);
    RegisterLadder(41020582, 41020583, 41021582);
    RegisterLadder(41020584, 41020585, 41021584);
});

$Event(41022800, Restart, function() {
    EndIf(EventFlag(41020800));
    WaitFor(CharacterHPValue(41020800) <= 0);
    ForceCharacterDeath(41020810, false);
    ForceCharacterDeath(41020811, false);
    ForceCharacterDeath(41020812, false);
    ForceCharacterDeath(41020813, false);
    ForceCharacterDeath(41020814, false);
    ForceCharacterDeath(41020815, false);
    ForceCharacterDeath(41020816, false);
    ForceCharacterDeath(41020817, false);
    ClearSpEffect(10000, 19701);
    ClearSpEffect(10000, 19702);
    ClearSpEffect(10000, 19703);
    ClearSpEffect(10000, 19704);
    ClearSpEffect(10000, 19705);
    ClearSpEffect(10000, 19706);
    ClearSpEffect(10000, 19707);
    WaitFixedTimeSeconds(4);
    PlaySE(41020800, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(41020800));
    HandleBossDefeatAndDisplayBanner(41020800, TextBannerType.EnemyFelled);
    //boss rewards (4 bonus items + guaranteed flag)
    InitializeCommonEvent(0,90001034,1049304290,-1,-1,1049304152,1049307189,1049307190,1049307191,1049307192,1049307193,1049306282,1049306284,1049306286,1049306289,1049306294,1049300290);
    //roundtable warp
    WaitFixedTimeSeconds(6);
    WarpPlayer(11, 10, 0, 0, 11102021, 0);
});

$Event(41022810, Restart, function() {
    if (EventFlag(41020800)) {
        DisableCharacter(41020800);
        DisableCharacterCollision(41020800);
        ForceCharacterDeath(41020800, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(41020800);
    DisableCharacterHPBarDisplay(41020810);
    DisableCharacterHPBarDisplay(41020811);
    DisableCharacterHPBarDisplay(41020812);
    DisableCharacterHPBarDisplay(41020813);
    DisableCharacterHPBarDisplay(41020814);
    DisableCharacterHPBarDisplay(41020815);
    DisableCharacterHPBarDisplay(41020816);
    DisableCharacterHPBarDisplay(41020817);
    SetEventFlagID(41022835, OFF);
    SetEventFlagID(41022836, OFF);
    SetEventFlagID(41022837, OFF);
    if (PlayerIsInOwnWorld()) {
        SetNetworkUpdateAuthority(41020800, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020810, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020811, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020812, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020813, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020814, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020815, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020816, AuthorityLevel.Forced);
        SetNetworkUpdateAuthority(41020817, AuthorityLevel.Forced);
    }
    if (!EventFlag(41020801)) {
        WaitFor(EventFlag(41022805) && InArea(10000, 41022800));
        SetNetworkconnectedEventFlagID(41020801, ON);
    } else {
L1:
        WaitFor(EventFlag(41022805) && InArea(10000, 41022800));
    }
L2:
    EnableCharacterAI(41020800);
    SetNetworkUpdateRate(41020800, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 41020800, 0, 142700);
});

$Event(41022811, Restart, function() {
    EndIf(EventFlag(41020800));
    WaitFor(CharacterHasSpEffect(41020800, 20018016));
    SetEventFlagID(41022802, ON);
});

$Event(41022815, Restart, function() {
    EndIf(EventFlag(41020800));
    WaitFor(
        (PlayerIsInOwnWorld()
            && CharacterHasSpEffect(41020800, 20018016)
            && CharacterDead(41020810)
            && CharacterDead(41020811)
            && CharacterDead(41020812)
            && CharacterDead(41020813)
            && CharacterDead(41020814)
            && CharacterDead(41020815)
            && CharacterDead(41020816)
            && CharacterDead(41020817))
            || (PlayerIsInOwnWorld() && CharacterHasSpEffect(41020800, 20018653)));
    GotoIf(L0, EventFlag(41022820));
    GotoIf(L1, EventFlag(41022821));
    GotoIf(L2, EventFlag(41022822));
    GotoIf(L3, EventFlag(41022823));
    GotoIf(L4, EventFlag(41022824));
    GotoIf(L5, EventFlag(41022825));
    GotoIf(L6, EventFlag(41022826));
    GotoIf(L7, EventFlag(41022827));
L0:
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022880, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022810, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L1:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022881, ON);
    InvokeEnemyGenerator(41024810);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022811, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L2:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022882, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024810);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022812, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L3:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022883, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024810);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022813, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L4:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022884, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024810);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022814, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L5:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022885, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024810);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022815, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L6:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020817);
    EnableCharacterAI(41020817);
    SetEventFlagID(41022886, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024810);
    InvokeEnemyGenerator(41024817);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020817, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020817, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022816, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
L7:
    EnableCharacter(41020810);
    EnableCharacterAI(41020810);
    EnableCharacter(41020811);
    EnableCharacterAI(41020811);
    EnableCharacter(41020812);
    EnableCharacterAI(41020812);
    EnableCharacter(41020813);
    EnableCharacterAI(41020813);
    EnableCharacter(41020814);
    EnableCharacterAI(41020814);
    EnableCharacter(41020815);
    EnableCharacterAI(41020815);
    EnableCharacter(41020816);
    EnableCharacterAI(41020816);
    SetEventFlagID(41022887, ON);
    InvokeEnemyGenerator(41024811);
    InvokeEnemyGenerator(41024812);
    InvokeEnemyGenerator(41024813);
    InvokeEnemyGenerator(41024814);
    InvokeEnemyGenerator(41024815);
    InvokeEnemyGenerator(41024816);
    InvokeEnemyGenerator(41024810);
    SetNetworkUpdateRate(41020810, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020811, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020812, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020813, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020814, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020815, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020816, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(41020817, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(41020810, TargetEntityType.Area, 41022810, -1);
    IssueShortWarpRequest(41020811, TargetEntityType.Area, 41022811, -1);
    IssueShortWarpRequest(41020812, TargetEntityType.Area, 41022812, -1);
    IssueShortWarpRequest(41020813, TargetEntityType.Area, 41022813, -1);
    IssueShortWarpRequest(41020814, TargetEntityType.Area, 41022814, -1);
    IssueShortWarpRequest(41020815, TargetEntityType.Area, 41022815, -1);
    IssueShortWarpRequest(41020816, TargetEntityType.Area, 41022816, -1);
    ForceAnimationPlayback(41020810, 61020, false, false, false);
    ForceAnimationPlayback(41020811, 61020, false, false, false);
    ForceAnimationPlayback(41020812, 61020, false, false, false);
    ForceAnimationPlayback(41020813, 61020, false, false, false);
    ForceAnimationPlayback(41020814, 61020, false, false, false);
    ForceAnimationPlayback(41020815, 61020, false, false, false);
    ForceAnimationPlayback(41020816, 61020, false, false, false);
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022817, -1);
    ForceAnimationPlayback(41020800, 61020, false, false, false);
    WaitFixedTimeRealFrames(60);
    SetEventFlagID(41022832, OFF);
    RestartEvent();
});

$Event(41022830, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(41020800));
    WaitFor(!EventFlag(41022832));
    GotoIf(L0, EventFlag(41022820));
    GotoIf(L1, EventFlag(41022821));
    GotoIf(L2, EventFlag(41022822));
    GotoIf(L3, EventFlag(41022823));
    GotoIf(L4, EventFlag(41022824));
    GotoIf(L5, EventFlag(41022825));
    GotoIf(L6, EventFlag(41022826));
    GotoIf(L7, EventFlag(41022827));
L0:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, ON);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L1:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, ON);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L2:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, ON);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L3:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, ON);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L4:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, ON);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L5:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, ON);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L6:
    SetEventFlagID(41022820, OFF);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, ON);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
L7:
    SetEventFlagID(41022820, ON);
    SetEventFlagID(41022821, OFF);
    SetEventFlagID(41022822, OFF);
    SetEventFlagID(41022823, OFF);
    SetEventFlagID(41022824, OFF);
    SetEventFlagID(41022825, OFF);
    SetEventFlagID(41022826, OFF);
    SetEventFlagID(41022827, OFF);
    WaitFixedTimeRealFrames(1);
    RestartEvent();
});

$Event(41022831, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(41020800));
    WaitRandomTimeRealFrames(40, 119);
    SetEventFlagID(41022832, ON);
    WaitFixedTimeRealFrames(1);
    GotoIf(L0, EventFlag(41022821));
    GotoIf(L1, EventFlag(41022822));
    GotoIf(L2, EventFlag(41022823));
    GotoIf(L3, EventFlag(41022824));
    GotoIf(L4, EventFlag(41022825));
    GotoIf(L5, EventFlag(41022826));
    GotoIf(L6, EventFlag(41022827));
    GotoIf(L7, EventFlag(41022820));
L0:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, ON);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L1:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, ON);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L2:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, ON);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L3:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, ON);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L4:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, ON);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L5:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, ON);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L6:
    SetNetworkconnectedEventFlagID(41022820, OFF);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, ON);
    Goto(L10);
L7:
    SetNetworkconnectedEventFlagID(41022820, ON);
    SetNetworkconnectedEventFlagID(41022821, OFF);
    SetNetworkconnectedEventFlagID(41022822, OFF);
    SetNetworkconnectedEventFlagID(41022823, OFF);
    SetNetworkconnectedEventFlagID(41022824, OFF);
    SetNetworkconnectedEventFlagID(41022825, OFF);
    SetNetworkconnectedEventFlagID(41022826, OFF);
    SetNetworkconnectedEventFlagID(41022827, OFF);
    Goto(L10);
L10:
    WaitFor(!EventFlag(41022832));
    RestartEvent();
});

$Event(41022852, Restart, function() {
    EndIf(EventFlag(41020800));
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(CharacterHasSpEffect(41020800, 20018654) || CharacterHasSpEffect(41020800, 20018639));
    if (!EventFlag(41022852)) {
        SetEventFlagID(41022852, ON);
        WaitFixedTimeRealFrames(10);
        RestartEvent();
    }
    if (!EventFlag(41022880)) {
        if (!CharacterHasSpEffect(41020810, 20018040)) {
            ForceCharacterDeath(41020810, false);
        }
    }
    if (!EventFlag(41022881)) {
        if (!CharacterHasSpEffect(41020811, 20018040)) {
            ForceCharacterDeath(41020811, false);
        }
    }
    if (!EventFlag(41022882)) {
        if (!CharacterHasSpEffect(41020812, 20018040)) {
            ForceCharacterDeath(41020812, false);
        }
    }
    if (!EventFlag(41022883)) {
        if (!CharacterHasSpEffect(41020813, 20018040)) {
            ForceCharacterDeath(41020813, false);
        }
    }
    if (!EventFlag(41022884)) {
        if (!CharacterHasSpEffect(41020814, 20018040)) {
            ForceCharacterDeath(41020814, false);
        }
    }
    if (!EventFlag(41022885)) {
        if (!CharacterHasSpEffect(41020815, 20018040)) {
            ForceCharacterDeath(41020815, false);
        }
    }
    if (!EventFlag(41022886)) {
        if (!CharacterHasSpEffect(41020816, 20018040)) {
            ForceCharacterDeath(41020816, false);
        }
    }
    if (!EventFlag(41022887)) {
        if (!CharacterHasSpEffect(41020817, 20018040)) {
            ForceCharacterDeath(41020817, false);
        }
    }
    WaitFixedTimeRealFrames(1);
    SetNetworkconnectedEventFlagID(41022880, OFF);
    SetNetworkconnectedEventFlagID(41022881, OFF);
    SetNetworkconnectedEventFlagID(41022882, OFF);
    SetNetworkconnectedEventFlagID(41022883, OFF);
    SetNetworkconnectedEventFlagID(41022884, OFF);
    SetNetworkconnectedEventFlagID(41022885, OFF);
    SetNetworkconnectedEventFlagID(41022886, OFF);
    SetNetworkconnectedEventFlagID(41022887, OFF);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(41022833, Restart, function() {
    DisableNetworkSync();
    EndIf(EventFlag(41020800));
    WaitFor(EventValue(41022835, 3) >= 1);
    SetSpEffect(20000, 19701);
    WaitFor(EventValue(41022835, 3) >= 2);
    SetSpEffect(20000, 19702);
    WaitFor(EventValue(41022835, 3) >= 3);
    SetSpEffect(20000, 19703);
    WaitFor(EventValue(41022835, 3) >= 4);
    SetSpEffect(20000, 19704);
    WaitFor(EventValue(41022835, 3) >= 5);
    SetSpEffect(20000, 19705);
    WaitFor(EventValue(41022835, 3) >= 6);
    SetSpEffect(20000, 19706);
    WaitFor(EventValue(41022835, 3) >= 7);
    SetSpEffect(20000, 19700);
});

$Event(41022840, Restart, function(X0_4) {
    DisableNetworkSync();
    EndIf(EventFlag(41020800));
    WaitFor(CharacterHasSpEffect(X0_4, 20018017));
    if (InArea(10000, 41022100)) {
        IncrementEventValue(41022835, 3, 7);
    }
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(41022849, Restart, function() {
    InitializeCommonEvent(0, 9005800, 41020800, 41021800, 41022800, 41022805, 41025800, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 41020800, 41021800, 41022800, 41022805, 41022806, 10000);
    InitializeCommonEvent(0, 9005811, 41020800, 41021800, 4, 0);
    InitializeCommonEvent(0, 9005822, 41020800, 941000, 41022805, 41022806, 0, 41022802, 0, 0);
});

$Event(41022860, Restart, function(X0_4) {
    EndIf(EventFlag(41020800));
    WaitFor(PlayerIsInOwnWorld() && CharacterHasSpEffect(X0_4, 20018022));
    IssueShortWarpRequest(X0_4, TargetEntityType.Area, 41022860, -1);
    DisableCharacter(X0_4);
    DisableCharacterAI(X0_4);
    WaitFixedTimeRealFrames(10);
    RestartEvent();
});

$Event(41022851, Restart, function() {
    EndIf(EventFlag(41020800));
    WaitFor(PlayerIsInOwnWorld() && CharacterHasSpEffect(41020800, 20018648));
    IssueShortWarpRequest(41020800, TargetEntityType.Area, 41022860, -1);
    WaitFixedTimeRealFrames(10);
    RestartEvent();
});

$Event(41022870, Restart, function() {
    EndIf(EventFlag(41020800));
    WaitFor(
        PlayerIsInOwnWorld()
            && (CharacterHasSpEffect(41020800, 20018016) || CharacterHasSpEffect(41020800, 20018653)));
    if (HPRatio(41020800) <= 1 && HPRatio(41020800) >= 0.8) {
        SetSpEffect(41020800, 20018630);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.8 && HPRatio(41020800) >= 0.7) {
        SetSpEffect(41020800, 20018631);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.7 && HPRatio(41020800) >= 0.6) {
        SetSpEffect(41020800, 20018632);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.6 && HPRatio(41020800) >= 0.5) {
        SetSpEffect(41020800, 20018633);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.5 && HPRatio(41020800) >= 0.4) {
        SetSpEffect(41020800, 20018634);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.4 && HPRatio(41020800) >= 0.3) {
        SetSpEffect(41020800, 20018635);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.3 && HPRatio(41020800) >= 0.2) {
        SetSpEffect(41020800, 20018636);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    if (HPRatio(41020800) < 0.2 && HPRatio(41020800) >= 0.1) {
        SetSpEffect(41020800, 20018637);
        WaitFixedTimeSeconds(1);
        RestartEvent();
    }
    SetSpEffect(41020800, 20018638);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(41022871, Restart, function() {
    EndIf(EventFlag(41020800));
    WaitFor(PlayerIsInOwnWorld() && CharacterHasSpEffect(41020800, 20018639));
    ForceAnimationPlayback(41020800, 61050, false, true, false);
    WaitFixedTimeRealFrames(10);
    RestartEvent();
});




